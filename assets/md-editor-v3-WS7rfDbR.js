var _r=Object.defineProperty;var pi=e=>{throw TypeError(e)};var kr=(e,t,n)=>t in e?_r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>kr(e,typeof t!="symbol"?t+"":t,n),En=(e,t,n)=>t.has(e)||pi("Cannot "+n);var h=(e,t,n)=>(En(e,t,"read from private field"),n?n.call(e):t.get(e)),j=(e,t,n)=>t.has(e)?pi("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),M=(e,t,n,o)=>(En(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n),I=(e,t,n)=>(En(e,t,"access private method"),n);var Vt=(e,t,n,o)=>({set _(i){M(e,t,i,n)},get _(){return h(e,t,o)}});import{g as yr,M as bl,d as Y,r as _e,a as W,w as B,o as Q,b as ct,c as Lt,e as g,i as R,f as _l,p as kl,h as Fe,j as de,u as Cr,F as Pt,k as xr,l as wr,s as Ar,m as Er,U as Bn,t as je,n as yl,q as at,v as Ve,x as Fr,y as Tr,z as Cl,A as Dr,T as Sr,X as $r,S as Ir,C as Lr,L as Mr,B as zr,E as Rr,V as Br,D as Or,G as Pr,H as Hr,I as Nr,J as gi,K as jr,N as Vr,R as Wr,O as Ur,P as qr,Q as Gr,W as Zr,Y as Xr,Z as Kr,_ as Yr,$ as Jr,a0 as Qr,a1 as es,a2 as ts,a3 as ns,a4 as os,a5 as is,a6 as ls,a7 as rs,a8 as xl,a9 as ss,aa as as,ab as mt,ac as Ze,ad as cs,ae as us,af as ds,ag as fs,ah as vi,ai as hs,aj as ms,ak as ps,al as gs,am as vs,an as bs,ao as wl,ap as Fn,aq as _s,ar as ks,as as vt,at as ys,au as Al,av as Cs,aw as E,ax as xs,ay as ws,az as As}from"./node_modules-DzJYoZ3M.js";let On=null;async function gh(){On=await Es()}function cn(e,t="zh"){if(On==null)return[!1,e.toString()];const n=On[e.toString()];if(!n)return[!1,e.toString()];let o=n[t];return o||(t="zh",o=n[t]),o?[!0,o]:[!1,e.toString()]}async function Es(){return new Promise(e=>{e({404:{zh:"接口未找到"},1e3:{zh:"系统错误，请重试或等待管理员修复"},1001:{zh:"系统异常，请重试或等待管理员修复"},1002:{zh:"未知错误"},1003:{zh:"操作过于频繁，请稍后重试"},10001:{zh:"权限异常，请重新登陆后再试"},10002:{zh:"参数不符合要求"},10003:{zh:"未找到目标数据"},10004:{zh:"操作需要登录，请登录后重试"},100001:{zh:"用户名不存在或密码不匹配"},100002:{zh:"邮件发送失败，可能是邮箱无效或达到了每日注册上限，如有问题可联系管理员解决"},100003:{zh:"验证码错误或已过期，请重新获取"},100004:{zh:"注册用户失败，可能存在同名用户"},100005:{zh:"用户名不存在，或您未在本系统绑定邮箱，请联系管理员寻求帮助"},100006:{zh:"验证码错误或已过期，请重新获取"},100007:{zh:"已存在相同标题的题目"},100008:{zh:"已存在相同标题的比赛"},100009:{zh:"已存在相同标题的题集"},100010:{zh:"未发现有效题目"},100011:{zh:"题目数量超过限制，无法添加"},100012:{zh:"比赛开始时间无法设置为早于当前时间"},100013:{zh:"当前无法提交题目"},100014:{zh:"申请访问失败，密码错误"},100015:{zh:"未找到目标题目"},100016:{zh:"已经存在该日期的条目"},100017:{zh:"已经存在该问题的条目"},100018:{zh:"请上传包含所有判题数据的zip压缩包"},100019:{zh:"判题数据不可包含文件夹"},100020:{zh:"判题数据中rule.yaml解析失败"},100021:{zh:"判题数据中spj语言不受支持"},100022:{zh:"判题数据中spj代码读取失败"},100023:{zh:"判题数据中spj代码编译失败"},100024:{zh:"判题数据中未读取到有效的任务"},100025:{zh:"判题数据中任务数量不可超过1000个"},100026:{zh:"判题数据中任务数据读取失败"},100027:{zh:"判题数据转码换行符失败"},100028:{zh:"判题数据计算md5失败"},100029:{zh:"判题数据上传失败"},100030:{zh:"暂未开放该问题所使用的远程 OJ 的提交"},100031:{zh:"压缩包大小限制超过了限制，当前不可超过{max_size}，可联系管理员"}})})}function vh(){const{appContext:e}=yr();return{globalProperties:e.config.globalProperties}}function bh(e,t=300){let n;return function(...o){n&&clearTimeout(n),n=setTimeout(()=>{e(...o)},t)}}function _h(){return 1e3}function kh(e,t,n=3e3){return e.$message.success({duration:n,content:t})}function Fs(e,t,n=3e3){return e.$message.info({duration:n,content:t})}function Ts(e,t,n=3e3){return e.$message.error({duration:n,content:t})}function Ds(e,t,n=3e3){const[o,i]=cn(t),l=o?i:`系统错误，错误提示[${i}]`;return e.$message.error({duration:n,content:l})}function yh(e,t,n=null,o=3e3){let i="";const[l,r]=cn(t);if(l)n?i=r.replace(/\{(\w+)\}/g,(s,a)=>{const c=n[a];if(c){const[d,u]=cn(c);return d?u:c}return s}):i=r;else{const s=Number(r);isNaN(s)?i=`${r}`:i=`系统错误，错误码[${s}]`}return e.$message.error({duration:o,content:i})}function Ss(e,t){e.$message&&e.$message.close(t)}function Ch(e,t){return e.length<=t?e:e.slice(0,t)+"..."}function xh(e){return e.trim().split(/\s+/).flatMap(o=>o.split(",")).filter(o=>o.trim()!=="")}function $s(e,t){return fetch(e,{method:"PUT",headers:{"Content-Type":t.type},body:t})}async function wh(e,t,n,o){let i=[];const l=Fs(n,"图片正在上传，请稍候...",0);try{for(const r of e){const s=await o();if(s.code!==0){Ds(n,s.code);const[c,d]=cn(s.code);i=i.concat({url:d,alt:"上传失败",title:""});continue}const a=s.data.upload_url;await $s(a,r),i=i.concat({url:s.data.preview_url,alt:r.name,title:r.name})}}catch{Ts(n,"上传失败"),i=i.concat({url:"上传失败",alt:"上传失败",title:""})}finally{t(i),Ss(n,l)}}const f="md-editor",K="https://unpkg.com",Is=`${K}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,bi={main:`${K}/prettier@3.3.3/standalone.js`,markdown:`${K}/prettier@3.3.3/plugins/markdown.js`},Ls={css:`${K}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${K}/cropperjs@1.6.2/dist/cropper.min.js`},Ms=`${K}/screenfull@5.2.0/dist/screenfull.js`,zs=`${K}/mermaid@11.3.0/dist/mermaid.min.js`,Rs={js:`${K}/katex@0.16.11/dist/katex.min.js`,css:`${K}/katex@0.16.11/dist/katex.min.css`},Pn={a11y:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${K}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${K}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},El=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Fl=["markdownTotal","=","scrollSwitch"],_i={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Crop And Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},ie={editorExtensions:{highlight:{js:Is,css:Pn},prettier:{standaloneJs:bi.main,parserMarkdownJs:bi.markdown},cropper:{...Ls},screenfull:{js:Ms},mermaid:{js:zs,enableZoom:!0},katex:{...Rs}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},Ah=e=>bl(ie,e,{excludeKeys(t){return/[iI]{1}nstance/.test(t)}}),Wt=.1,ke=({instance:e,ctx:t,props:n={}},o="default")=>{const i=(e==null?void 0:e.$slots[o])||(t==null?void 0:t.slots[o]);return(i?i(e):"")||n[o]},Bs={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},pt=Y({name:`${f}-dropdown`,props:Bs,setup(e,t){const n=`${f}-dropdown-hidden`,o=_e({overlayClass:[n],overlayStyle:{},triggerHover:!1,overlayHover:!1}),i=W(),l=W(),r=()=>{var d,u;if(e.disabled)return!1;o.triggerHover=!0;const m=i.value,v=l.value;if(!m||!v)return;const p=m.getBoundingClientRect(),w=m.offsetTop,C=m.offsetLeft,x=p.height,b=p.width,_=m.getRootNode(),y=((d=_.querySelector(e.relative))==null?void 0:d.scrollLeft)||0,k=((u=_.querySelector(e.relative))==null?void 0:u.clientWidth)||0;let A=C-v.offsetWidth/2+b/2-y;A+v.offsetWidth>y+k&&(A=y+k-v.offsetWidth),A<0&&(A=0),o.overlayStyle={...o.overlayStyle,top:w+x+"px",left:A+"px"},e.onChange(!0)},s=()=>{if(e.disabled)return!1;o.overlayHover=!0};B(()=>e.visible,d=>{d?o.overlayClass=o.overlayClass.filter(u=>u!==n):o.overlayClass.push(n)});let a=-1;const c=d=>{i.value===d.target?o.triggerHover=!1:o.overlayHover=!1,clearTimeout(a),a=window.setTimeout(()=>{!o.overlayHover&&!o.triggerHover&&e.onChange(!1)},10)};return Q(()=>{i.value.addEventListener("mouseenter",r),i.value.addEventListener("mouseleave",c),l.value.addEventListener("mouseenter",s),l.value.addEventListener("mouseleave",c)}),ct(()=>{i.value.removeEventListener("mouseenter",r),i.value.removeEventListener("mouseleave",c),l.value.removeEventListener("mouseenter",s),l.value.removeEventListener("mouseleave",c)}),()=>{const d=ke({ctx:t}),u=ke({props:e,ctx:t},"overlay"),m=Lt(d instanceof Array?d[0]:d,{ref:i,key:"cloned-dropdown-trigger"}),v=g("div",{class:[`${f}-dropdown`,o.overlayClass],style:o.overlayStyle,ref:l},[g("div",{class:`${f}-dropdown-overlay`},[u instanceof Array?u[0]:u])]);return[m,v]}}}),Os={title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},Yt=Y({name:"DropdownToolbar",props:Os,emits:["onChange"],setup(e,t){const n=R("editorId");return()=>{const o=ke({props:e,ctx:t},"trigger"),i=ke({props:e,ctx:t},"overlay"),l=ke({props:e,ctx:t});return g(pt,{relative:`#${n}-toolbar-wrapper`,visible:e.visible,onChange:r=>{var s;(s=e.onChange)==null||s.call(e,r),t.emit("onChange",r)},overlay:i,disabled:e.disabled},{default:()=>[g("div",{class:[`${f}-toolbar-item`,e.disabled&&`${f}-disabled`],title:e.title||""},[l||o])]})}}});Yt.install=e=>(e.component(Yt.name,Yt),e);var Ps=Object.defineProperty,Hs=(e,t,n)=>t in e?Ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ns=(e,t,n)=>Hs(e,t+"",n);class js{constructor(){Ns(this,"pools",{})}remove(t,n,o){const l=this.pools[t]&&this.pools[t][n];l&&(this.pools[t][n]=l.filter(r=>r!==o))}clear(t){this.pools[t]={}}on(t,n){return this.pools[t]||(this.pools[t]={}),this.pools[t][n.name]||(this.pools[t][n.name]=[]),this.pools[t][n.name].push(n.callback),this.pools[t][n.name].includes(n.callback)}emit(t,n,...o){this.pools[t]||(this.pools[t]={});const l=this.pools[t][n];l&&l.forEach(r=>{try{r(...o)}catch(s){console.error(`${n} monitor event exception！`,s)}})}}const F=new js,vn="onSave",Yn="changeCatalogVisible",Tl="changeFullscreen",ki="pageFullscreenChanged",yi="fullscreenChanged",Ci="previewChanged",xi="previewOnlyChanged",wi="htmlPreviewChanged",Ai="catalogVisibleChanged",Jt="buildFinished",ot="errorCatcher",q="replace",bn="uploadImage",Hn="openModals",Dl="ctrlZ",Sl="ctrlShiftZ",$t="catalogChanged",$l="pushCatalog",Jn="rerender",Il="eventListener",Ll="taskStateChanged",Ml="sendEditorView",un="getEditorView",Vs={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${f}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${f}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`,pin:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>',"pin-off":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-off"><path d="M12 17v5"/><path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/><path d="m2 2 20 20"/><path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/></svg>'},Qt=(e,t)=>typeof t[e]=="string"?t[e]:Vs[e],Ei=(e,t)=>{const n=o=>{const i=e.parentElement||document.body,l=i.offsetWidth,r=i.offsetHeight,{clientWidth:s,clientHeight:a}=document.documentElement,c=o.offsetX,d=o.offsetY,u=v=>{let p=v.x+document.body.scrollLeft-document.body.clientLeft-c,w=v.y+document.body.scrollTop-document.body.clientTop-d;p=p<1?1:p<s-l-1?p:s-l-1,w=w<1?1:w<a-r-1?w:a-r-1,t?t(p,w):(i.style.left=`${p}px`,i.style.top=`${w}px`)};document.addEventListener("mousemove",u);const m=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m)};document.addEventListener("mouseup",m)};return e.addEventListener("mousedown",n),()=>{e.removeEventListener("mousedown",n)}},$e=(e,t,n="")=>{var o;const i=document.getElementById(t.id);if(i)n!==""&&(Reflect.get(window,n)?(o=t.onload)==null||o.call(i,new Event("load")):t.onload&&i.addEventListener("load",t.onload));else{const l={...t};l.onload=null;const r=Us(e,l);t.onload&&r.addEventListener("load",t.onload),document.head.appendChild(r)}},Ws=(e,t)=>{const n=document.getElementById(t.id);n==null||n.remove(),$e(e,t)},Us=(e,t)=>{const n=document.createElement(e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(n[o]=t[o])}),n},Fi=(()=>{const e=n=>{if(!n)return()=>{};const o=n.firstChild;let i=1,l=0,r=0,s=!1,a,c,d,u=1;const m=()=>{o.style.transform=`translate(${l}px, ${r}px) scale(${i})`},v=k=>{k.touches.length===1?(s=!0,a=k.touches[0].clientX-l,c=k.touches[0].clientY-r):k.touches.length===2&&(d=Math.hypot(k.touches[0].clientX-k.touches[1].clientX,k.touches[0].clientY-k.touches[1].clientY),u=i)},p=k=>{if(k.preventDefault(),s&&k.touches.length===1)l=k.touches[0].clientX-a,r=k.touches[0].clientY-c,m();else if(k.touches.length===2){const $=Math.hypot(k.touches[0].clientX-k.touches[1].clientX,k.touches[0].clientY-k.touches[1].clientY)/d,D=i;i=u*(1+($-1));const S=(k.touches[0].clientX+k.touches[1].clientX)/2,L=(k.touches[0].clientY+k.touches[1].clientY)/2,H=o.getBoundingClientRect(),z=(S-H.left)/D,N=(L-H.top)/D;l-=z*(i-D),r-=N*(i-D),m()}},w=()=>{s=!1},C=k=>{k.preventDefault();const A=.02,$=i;k.deltaY<0?i+=A:i=Math.max(.1,i-A);const D=o.getBoundingClientRect(),S=k.clientX-D.left,L=k.clientY-D.top;l-=S/$*(i-$),r-=L/$*(i-$),m()},x=k=>{s=!0,a=k.clientX-l,c=k.clientY-r},b=k=>{s&&(l=k.clientX-a,r=k.clientY-c,m())},_=()=>{s=!1},y=()=>{s=!1};return n.addEventListener("touchstart",v,{passive:!1}),n.addEventListener("touchmove",p,{passive:!1}),n.addEventListener("touchend",w),n.addEventListener("wheel",C,{passive:!1}),n.addEventListener("mousedown",x),n.addEventListener("mousemove",b),n.addEventListener("mouseup",_),n.addEventListener("mouseleave",y),()=>{n.removeEventListener("touchstart",v),n.removeEventListener("touchmove",p),n.removeEventListener("touchend",w),n.removeEventListener("wheel",C),n.removeEventListener("mousedown",x),n.removeEventListener("mousemove",b),n.removeEventListener("mouseup",_),n.removeEventListener("mouseleave",y)}};return(n,o)=>{const i=new Map;return n==null||n.forEach(l=>{let r=l.querySelector(`.${f}-mermaid-action`);r||(l.insertAdjacentHTML("beforeend",`<div class="${f}-mermaid-action">${Qt("pin-off",o.customIcon)}</div>`),r=l.querySelector(`.${f}-mermaid-action`));const s=()=>{const a=i.get(l);if(a!=null&&a.removeEvent)a.removeEvent(),l.removeAttribute("data-grab"),i.set(l,{removeClick:a.removeClick}),r.innerHTML=Qt("pin-off",o.customIcon);else{const c=e(l);l.setAttribute("data-grab",""),i.set(l,{removeEvent:c,removeClick:a==null?void 0:a.removeClick}),r.innerHTML=Qt("pin",o.customIcon)}};r.addEventListener("click",s),i.set(l,{removeClick:()=>r.removeEventListener("click",s)})}),()=>{i.forEach(({removeEvent:l,removeClick:r})=>{l==null||l(),r==null||r()}),i.clear()}}})(),Ti={};function qs(e){let t=Ti[e];if(t)return t;t=Ti[e]=[];for(let n=0;n<128;n++){const o=String.fromCharCode(n);t.push(o)}for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);t[o]="%"+("0"+o.toString(16).toUpperCase()).slice(-2)}return t}function wt(e,t){typeof t!="string"&&(t=wt.defaultChars);const n=qs(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(o){let i="";for(let l=0,r=o.length;l<r;l+=3){const s=parseInt(o.slice(l+1,l+3),16);if(s<128){i+=n[s];continue}if((s&224)===192&&l+3<r){const a=parseInt(o.slice(l+4,l+6),16);if((a&192)===128){const c=s<<6&1984|a&63;c<128?i+="��":i+=String.fromCharCode(c),l+=3;continue}}if((s&240)===224&&l+6<r){const a=parseInt(o.slice(l+4,l+6),16),c=parseInt(o.slice(l+7,l+9),16);if((a&192)===128&&(c&192)===128){const d=s<<12&61440|a<<6&4032|c&63;d<2048||d>=55296&&d<=57343?i+="���":i+=String.fromCharCode(d),l+=6;continue}}if((s&248)===240&&l+9<r){const a=parseInt(o.slice(l+4,l+6),16),c=parseInt(o.slice(l+7,l+9),16),d=parseInt(o.slice(l+10,l+12),16);if((a&192)===128&&(c&192)===128&&(d&192)===128){let u=s<<18&1835008|a<<12&258048|c<<6&4032|d&63;u<65536||u>1114111?i+="����":(u-=65536,i+=String.fromCharCode(55296+(u>>10),56320+(u&1023))),l+=9;continue}}i+="�"}return i})}wt.defaultChars=";/?:@&=+$,#";wt.componentChars="";const Di={};function Gs(e){let t=Di[e];if(t)return t;t=Di[e]=[];for(let n=0;n<128;n++){const o=String.fromCharCode(n);/^[0-9a-z]$/i.test(o)?t.push(o):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Ht(e,t,n){typeof t!="string"&&(n=t,t=Ht.defaultChars),typeof n>"u"&&(n=!0);const o=Gs(t);let i="";for(let l=0,r=e.length;l<r;l++){const s=e.charCodeAt(l);if(n&&s===37&&l+2<r&&/^[0-9a-f]{2}$/i.test(e.slice(l+1,l+3))){i+=e.slice(l,l+3),l+=2;continue}if(s<128){i+=o[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&l+1<r){const a=e.charCodeAt(l+1);if(a>=56320&&a<=57343){i+=encodeURIComponent(e[l]+e[l+1]),l++;continue}}i+="%EF%BF%BD";continue}i+=encodeURIComponent(e[l])}return i}Ht.defaultChars=";/?:@&=+$,-_.!~*'()#";Ht.componentChars="-_.!~*'()";function Qn(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function dn(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Zs=/^([a-z0-9.+-]+:)/i,Xs=/:[0-9]*$/,Ks=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ys=["<",">",'"',"`"," ","\r",`
`,"	"],Js=["{","}","|","\\","^","`"].concat(Ys),Qs=["'"].concat(Js),Si=["%","/","?",";","#"].concat(Qs),$i=["/","?","#"],ea=255,Ii=/^[+a-z0-9A-Z_-]{0,63}$/,ta=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Li={javascript:!0,"javascript:":!0},Mi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function eo(e,t){if(e&&e instanceof dn)return e;const n=new dn;return n.parse(e,t),n}dn.prototype.parse=function(e,t){let n,o,i,l=e;if(l=l.trim(),!t&&e.split("#").length===1){const c=Ks.exec(l);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let r=Zs.exec(l);if(r&&(r=r[0],n=r.toLowerCase(),this.protocol=r,l=l.substr(r.length)),(t||r||l.match(/^\/\/[^@\/]+@[^@\/]+/))&&(i=l.substr(0,2)==="//",i&&!(r&&Li[r])&&(l=l.substr(2),this.slashes=!0)),!Li[r]&&(i||r&&!Mi[r])){let c=-1;for(let p=0;p<$i.length;p++)o=l.indexOf($i[p]),o!==-1&&(c===-1||o<c)&&(c=o);let d,u;c===-1?u=l.lastIndexOf("@"):u=l.lastIndexOf("@",c),u!==-1&&(d=l.slice(0,u),l=l.slice(u+1),this.auth=d),c=-1;for(let p=0;p<Si.length;p++)o=l.indexOf(Si[p]),o!==-1&&(c===-1||o<c)&&(c=o);c===-1&&(c=l.length),l[c-1]===":"&&c--;const m=l.slice(0,c);l=l.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v){const p=this.hostname.split(/\./);for(let w=0,C=p.length;w<C;w++){const x=p[w];if(x&&!x.match(Ii)){let b="";for(let _=0,y=x.length;_<y;_++)x.charCodeAt(_)>127?b+="x":b+=x[_];if(!b.match(Ii)){const _=p.slice(0,w),y=p.slice(w+1),k=x.match(ta);k&&(_.push(k[1]),y.unshift(k[2])),y.length&&(l=y.join(".")+l),this.hostname=_.join(".");break}}}}this.hostname.length>ea&&(this.hostname=""),v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=l.indexOf("#");s!==-1&&(this.hash=l.substr(s),l=l.slice(0,s));const a=l.indexOf("?");return a!==-1&&(this.search=l.substr(a),l=l.slice(0,a)),l&&(this.pathname=l),Mi[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};dn.prototype.parseHost=function(e){let t=Xs.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const na=Object.freeze(Object.defineProperty({__proto__:null,decode:wt,encode:Ht,format:Qn,parse:eo},Symbol.toStringTag,{value:"Module"})),zl=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Rl=/[\0-\x1F\x7F-\x9F]/,oa=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,to=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,Bl=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,Ol=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ia=Object.freeze(Object.defineProperty({__proto__:null,Any:zl,Cc:Rl,Cf:oa,P:to,S:Bl,Z:Ol},Symbol.toStringTag,{value:"Module"}));function la(e){return Object.prototype.toString.call(e)}function no(e){return la(e)==="[object String]"}const ra=Object.prototype.hasOwnProperty;function sa(e,t){return ra.call(e,t)}function _n(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(o){e[o]=n[o]})}}),e}function Pl(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function oo(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function fn(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const Hl=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,aa=/&([a-z#][a-z0-9]{1,31});/gi,ca=new RegExp(Hl.source+"|"+aa.source,"gi"),ua=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function da(e,t){if(t.charCodeAt(0)===35&&ua.test(t)){const o=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return oo(o)?fn(o):e}const n=_l(e);return n!==e?n:e}function fa(e){return e.indexOf("\\")<0?e:e.replace(Hl,"$1")}function At(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(ca,function(t,n,o){return n||da(t,o)})}const ha=/[&<>"]/,ma=/[&<>"]/g,pa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function ga(e){return pa[e]}function nt(e){return ha.test(e)?e.replace(ma,ga):e}const va=/[.?*+^$[\]\\(){}|-]/g;function ba(e){return e.replace(va,"\\$&")}function G(e){switch(e){case 9:case 32:return!0}return!1}function Mt(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function zt(e){return to.test(e)||Bl.test(e)}function Rt(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function kn(e){return e=e.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}const _a={mdurl:na,ucmicro:ia},ka=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:Pl,assign:_n,escapeHtml:nt,escapeRE:ba,fromCodePoint:fn,has:sa,isMdAsciiPunct:Rt,isPunctChar:zt,isSpace:G,isString:no,isValidEntityCode:oo,isWhiteSpace:Mt,lib:_a,normalizeReference:kn,unescapeAll:At,unescapeMd:fa},Symbol.toStringTag,{value:"Module"}));function ya(e,t,n){let o,i,l,r;const s=e.posMax,a=e.pos;for(e.pos=t+1,o=1;e.pos<s;){if(l=e.src.charCodeAt(e.pos),l===93&&(o--,o===0)){i=!0;break}if(r=e.pos,e.md.inline.skipToken(e),l===91){if(r===e.pos-1)o++;else if(n)return e.pos=a,-1}}let c=-1;return i&&(c=e.pos),e.pos=a,c}function Ca(e,t,n){let o,i=t;const l={ok:!1,pos:0,str:""};if(e.charCodeAt(i)===60){for(i++;i<n;){if(o=e.charCodeAt(i),o===10||o===60)return l;if(o===62)return l.pos=i+1,l.str=At(e.slice(t+1,i)),l.ok=!0,l;if(o===92&&i+1<n){i+=2;continue}i++}return l}let r=0;for(;i<n&&(o=e.charCodeAt(i),!(o===32||o<32||o===127));){if(o===92&&i+1<n){if(e.charCodeAt(i+1)===32)break;i+=2;continue}if(o===40&&(r++,r>32))return l;if(o===41){if(r===0)break;r--}i++}return t===i||r!==0||(l.str=At(e.slice(t,i)),l.pos=i,l.ok=!0),l}function xa(e,t,n,o){let i,l=t;const r={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(o)r.str=o.str,r.marker=o.marker;else{if(l>=n)return r;let s=e.charCodeAt(l);if(s!==34&&s!==39&&s!==40)return r;t++,l++,s===40&&(s=41),r.marker=s}for(;l<n;){if(i=e.charCodeAt(l),i===r.marker)return r.pos=l+1,r.str+=At(e.slice(t,l)),r.ok=!0,r;if(i===40&&r.marker===41)return r;i===92&&l+1<n&&l++,l++}return r.can_continue=!0,r.str+=At(e.slice(t,l)),r}const wa=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Ca,parseLinkLabel:ya,parseLinkTitle:xa},Symbol.toStringTag,{value:"Module"})),Ue={};Ue.code_inline=function(e,t,n,o,i){const l=e[t];return"<code"+i.renderAttrs(l)+">"+nt(l.content)+"</code>"};Ue.code_block=function(e,t,n,o,i){const l=e[t];return"<pre"+i.renderAttrs(l)+"><code>"+nt(e[t].content)+`</code></pre>
`};Ue.fence=function(e,t,n,o,i){const l=e[t],r=l.info?At(l.info).trim():"";let s="",a="";if(r){const d=r.split(/(\s+)/g);s=d[0],a=d.slice(2).join("")}let c;if(n.highlight?c=n.highlight(l.content,s,a)||nt(l.content):c=nt(l.content),c.indexOf("<pre")===0)return c+`
`;if(r){const d=l.attrIndex("class"),u=l.attrs?l.attrs.slice():[];d<0?u.push(["class",n.langPrefix+s]):(u[d]=u[d].slice(),u[d][1]+=" "+n.langPrefix+s);const m={attrs:u};return`<pre><code${i.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${i.renderAttrs(l)}>${c}</code></pre>
`};Ue.image=function(e,t,n,o,i){const l=e[t];return l.attrs[l.attrIndex("alt")][1]=i.renderInlineAsText(l.children,n,o),i.renderToken(e,t,n)};Ue.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Ue.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Ue.text=function(e,t){return nt(e[t].content)};Ue.html_block=function(e,t){return e[t].content};Ue.html_inline=function(e,t){return e[t].content};function Et(){this.rules=_n({},Ue)}Et.prototype.renderAttrs=function(t){let n,o,i;if(!t.attrs)return"";for(i="",n=0,o=t.attrs.length;n<o;n++)i+=" "+nt(t.attrs[n][0])+'="'+nt(t.attrs[n][1])+'"';return i};Et.prototype.renderToken=function(t,n,o){const i=t[n];let l="";if(i.hidden)return"";i.block&&i.nesting!==-1&&n&&t[n-1].hidden&&(l+=`
`),l+=(i.nesting===-1?"</":"<")+i.tag,l+=this.renderAttrs(i),i.nesting===0&&o.xhtmlOut&&(l+=" /");let r=!1;if(i.block&&(r=!0,i.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===i.tag)&&(r=!1)}return l+=r?`>
`:">",l};Et.prototype.renderInline=function(e,t,n){let o="";const i=this.rules;for(let l=0,r=e.length;l<r;l++){const s=e[l].type;typeof i[s]<"u"?o+=i[s](e,l,t,n,this):o+=this.renderToken(e,l,t)}return o};Et.prototype.renderInlineAsText=function(e,t,n){let o="";for(let i=0,l=e.length;i<l;i++)switch(e[i].type){case"text":o+=e[i].content;break;case"image":o+=this.renderInlineAsText(e[i].children,t,n);break;case"html_inline":case"html_block":o+=e[i].content;break;case"softbreak":case"hardbreak":o+=`
`;break}return o};Et.prototype.render=function(e,t,n){let o="";const i=this.rules;for(let l=0,r=e.length;l<r;l++){const s=e[l].type;s==="inline"?o+=this.renderInline(e[l].children,t,n):typeof i[s]<"u"?o+=i[s](e,l,t,n,this):o+=this.renderToken(e,l,t,n)}return o};function Ce(){this.__rules__=[],this.__cache__=null}Ce.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ce.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(o){t.indexOf(o)<0&&t.push(o)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(o){o.enabled&&(n&&o.alt.indexOf(n)<0||e.__cache__[n].push(o.fn))})})};Ce.prototype.at=function(e,t,n){const o=this.__find__(e),i=n||{};if(o===-1)throw new Error("Parser rule not found: "+e);this.__rules__[o].fn=t,this.__rules__[o].alt=i.alt||[],this.__cache__=null};Ce.prototype.before=function(e,t,n,o){const i=this.__find__(e),l=o||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:l.alt||[]}),this.__cache__=null};Ce.prototype.after=function(e,t,n,o){const i=this.__find__(e),l=o||{};if(i===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:l.alt||[]}),this.__cache__=null};Ce.prototype.push=function(e,t,n){const o=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:o.alt||[]}),this.__cache__=null};Ce.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(o){const i=this.__find__(o);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+o)}this.__rules__[i].enabled=!0,n.push(o)},this),this.__cache__=null,n};Ce.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ce.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(o){const i=this.__find__(o);if(i<0){if(t)return;throw new Error("Rules manager: invalid rule name "+o)}this.__rules__[i].enabled=!1,n.push(o)},this),this.__cache__=null,n};Ce.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function We(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}We.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let o=0,i=n.length;o<i;o++)if(n[o][0]===t)return o;return-1};We.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};We.prototype.attrSet=function(t,n){const o=this.attrIndex(t),i=[t,n];o<0?this.attrPush(i):this.attrs[o]=i};We.prototype.attrGet=function(t){const n=this.attrIndex(t);let o=null;return n>=0&&(o=this.attrs[n][1]),o};We.prototype.attrJoin=function(t,n){const o=this.attrIndex(t);o<0?this.attrPush([t,n]):this.attrs[o][1]=this.attrs[o][1]+" "+n};function Nl(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}Nl.prototype.Token=We;const Aa=/\r\n?|\n/g,Ea=/\0/g;function Fa(e){let t;t=e.src.replace(Aa,`
`),t=t.replace(Ea,"�"),e.src=t}function Ta(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Da(e){const t=e.tokens;for(let n=0,o=t.length;n<o;n++){const i=t[n];i.type==="inline"&&e.md.inline.parse(i.content,e.md,e.env,i.children)}}function Sa(e){return/^<a[>\s]/i.test(e)}function $a(e){return/^<\/a\s*>/i.test(e)}function Ia(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,o=t.length;n<o;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let i=t[n].children,l=0;for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.type==="link_close"){for(r--;i[r].level!==s.level&&i[r].type!=="link_open";)r--;continue}if(s.type==="html_inline"&&(Sa(s.content)&&l>0&&l--,$a(s.content)&&l++),!(l>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const a=s.content;let c=e.md.linkify.match(a);const d=[];let u=s.level,m=0;c.length>0&&c[0].index===0&&r>0&&i[r-1].type==="text_special"&&(c=c.slice(1));for(let v=0;v<c.length;v++){const p=c[v].url,w=e.md.normalizeLink(p);if(!e.md.validateLink(w))continue;let C=c[v].text;c[v].schema?c[v].schema==="mailto:"&&!/^mailto:/i.test(C)?C=e.md.normalizeLinkText("mailto:"+C).replace(/^mailto:/,""):C=e.md.normalizeLinkText(C):C=e.md.normalizeLinkText("http://"+C).replace(/^http:\/\//,"");const x=c[v].index;if(x>m){const k=new e.Token("text","",0);k.content=a.slice(m,x),k.level=u,d.push(k)}const b=new e.Token("link_open","a",1);b.attrs=[["href",w]],b.level=u++,b.markup="linkify",b.info="auto",d.push(b);const _=new e.Token("text","",0);_.content=C,_.level=u,d.push(_);const y=new e.Token("link_close","a",-1);y.level=--u,y.markup="linkify",y.info="auto",d.push(y),m=c[v].lastIndex}if(m<a.length){const v=new e.Token("text","",0);v.content=a.slice(m),v.level=u,d.push(v)}t[n].children=i=Pl(i,r,d)}}}}const jl=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,La=/\((c|tm|r)\)/i,Ma=/\((c|tm|r)\)/ig,za={c:"©",r:"®",tm:"™"};function Ra(e,t){return za[t.toLowerCase()]}function Ba(e){let t=0;for(let n=e.length-1;n>=0;n--){const o=e[n];o.type==="text"&&!t&&(o.content=o.content.replace(Ma,Ra)),o.type==="link_open"&&o.info==="auto"&&t--,o.type==="link_close"&&o.info==="auto"&&t++}}function Oa(e){let t=0;for(let n=e.length-1;n>=0;n--){const o=e[n];o.type==="text"&&!t&&jl.test(o.content)&&(o.content=o.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),o.type==="link_open"&&o.info==="auto"&&t--,o.type==="link_close"&&o.info==="auto"&&t++}}function Pa(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(La.test(e.tokens[t].content)&&Ba(e.tokens[t].children),jl.test(e.tokens[t].content)&&Oa(e.tokens[t].children))}const Ha=/['"]/,zi=/['"]/g,Ri="’";function Ut(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Na(e,t){let n;const o=[];for(let i=0;i<e.length;i++){const l=e[i],r=e[i].level;for(n=o.length-1;n>=0&&!(o[n].level<=r);n--);if(o.length=n+1,l.type!=="text")continue;let s=l.content,a=0,c=s.length;e:for(;a<c;){zi.lastIndex=a;const d=zi.exec(s);if(!d)break;let u=!0,m=!0;a=d.index+1;const v=d[0]==="'";let p=32;if(d.index-1>=0)p=s.charCodeAt(d.index-1);else for(n=i-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){p=e[n].content.charCodeAt(e[n].content.length-1);break}let w=32;if(a<c)w=s.charCodeAt(a);else for(n=i+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){w=e[n].content.charCodeAt(0);break}const C=Rt(p)||zt(String.fromCharCode(p)),x=Rt(w)||zt(String.fromCharCode(w)),b=Mt(p),_=Mt(w);if(_?u=!1:x&&(b||C||(u=!1)),b?m=!1:C&&(_||x||(m=!1)),w===34&&d[0]==='"'&&p>=48&&p<=57&&(m=u=!1),u&&m&&(u=C,m=x),!u&&!m){v&&(l.content=Ut(l.content,d.index,Ri));continue}if(m)for(n=o.length-1;n>=0;n--){let y=o[n];if(o[n].level<r)break;if(y.single===v&&o[n].level===r){y=o[n];let k,A;v?(k=t.md.options.quotes[2],A=t.md.options.quotes[3]):(k=t.md.options.quotes[0],A=t.md.options.quotes[1]),l.content=Ut(l.content,d.index,A),e[y.token].content=Ut(e[y.token].content,y.pos,k),a+=A.length-1,y.token===i&&(a+=k.length-1),s=l.content,c=s.length,o.length=n;continue e}}u?o.push({token:i,pos:d.index,single:v,level:r}):m&&v&&(l.content=Ut(l.content,d.index,Ri))}}}function ja(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Ha.test(e.tokens[t].content)||Na(e.tokens[t].children,e)}function Va(e){let t,n;const o=e.tokens,i=o.length;for(let l=0;l<i;l++){if(o[l].type!=="inline")continue;const r=o[l].children,s=r.length;for(t=0;t<s;t++)r[t].type==="text_special"&&(r[t].type="text");for(t=n=0;t<s;t++)r[t].type==="text"&&t+1<s&&r[t+1].type==="text"?r[t+1].content=r[t].content+r[t+1].content:(t!==n&&(r[n]=r[t]),n++);t!==n&&(r.length=n)}}const Tn=[["normalize",Fa],["block",Ta],["inline",Da],["linkify",Ia],["replacements",Pa],["smartquotes",ja],["text_join",Va]];function io(){this.ruler=new Ce;for(let e=0;e<Tn.length;e++)this.ruler.push(Tn[e][0],Tn[e][1])}io.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,o=t.length;n<o;n++)t[n](e)};io.prototype.State=Nl;function qe(e,t,n,o){this.src=e,this.md=t,this.env=n,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const i=this.src;for(let l=0,r=0,s=0,a=0,c=i.length,d=!1;r<c;r++){const u=i.charCodeAt(r);if(!d)if(G(u)){s++,u===9?a+=4-a%4:a++;continue}else d=!0;(u===10||r===c-1)&&(u!==10&&r++,this.bMarks.push(l),this.eMarks.push(r),this.tShift.push(s),this.sCount.push(a),this.bsCount.push(0),d=!1,s=0,a=0,l=r+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}qe.prototype.push=function(e,t,n){const o=new We(e,t,n);return o.block=!0,n<0&&this.level--,o.level=this.level,n>0&&this.level++,this.tokens.push(o),o};qe.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};qe.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};qe.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const o=this.src.charCodeAt(t);if(!G(o))break}return t};qe.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!G(this.src.charCodeAt(--t)))return t+1;return t};qe.prototype.skipChars=function(t,n){for(let o=this.src.length;t<o&&this.src.charCodeAt(t)===n;t++);return t};qe.prototype.skipCharsBack=function(t,n,o){if(t<=o)return t;for(;t>o;)if(n!==this.src.charCodeAt(--t))return t+1;return t};qe.prototype.getLines=function(t,n,o,i){if(t>=n)return"";const l=new Array(n-t);for(let r=0,s=t;s<n;s++,r++){let a=0;const c=this.bMarks[s];let d=c,u;for(s+1<n||i?u=this.eMarks[s]+1:u=this.eMarks[s];d<u&&a<o;){const m=this.src.charCodeAt(d);if(G(m))m===9?a+=4-(a+this.bsCount[s])%4:a++;else if(d-c<this.tShift[s])a++;else break;d++}a>o?l[r]=new Array(a-o+1).join(" ")+this.src.slice(d,u):l[r]=this.src.slice(d,u)}return l.join("")};qe.prototype.Token=We;const Wa=65536;function Dn(e,t){const n=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];return e.src.slice(n,o)}function Bi(e){const t=[],n=e.length;let o=0,i=e.charCodeAt(o),l=!1,r=0,s="";for(;o<n;)i===124&&(l?(s+=e.substring(r,o-1),r=o):(t.push(s+e.substring(r,o)),s="",r=o+1)),l=i===92,o++,i=e.charCodeAt(o);return t.push(s+e.substring(r)),t}function Ua(e,t,n,o){if(t+2>n)return!1;let i=t+1;if(e.sCount[i]<e.blkIndent||e.sCount[i]-e.blkIndent>=4)return!1;let l=e.bMarks[i]+e.tShift[i];if(l>=e.eMarks[i])return!1;const r=e.src.charCodeAt(l++);if(r!==124&&r!==45&&r!==58||l>=e.eMarks[i])return!1;const s=e.src.charCodeAt(l++);if(s!==124&&s!==45&&s!==58&&!G(s)||r===45&&G(s))return!1;for(;l<e.eMarks[i];){const y=e.src.charCodeAt(l);if(y!==124&&y!==45&&y!==58&&!G(y))return!1;l++}let a=Dn(e,t+1),c=a.split("|");const d=[];for(let y=0;y<c.length;y++){const k=c[y].trim();if(!k){if(y===0||y===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(a=Dn(e,t).trim(),a.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Bi(a),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const u=c.length;if(u===0||u!==d.length)return!1;if(o)return!0;const m=e.parentType;e.parentType="table";const v=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),w=[t,0];p.map=w;const C=e.push("thead_open","thead",1);C.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let y=0;y<c.length;y++){const k=e.push("th_open","th",1);d[y]&&(k.attrs=[["style","text-align:"+d[y]]]);const A=e.push("inline","",0);A.content=c[y].trim(),A.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let b,_=0;for(i=t+2;i<n&&!(e.sCount[i]<e.blkIndent);i++){let y=!1;for(let A=0,$=v.length;A<$;A++)if(v[A](e,i,n,!0)){y=!0;break}if(y||(a=Dn(e,i).trim(),!a)||e.sCount[i]-e.blkIndent>=4||(c=Bi(a),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),_+=u-c.length,_>Wa))break;if(i===t+2){const A=e.push("tbody_open","tbody",1);A.map=b=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[i,i+1];for(let A=0;A<u;A++){const $=e.push("td_open","td",1);d[A]&&($.attrs=[["style","text-align:"+d[A]]]);const D=e.push("inline","",0);D.content=c[A]?c[A].trim():"",D.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return b&&(e.push("tbody_close","tbody",-1),b[1]=i),e.push("table_close","table",-1),w[1]=i,e.parentType=m,e.line=i,!0}function qa(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let o=t+1,i=o;for(;o<n;){if(e.isEmpty(o)){o++;continue}if(e.sCount[o]-e.blkIndent>=4){o++,i=o;continue}break}e.line=i;const l=e.push("code_block","code",0);return l.content=e.getLines(t,i,4+e.blkIndent,!1)+`
`,l.map=[t,e.line],!0}function Ga(e,t,n,o){let i=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||i+3>l)return!1;const r=e.src.charCodeAt(i);if(r!==126&&r!==96)return!1;let s=i;i=e.skipChars(i,r);let a=i-s;if(a<3)return!1;const c=e.src.slice(s,i),d=e.src.slice(i,l);if(r===96&&d.indexOf(String.fromCharCode(r))>=0)return!1;if(o)return!0;let u=t,m=!1;for(;u++,!(u>=n||(i=s=e.bMarks[u]+e.tShift[u],l=e.eMarks[u],i<l&&e.sCount[u]<e.blkIndent));)if(e.src.charCodeAt(i)===r&&!(e.sCount[u]-e.blkIndent>=4)&&(i=e.skipChars(i,r),!(i-s<a)&&(i=e.skipSpaces(i),!(i<l)))){m=!0;break}a=e.sCount[t],e.line=u+(m?1:0);const v=e.push("fence","code",0);return v.info=d,v.content=e.getLines(t+1,u,a,!0),v.markup=c,v.map=[t,e.line],!0}function Za(e,t,n,o){let i=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];const r=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==62)return!1;if(o)return!0;const s=[],a=[],c=[],d=[],u=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let v=!1,p;for(p=t;p<n;p++){const _=e.sCount[p]<e.blkIndent;if(i=e.bMarks[p]+e.tShift[p],l=e.eMarks[p],i>=l)break;if(e.src.charCodeAt(i++)===62&&!_){let k=e.sCount[p]+1,A,$;e.src.charCodeAt(i)===32?(i++,k++,$=!1,A=!0):e.src.charCodeAt(i)===9?(A=!0,(e.bsCount[p]+k)%4===3?(i++,k++,$=!1):$=!0):A=!1;let D=k;for(s.push(e.bMarks[p]),e.bMarks[p]=i;i<l;){const S=e.src.charCodeAt(i);if(G(S))S===9?D+=4-(D+e.bsCount[p]+($?1:0))%4:D++;else break;i++}v=i>=l,a.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(A?1:0),c.push(e.sCount[p]),e.sCount[p]=D-k,d.push(e.tShift[p]),e.tShift[p]=i-e.bMarks[p];continue}if(v)break;let y=!1;for(let k=0,A=u.length;k<A;k++)if(u[k](e,p,n,!0)){y=!0;break}if(y){e.lineMax=p,e.blkIndent!==0&&(s.push(e.bMarks[p]),a.push(e.bsCount[p]),d.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}s.push(e.bMarks[p]),a.push(e.bsCount[p]),d.push(e.tShift[p]),c.push(e.sCount[p]),e.sCount[p]=-1}const w=e.blkIndent;e.blkIndent=0;const C=e.push("blockquote_open","blockquote",1);C.markup=">";const x=[t,0];C.map=x,e.md.block.tokenize(e,t,p);const b=e.push("blockquote_close","blockquote",-1);b.markup=">",e.lineMax=r,e.parentType=m,x[1]=e.line;for(let _=0;_<d.length;_++)e.bMarks[_+t]=s[_],e.tShift[_+t]=d[_],e.sCount[_+t]=c[_],e.bsCount[_+t]=a[_];return e.blkIndent=w,!0}function Xa(e,t,n,o){const i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let l=e.bMarks[t]+e.tShift[t];const r=e.src.charCodeAt(l++);if(r!==42&&r!==45&&r!==95)return!1;let s=1;for(;l<i;){const c=e.src.charCodeAt(l++);if(c!==r&&!G(c))return!1;c===r&&s++}if(s<3)return!1;if(o)return!0;e.line=t+1;const a=e.push("hr","hr",0);return a.map=[t,e.line],a.markup=Array(s+1).join(String.fromCharCode(r)),!0}function Oi(e,t){const n=e.eMarks[t];let o=e.bMarks[t]+e.tShift[t];const i=e.src.charCodeAt(o++);if(i!==42&&i!==45&&i!==43)return-1;if(o<n){const l=e.src.charCodeAt(o);if(!G(l))return-1}return o}function Pi(e,t){const n=e.bMarks[t]+e.tShift[t],o=e.eMarks[t];let i=n;if(i+1>=o)return-1;let l=e.src.charCodeAt(i++);if(l<48||l>57)return-1;for(;;){if(i>=o)return-1;if(l=e.src.charCodeAt(i++),l>=48&&l<=57){if(i-n>=10)return-1;continue}if(l===41||l===46)break;return-1}return i<o&&(l=e.src.charCodeAt(i),!G(l))?-1:i}function Ka(e,t){const n=e.level+2;for(let o=t+2,i=e.tokens.length-2;o<i;o++)e.tokens[o].level===n&&e.tokens[o].type==="paragraph_open"&&(e.tokens[o+2].hidden=!0,e.tokens[o].hidden=!0,o+=2)}function Ya(e,t,n,o){let i,l,r,s,a=t,c=!0;if(e.sCount[a]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[a]-e.listIndent>=4&&e.sCount[a]<e.blkIndent)return!1;let d=!1;o&&e.parentType==="paragraph"&&e.sCount[a]>=e.blkIndent&&(d=!0);let u,m,v;if((v=Pi(e,a))>=0){if(u=!0,r=e.bMarks[a]+e.tShift[a],m=Number(e.src.slice(r,v-1)),d&&m!==1)return!1}else if((v=Oi(e,a))>=0)u=!1;else return!1;if(d&&e.skipSpaces(v)>=e.eMarks[a])return!1;if(o)return!0;const p=e.src.charCodeAt(v-1),w=e.tokens.length;u?(s=e.push("ordered_list_open","ol",1),m!==1&&(s.attrs=[["start",m]])):s=e.push("bullet_list_open","ul",1);const C=[a,0];s.map=C,s.markup=String.fromCharCode(p);let x=!1;const b=e.md.block.ruler.getRules("list"),_=e.parentType;for(e.parentType="list";a<n;){l=v,i=e.eMarks[a];const y=e.sCount[a]+v-(e.bMarks[a]+e.tShift[a]);let k=y;for(;l<i;){const U=e.src.charCodeAt(l);if(U===9)k+=4-(k+e.bsCount[a])%4;else if(U===32)k++;else break;l++}const A=l;let $;A>=i?$=1:$=k-y,$>4&&($=1);const D=y+$;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(p);const S=[a,0];s.map=S,u&&(s.info=e.src.slice(r,v-1));const L=e.tight,H=e.tShift[a],z=e.sCount[a],N=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=D,e.tight=!0,e.tShift[a]=A-e.bMarks[a],e.sCount[a]=k,A>=i&&e.isEmpty(a+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,a,n,!0),(!e.tight||x)&&(c=!1),x=e.line-a>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=N,e.tShift[a]=H,e.sCount[a]=z,e.tight=L,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(p),a=e.line,S[1]=a,a>=n||e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)break;let te=!1;for(let U=0,se=b.length;U<se;U++)if(b[U](e,a,n,!0)){te=!0;break}if(te)break;if(u){if(v=Pi(e,a),v<0)break;r=e.bMarks[a]+e.tShift[a]}else if(v=Oi(e,a),v<0)break;if(p!==e.src.charCodeAt(v-1))break}return u?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(p),C[1]=a,e.line=a,e.parentType=_,c&&Ka(e,w),!0}function Ja(e,t,n,o){let i=e.bMarks[t]+e.tShift[t],l=e.eMarks[t],r=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(i)!==91)return!1;function s(b){const _=e.lineMax;if(b>=_||e.isEmpty(b))return null;let y=!1;if(e.sCount[b]-e.blkIndent>3&&(y=!0),e.sCount[b]<0&&(y=!0),!y){const $=e.md.block.ruler.getRules("reference"),D=e.parentType;e.parentType="reference";let S=!1;for(let L=0,H=$.length;L<H;L++)if($[L](e,b,_,!0)){S=!0;break}if(e.parentType=D,S)return null}const k=e.bMarks[b]+e.tShift[b],A=e.eMarks[b];return e.src.slice(k,A+1)}let a=e.src.slice(i,l+1);l=a.length;let c=-1;for(i=1;i<l;i++){const b=a.charCodeAt(i);if(b===91)return!1;if(b===93){c=i;break}else if(b===10){const _=s(r);_!==null&&(a+=_,l=a.length,r++)}else if(b===92&&(i++,i<l&&a.charCodeAt(i)===10)){const _=s(r);_!==null&&(a+=_,l=a.length,r++)}}if(c<0||a.charCodeAt(c+1)!==58)return!1;for(i=c+2;i<l;i++){const b=a.charCodeAt(i);if(b===10){const _=s(r);_!==null&&(a+=_,l=a.length,r++)}else if(!G(b))break}const d=e.md.helpers.parseLinkDestination(a,i,l);if(!d.ok)return!1;const u=e.md.normalizeLink(d.str);if(!e.md.validateLink(u))return!1;i=d.pos;const m=i,v=r,p=i;for(;i<l;i++){const b=a.charCodeAt(i);if(b===10){const _=s(r);_!==null&&(a+=_,l=a.length,r++)}else if(!G(b))break}let w=e.md.helpers.parseLinkTitle(a,i,l);for(;w.can_continue;){const b=s(r);if(b===null)break;a+=b,i=l,l=a.length,r++,w=e.md.helpers.parseLinkTitle(a,i,l,w)}let C;for(i<l&&p!==i&&w.ok?(C=w.str,i=w.pos):(C="",i=m,r=v);i<l;){const b=a.charCodeAt(i);if(!G(b))break;i++}if(i<l&&a.charCodeAt(i)!==10&&C)for(C="",i=m,r=v;i<l;){const b=a.charCodeAt(i);if(!G(b))break;i++}if(i<l&&a.charCodeAt(i)!==10)return!1;const x=kn(a.slice(1,c));return x?(o||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:C,href:u}),e.line=r),!0):!1}const Qa=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ec="[a-zA-Z_:][a-zA-Z0-9:._-]*",tc="[^\"'=<>`\\x00-\\x20]+",nc="'[^']*'",oc='"[^"]*"',ic="(?:"+tc+"|"+nc+"|"+oc+")",lc="(?:\\s+"+ec+"(?:\\s*=\\s*"+ic+")?)",Vl="<[A-Za-z][A-Za-z0-9\\-]*"+lc+"*\\s*\\/?>",Wl="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",rc="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",sc="<[?][\\s\\S]*?[?]>",ac="<![A-Za-z][^>]*>",cc="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",uc=new RegExp("^(?:"+Vl+"|"+Wl+"|"+rc+"|"+sc+"|"+ac+"|"+cc+")"),dc=new RegExp("^(?:"+Vl+"|"+Wl+")"),dt=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Qa.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(dc.source+"\\s*$"),/^$/,!1]];function fc(e,t,n,o){let i=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(i)!==60)return!1;let r=e.src.slice(i,l),s=0;for(;s<dt.length&&!dt[s][0].test(r);s++);if(s===dt.length)return!1;if(o)return dt[s][2];let a=t+1;if(!dt[s][1].test(r)){for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(i=e.bMarks[a]+e.tShift[a],l=e.eMarks[a],r=e.src.slice(i,l),dt[s][1].test(r)){r.length!==0&&a++;break}}e.line=a;const c=e.push("html_block","",0);return c.map=[t,a],c.content=e.getLines(t,a,e.blkIndent,!0),!0}function hc(e,t,n,o){let i=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let r=e.src.charCodeAt(i);if(r!==35||i>=l)return!1;let s=1;for(r=e.src.charCodeAt(++i);r===35&&i<l&&s<=6;)s++,r=e.src.charCodeAt(++i);if(s>6||i<l&&!G(r))return!1;if(o)return!0;l=e.skipSpacesBack(l,i);const a=e.skipCharsBack(l,35,i);a>i&&G(e.src.charCodeAt(a-1))&&(l=a),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(i,l).trim(),d.map=[t,e.line],d.children=[];const u=e.push("heading_close","h"+String(s),-1);return u.markup="########".slice(0,s),!0}function mc(e,t,n){const o=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const i=e.parentType;e.parentType="paragraph";let l=0,r,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let v=e.bMarks[s]+e.tShift[s];const p=e.eMarks[s];if(v<p&&(r=e.src.charCodeAt(v),(r===45||r===61)&&(v=e.skipChars(v,r),v=e.skipSpaces(v),v>=p))){l=r===61?1:2;break}}if(e.sCount[s]<0)continue;let m=!1;for(let v=0,p=o.length;v<p;v++)if(o[v](e,s,n,!0)){m=!0;break}if(m)break}if(!l)return!1;const a=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(l),1);c.markup=String.fromCharCode(r),c.map=[t,e.line];const d=e.push("inline","",0);d.content=a,d.map=[t,e.line-1],d.children=[];const u=e.push("heading_close","h"+String(l),-1);return u.markup=String.fromCharCode(r),e.parentType=i,!0}function pc(e,t,n){const o=e.md.block.ruler.getRules("paragraph"),i=e.parentType;let l=t+1;for(e.parentType="paragraph";l<n&&!e.isEmpty(l);l++){if(e.sCount[l]-e.blkIndent>3||e.sCount[l]<0)continue;let c=!1;for(let d=0,u=o.length;d<u;d++)if(o[d](e,l,n,!0)){c=!0;break}if(c)break}const r=e.getLines(t,l,e.blkIndent,!1).trim();e.line=l;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const a=e.push("inline","",0);return a.content=r,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=i,!0}const qt=[["table",Ua,["paragraph","reference"]],["code",qa],["fence",Ga,["paragraph","reference","blockquote","list"]],["blockquote",Za,["paragraph","reference","blockquote","list"]],["hr",Xa,["paragraph","reference","blockquote","list"]],["list",Ya,["paragraph","reference","blockquote"]],["reference",Ja],["html_block",fc,["paragraph","reference","blockquote"]],["heading",hc,["paragraph","reference","blockquote"]],["lheading",mc],["paragraph",pc]];function yn(){this.ruler=new Ce;for(let e=0;e<qt.length;e++)this.ruler.push(qt[e][0],qt[e][1],{alt:(qt[e][2]||[]).slice()})}yn.prototype.tokenize=function(e,t,n){const o=this.ruler.getRules(""),i=o.length,l=e.md.options.maxNesting;let r=t,s=!1;for(;r<n&&(e.line=r=e.skipEmptyLines(r),!(r>=n||e.sCount[r]<e.blkIndent));){if(e.level>=l){e.line=n;break}const a=e.line;let c=!1;for(let d=0;d<i;d++)if(c=o[d](e,r,n,!1),c){if(a>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),r=e.line,r<n&&e.isEmpty(r)&&(s=!0,r++,e.line=r)}};yn.prototype.parse=function(e,t,n,o){if(!e)return;const i=new this.State(e,t,n,o);this.tokenize(i,i.line,i.lineMax)};yn.prototype.State=qe;function Nt(e,t,n,o){this.src=e,this.env=n,this.md=t,this.tokens=o,this.tokens_meta=Array(o.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Nt.prototype.pushPending=function(){const e=new We("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Nt.prototype.push=function(e,t,n){this.pending&&this.pushPending();const o=new We(e,t,n);let i=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),o.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(o),this.tokens_meta.push(i),o};Nt.prototype.scanDelims=function(e,t){const n=this.posMax,o=this.src.charCodeAt(e),i=e>0?this.src.charCodeAt(e-1):32;let l=e;for(;l<n&&this.src.charCodeAt(l)===o;)l++;const r=l-e,s=l<n?this.src.charCodeAt(l):32,a=Rt(i)||zt(String.fromCharCode(i)),c=Rt(s)||zt(String.fromCharCode(s)),d=Mt(i),u=Mt(s),m=!u&&(!c||d||a),v=!d&&(!a||u||c);return{can_open:m&&(t||!v||a),can_close:v&&(t||!m||c),length:r}};Nt.prototype.Token=We;function gc(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function vc(e,t){let n=e.pos;for(;n<e.posMax&&!gc(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const bc=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function _c(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,o=e.posMax;if(n+3>o||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const i=e.pending.match(bc);if(!i)return!1;const l=i[1],r=e.md.linkify.matchAtStart(e.src.slice(n-l.length));if(!r)return!1;let s=r.url;if(s.length<=l.length)return!1;s=s.replace(/\*+$/,"");const a=e.md.normalizeLink(s);if(!e.md.validateLink(a))return!1;if(!t){e.pending=e.pending.slice(0,-l.length);const c=e.push("link_open","a",1);c.attrs=[["href",a]],c.markup="linkify",c.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(s);const u=e.push("link_close","a",-1);u.markup="linkify",u.info="auto"}return e.pos+=s.length-l.length,!0}function kc(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const o=e.pending.length-1,i=e.posMax;if(!t)if(o>=0&&e.pending.charCodeAt(o)===32)if(o>=1&&e.pending.charCodeAt(o-1)===32){let l=o-1;for(;l>=1&&e.pending.charCodeAt(l-1)===32;)l--;e.pending=e.pending.slice(0,l),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<i&&G(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const lo=[];for(let e=0;e<256;e++)lo.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){lo[e.charCodeAt(0)]=1});function yc(e,t){let n=e.pos;const o=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=o))return!1;let i=e.src.charCodeAt(n);if(i===10){for(t||e.push("hardbreak","br",0),n++;n<o&&(i=e.src.charCodeAt(n),!!G(i));)n++;return e.pos=n,!0}let l=e.src[n];if(i>=55296&&i<=56319&&n+1<o){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(l+=e.src[n+1],n++)}const r="\\"+l;if(!t){const s=e.push("text_special","",0);i<256&&lo[i]!==0?s.content=l:s.content=r,s.markup=r,s.info="escape"}return e.pos=n+1,!0}function Cc(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const i=n;n++;const l=e.posMax;for(;n<l&&e.src.charCodeAt(n)===96;)n++;const r=e.src.slice(i,n),s=r.length;if(e.backticksScanned&&(e.backticks[s]||0)<=i)return t||(e.pending+=r),e.pos+=s,!0;let a=n,c;for(;(c=e.src.indexOf("`",a))!==-1;){for(a=c+1;a<l&&e.src.charCodeAt(a)===96;)a++;const d=a-c;if(d===s){if(!t){const u=e.push("code_inline","code",0);u.markup=r,u.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[d]=c}return e.backticksScanned=!0,t||(e.pending+=r),e.pos+=s,!0}function xc(e,t){const n=e.pos,o=e.src.charCodeAt(n);if(t||o!==126)return!1;const i=e.scanDelims(e.pos,!0);let l=i.length;const r=String.fromCharCode(o);if(l<2)return!1;let s;l%2&&(s=e.push("text","",0),s.content=r,l--);for(let a=0;a<l;a+=2)s=e.push("text","",0),s.content=r+r,e.delimiters.push({marker:o,length:0,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0}function Hi(e,t){let n;const o=[],i=t.length;for(let l=0;l<i;l++){const r=t[l];if(r.marker!==126||r.end===-1)continue;const s=t[r.end];n=e.tokens[r.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&o.push(s.token-1)}for(;o.length;){const l=o.pop();let r=l+1;for(;r<e.tokens.length&&e.tokens[r].type==="s_close";)r++;r--,l!==r&&(n=e.tokens[r],e.tokens[r]=e.tokens[l],e.tokens[l]=n)}}function wc(e){const t=e.tokens_meta,n=e.tokens_meta.length;Hi(e,e.delimiters);for(let o=0;o<n;o++)t[o]&&t[o].delimiters&&Hi(e,t[o].delimiters)}const Ul={tokenize:xc,postProcess:wc};function Ac(e,t){const n=e.pos,o=e.src.charCodeAt(n);if(t||o!==95&&o!==42)return!1;const i=e.scanDelims(e.pos,o===42);for(let l=0;l<i.length;l++){const r=e.push("text","",0);r.content=String.fromCharCode(o),e.delimiters.push({marker:o,length:i.length,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return e.pos+=i.length,!0}function Ni(e,t){const n=t.length;for(let o=n-1;o>=0;o--){const i=t[o];if(i.marker!==95&&i.marker!==42||i.end===-1)continue;const l=t[i.end],r=o>0&&t[o-1].end===i.end+1&&t[o-1].marker===i.marker&&t[o-1].token===i.token-1&&t[i.end+1].token===l.token+1,s=String.fromCharCode(i.marker),a=e.tokens[i.token];a.type=r?"strong_open":"em_open",a.tag=r?"strong":"em",a.nesting=1,a.markup=r?s+s:s,a.content="";const c=e.tokens[l.token];c.type=r?"strong_close":"em_close",c.tag=r?"strong":"em",c.nesting=-1,c.markup=r?s+s:s,c.content="",r&&(e.tokens[t[o-1].token].content="",e.tokens[t[i.end+1].token].content="",o--)}}function Ec(e){const t=e.tokens_meta,n=e.tokens_meta.length;Ni(e,e.delimiters);for(let o=0;o<n;o++)t[o]&&t[o].delimiters&&Ni(e,t[o].delimiters)}const ql={tokenize:Ac,postProcess:Ec};function Fc(e,t){let n,o,i,l,r="",s="",a=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,u=e.posMax,m=e.pos+1,v=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(v<0)return!1;let p=v+1;if(p<u&&e.src.charCodeAt(p)===40){for(c=!1,p++;p<u&&(n=e.src.charCodeAt(p),!(!G(n)&&n!==10));p++);if(p>=u)return!1;if(a=p,i=e.md.helpers.parseLinkDestination(e.src,p,e.posMax),i.ok){for(r=e.md.normalizeLink(i.str),e.md.validateLink(r)?p=i.pos:r="",a=p;p<u&&(n=e.src.charCodeAt(p),!(!G(n)&&n!==10));p++);if(i=e.md.helpers.parseLinkTitle(e.src,p,e.posMax),p<u&&a!==p&&i.ok)for(s=i.str,p=i.pos;p<u&&(n=e.src.charCodeAt(p),!(!G(n)&&n!==10));p++);}(p>=u||e.src.charCodeAt(p)!==41)&&(c=!0),p++}if(c){if(typeof e.env.references>"u")return!1;if(p<u&&e.src.charCodeAt(p)===91?(a=p+1,p=e.md.helpers.parseLinkLabel(e,p),p>=0?o=e.src.slice(a,p++):p=v+1):p=v+1,o||(o=e.src.slice(m,v)),l=e.env.references[kn(o)],!l)return e.pos=d,!1;r=l.href,s=l.title}if(!t){e.pos=m,e.posMax=v;const w=e.push("link_open","a",1),C=[["href",r]];w.attrs=C,s&&C.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=p,e.posMax=u,!0}function Tc(e,t){let n,o,i,l,r,s,a,c,d="";const u=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const v=e.pos+2,p=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(p<0)return!1;if(l=p+1,l<m&&e.src.charCodeAt(l)===40){for(l++;l<m&&(n=e.src.charCodeAt(l),!(!G(n)&&n!==10));l++);if(l>=m)return!1;for(c=l,s=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),s.ok&&(d=e.md.normalizeLink(s.str),e.md.validateLink(d)?l=s.pos:d=""),c=l;l<m&&(n=e.src.charCodeAt(l),!(!G(n)&&n!==10));l++);if(s=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<m&&c!==l&&s.ok)for(a=s.str,l=s.pos;l<m&&(n=e.src.charCodeAt(l),!(!G(n)&&n!==10));l++);else a="";if(l>=m||e.src.charCodeAt(l)!==41)return e.pos=u,!1;l++}else{if(typeof e.env.references>"u")return!1;if(l<m&&e.src.charCodeAt(l)===91?(c=l+1,l=e.md.helpers.parseLinkLabel(e,l),l>=0?i=e.src.slice(c,l++):l=p+1):l=p+1,i||(i=e.src.slice(v,p)),r=e.env.references[kn(i)],!r)return e.pos=u,!1;d=r.href,a=r.title}if(!t){o=e.src.slice(v,p);const w=[];e.md.inline.parse(o,e.md,e.env,w);const C=e.push("image","img",0),x=[["src",d],["alt",""]];C.attrs=x,C.children=w,C.content=o,a&&x.push(["title",a])}return e.pos=l,e.posMax=m,!0}const Dc=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Sc=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function $c(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const o=e.pos,i=e.posMax;for(;;){if(++n>=i)return!1;const r=e.src.charCodeAt(n);if(r===60)return!1;if(r===62)break}const l=e.src.slice(o+1,n);if(Sc.test(l)){const r=e.md.normalizeLink(l);if(!e.md.validateLink(r))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",r]],s.markup="autolink",s.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(l);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=l.length+2,!0}if(Dc.test(l)){const r=e.md.normalizeLink("mailto:"+l);if(!e.md.validateLink(r))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",r]],s.markup="autolink",s.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(l);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=l.length+2,!0}return!1}function Ic(e){return/^<a[>\s]/i.test(e)}function Lc(e){return/^<\/a\s*>/i.test(e)}function Mc(e){const t=e|32;return t>=97&&t<=122}function zc(e,t){if(!e.md.options.html)return!1;const n=e.posMax,o=e.pos;if(e.src.charCodeAt(o)!==60||o+2>=n)return!1;const i=e.src.charCodeAt(o+1);if(i!==33&&i!==63&&i!==47&&!Mc(i))return!1;const l=e.src.slice(o).match(uc);if(!l)return!1;if(!t){const r=e.push("html_inline","",0);r.content=l[0],Ic(r.content)&&e.linkLevel++,Lc(r.content)&&e.linkLevel--}return e.pos+=l[0].length,!0}const Rc=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Bc=/^&([a-z][a-z0-9]{1,31});/i;function Oc(e,t){const n=e.pos,o=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=o)return!1;if(e.src.charCodeAt(n+1)===35){const l=e.src.slice(n).match(Rc);if(l){if(!t){const r=l[1][0].toLowerCase()==="x"?parseInt(l[1].slice(1),16):parseInt(l[1],10),s=e.push("text_special","",0);s.content=oo(r)?fn(r):fn(65533),s.markup=l[0],s.info="entity"}return e.pos+=l[0].length,!0}}else{const l=e.src.slice(n).match(Bc);if(l){const r=_l(l[0]);if(r!==l[0]){if(!t){const s=e.push("text_special","",0);s.content=r,s.markup=l[0],s.info="entity"}return e.pos+=l[0].length,!0}}}return!1}function ji(e){const t={},n=e.length;if(!n)return;let o=0,i=-2;const l=[];for(let r=0;r<n;r++){const s=e[r];if(l.push(0),(e[o].marker!==s.marker||i!==s.token-1)&&(o=r),i=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[s.marker][(s.open?3:0)+s.length%3];let c=o-l[o]-1,d=c;for(;c>a;c-=l[c]+1){const u=e[c];if(u.marker===s.marker&&u.open&&u.end<0){let m=!1;if((u.close||s.open)&&(u.length+s.length)%3===0&&(u.length%3!==0||s.length%3!==0)&&(m=!0),!m){const v=c>0&&!e[c-1].open?l[c-1]+1:0;l[r]=r-c+v,l[c]=v,s.open=!1,u.end=r,u.close=!1,d=-1,i=-2;break}}}d!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=d)}}function Pc(e){const t=e.tokens_meta,n=e.tokens_meta.length;ji(e.delimiters);for(let o=0;o<n;o++)t[o]&&t[o].delimiters&&ji(t[o].delimiters)}function Hc(e){let t,n,o=0;const i=e.tokens,l=e.tokens.length;for(t=n=0;t<l;t++)i[t].nesting<0&&o--,i[t].level=o,i[t].nesting>0&&o++,i[t].type==="text"&&t+1<l&&i[t+1].type==="text"?i[t+1].content=i[t].content+i[t+1].content:(t!==n&&(i[n]=i[t]),n++);t!==n&&(i.length=n)}const Sn=[["text",vc],["linkify",_c],["newline",kc],["escape",yc],["backticks",Cc],["strikethrough",Ul.tokenize],["emphasis",ql.tokenize],["link",Fc],["image",Tc],["autolink",$c],["html_inline",zc],["entity",Oc]],$n=[["balance_pairs",Pc],["strikethrough",Ul.postProcess],["emphasis",ql.postProcess],["fragments_join",Hc]];function jt(){this.ruler=new Ce;for(let e=0;e<Sn.length;e++)this.ruler.push(Sn[e][0],Sn[e][1]);this.ruler2=new Ce;for(let e=0;e<$n.length;e++)this.ruler2.push($n[e][0],$n[e][1])}jt.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),o=n.length,i=e.md.options.maxNesting,l=e.cache;if(typeof l[t]<"u"){e.pos=l[t];return}let r=!1;if(e.level<i){for(let s=0;s<o;s++)if(e.level++,r=n[s](e,!0),e.level--,r){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;r||e.pos++,l[t]=e.pos};jt.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,o=e.posMax,i=e.md.options.maxNesting;for(;e.pos<o;){const l=e.pos;let r=!1;if(e.level<i){for(let s=0;s<n;s++)if(r=t[s](e,!1),r){if(l>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(r){if(e.pos>=o)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};jt.prototype.parse=function(e,t,n,o){const i=new this.State(e,t,n,o);this.tokenize(i);const l=this.ruler2.getRules(""),r=l.length;for(let s=0;s<r;s++)l[s](i)};jt.prototype.State=Nt;function Nc(e){const t={};e=e||{},t.src_Any=zl.source,t.src_Cc=Rl.source,t.src_Z=Ol.source,t.src_P=to.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Nn(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(o){e[o]=n[o]})}),e}function Cn(e){return Object.prototype.toString.call(e)}function jc(e){return Cn(e)==="[object String]"}function Vc(e){return Cn(e)==="[object Object]"}function Wc(e){return Cn(e)==="[object RegExp]"}function Vi(e){return Cn(e)==="[object Function]"}function Uc(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const Gl={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function qc(e){return Object.keys(e||{}).reduce(function(t,n){return t||Gl.hasOwnProperty(n)},!1)}const Gc={"http:":{validate:function(e,t,n){const o=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(o)?o.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const o=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(o)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:o.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const o=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(o)?o.match(n.re.mailto)[0].length:0}}},Zc="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Xc="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function Kc(e){e.__index__=-1,e.__text_cache__=""}function Yc(e){return function(t,n){const o=t.slice(n);return e.test(o)?o.match(e)[0].length:0}}function Wi(){return function(e,t){t.normalize(e)}}function hn(e){const t=e.re=Nc(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Zc),n.push(t.src_xn),t.src_tlds=n.join("|");function o(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(o(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(o(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(o(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(o(t.tpl_host_fuzzy_test),"i");const i=[];e.__compiled__={};function l(s,a){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+a)}Object.keys(e.__schemas__).forEach(function(s){const a=e.__schemas__[s];if(a===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,Vc(a)){Wc(a.validate)?c.validate=Yc(a.validate):Vi(a.validate)?c.validate=a.validate:l(s,a),Vi(a.normalize)?c.normalize=a.normalize:a.normalize?l(s,a):c.normalize=Wi();return}if(jc(a)){i.push(s);return}l(s,a)}),i.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:Wi()};const r=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(Uc).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+r+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+r+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Kc(e)}function Jc(e,t){const n=e.__index__,o=e.__last_index__,i=e.__text_cache__.slice(n,o);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=o+t,this.raw=i,this.text=i,this.url=i}function jn(e,t){const n=new Jc(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Te(e,t){if(!(this instanceof Te))return new Te(e,t);t||qc(e)&&(t=e,e={}),this.__opts__=Nn({},Gl,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Nn({},Gc,e),this.__compiled__={},this.__tlds__=Xc,this.__tlds_replaced__=!1,this.re={},hn(this)}Te.prototype.add=function(t,n){return this.__schemas__[t]=n,hn(this),this};Te.prototype.set=function(t){return this.__opts__=Nn(this.__opts__,t),this};Te.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,o,i,l,r,s,a,c,d;if(this.re.schema_test.test(t)){for(a=this.re.schema_search,a.lastIndex=0;(n=a.exec(t))!==null;)if(l=this.testSchemaAt(t,n[2],a.lastIndex),l){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+l;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(o=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(r=o.index+o[1].length,(this.__index__<0||r<this.__index__)&&(this.__schema__="",this.__index__=r,this.__last_index__=o.index+o[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(i=t.match(this.re.email_fuzzy))!==null&&(r=i.index+i[1].length,s=i.index+i[0].length,(this.__index__<0||r<this.__index__||r===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=r,this.__last_index__=s))),this.__index__>=0};Te.prototype.pretest=function(t){return this.re.pretest.test(t)};Te.prototype.testSchemaAt=function(t,n,o){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,o,this):0};Te.prototype.match=function(t){const n=[];let o=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(jn(this,o)),o=this.__last_index__);let i=o?t.slice(o):t;for(;this.test(i);)n.push(jn(this,o)),i=i.slice(this.__last_index__),o+=this.__last_index__;return n.length?n:null};Te.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const o=this.testSchemaAt(t,n[2],n[0].length);return o?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+o,jn(this,0)):null};Te.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(o,i,l){return o!==l[i-1]}).reverse(),hn(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,hn(this),this)};Te.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Te.prototype.onCompile=function(){};const Qc={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},eu={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},tu={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},nu={default:Qc,zero:eu,commonmark:tu},ou=/^(vbscript|javascript|file|data):/,iu=/^data:image\/(gif|png|jpeg|webp);/;function lu(e){const t=e.trim().toLowerCase();return ou.test(t)?iu.test(t):!0}const Zl=["http:","https:","mailto:"];function ru(e){const t=eo(e,!0);if(t.hostname&&(!t.protocol||Zl.indexOf(t.protocol)>=0))try{t.hostname=kl.toASCII(t.hostname)}catch{}return Ht(Qn(t))}function su(e){const t=eo(e,!0);if(t.hostname&&(!t.protocol||Zl.indexOf(t.protocol)>=0))try{t.hostname=kl.toUnicode(t.hostname)}catch{}return wt(Qn(t),wt.defaultChars+"%")}function Le(e,t){if(!(this instanceof Le))return new Le(e,t);t||no(e)||(t=e||{},e="default"),this.inline=new jt,this.block=new yn,this.core=new io,this.renderer=new Et,this.linkify=new Te,this.validateLink=lu,this.normalizeLink=ru,this.normalizeLinkText=su,this.utils=ka,this.helpers=_n({},wa),this.options={},this.configure(e),t&&this.set(t)}Le.prototype.set=function(e){return _n(this.options,e),this};Le.prototype.configure=function(e){const t=this;if(no(e)){const n=e;if(e=nu[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Le.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const o=e.filter(function(i){return n.indexOf(i)<0});if(o.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+o);return this};Le.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(i){n=n.concat(this[i].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const o=e.filter(function(i){return n.indexOf(i)<0});if(o.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+o);return this};Le.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Le.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Le.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Le.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Le.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const au=(e,t="image.png")=>{const n=e.split(","),o=n[0].match(/:(.*?);/);if(o){const i=o[1],l=atob(n[1]);let r=l.length;const s=new Uint8Array(r);for(;r--;)s[r]=l.charCodeAt(r);return new File([s],t,{type:i})}return null},cu=(e,t)=>{if(!e)return e;const n=t.split(`
`),o=['<span rn-wrapper aria-hidden="true">'];return n.forEach(()=>{o.push("<span></span>")}),o.push("</span>"),`<span class="${f}-code-block">${e}</span>${o.join("")}`},uu=(e,t)=>{if(!e||!t)return 0;const n=e==null?void 0:e.getBoundingClientRect();if(t===document.documentElement)return n.top-t.clientTop;const o=t==null?void 0:t.getBoundingClientRect();return n.top-o.top},Ui=(()=>{let e=0;return()=>++e})(),ft=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Xl=new Set,Vn=typeof process=="object"&&process?process:{},Kl=(e,t,n,o)=>{typeof Vn.emitWarning=="function"?Vn.emitWarning(e,t,n,o):console.error(`[${n}] ${t}: ${e}`)};let mn=globalThis.AbortController,qi=globalThis.AbortSignal;var pl;if(typeof mn>"u"){qi=class{constructor(){J(this,"onabort");J(this,"_onabort",[]);J(this,"reason");J(this,"aborted",!1)}addEventListener(o,i){this._onabort.push(i)}},mn=class{constructor(){J(this,"signal",new qi);t()}abort(o){var i,l;if(!this.signal.aborted){this.signal.reason=o,this.signal.aborted=!0;for(const r of this.signal._onabort)r(o);(l=(i=this.signal).onabort)==null||l.call(i,o)}}};let e=((pl=Vn.env)==null?void 0:pl.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const t=()=>{e&&(e=!1,Kl("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const du=e=>!Xl.has(e),Ke=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),Yl=e=>Ke(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?en:null:null;class en extends Array{constructor(t){super(t),this.fill(0)}}var _t;const it=class it{constructor(t,n){J(this,"heap");J(this,"length");if(!h(it,_t))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(t),this.length=0}static create(t){const n=Yl(t);if(!n)return[];M(it,_t,!0);const o=new it(t,n);return M(it,_t,!1),o}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}};_t=new WeakMap,j(it,_t,!1);let Wn=it;var gl,vl,Me,xe,ze,lt,Re,kt,yt,re,Be,le,X,P,ve,we,pe,ce,Oe,ue,Pe,He,Ae,Ne,tt,be,Ct,T,qn,rt,Ge,Bt,Ee,Jl,st,xt,Ot,Ye,Je,Gn,tn,nn,Z,Zn,Tt,Qe,Xn;const co=class co{constructor(t){j(this,T);j(this,Me);j(this,xe);j(this,ze);j(this,lt);j(this,Re);j(this,kt);j(this,yt);J(this,"ttl");J(this,"ttlResolution");J(this,"ttlAutopurge");J(this,"updateAgeOnGet");J(this,"updateAgeOnHas");J(this,"allowStale");J(this,"noDisposeOnSet");J(this,"noUpdateTTL");J(this,"maxEntrySize");J(this,"sizeCalculation");J(this,"noDeleteOnFetchRejection");J(this,"noDeleteOnStaleGet");J(this,"allowStaleOnFetchAbort");J(this,"allowStaleOnFetchRejection");J(this,"ignoreFetchAbort");j(this,re);j(this,Be);j(this,le);j(this,X);j(this,P);j(this,ve);j(this,we);j(this,pe);j(this,ce);j(this,Oe);j(this,ue);j(this,Pe);j(this,He);j(this,Ae);j(this,Ne);j(this,tt);j(this,be);j(this,Ct);j(this,rt,()=>{});j(this,Ge,()=>{});j(this,Bt,()=>{});j(this,Ee,()=>!1);j(this,st,t=>{});j(this,xt,(t,n,o)=>{});j(this,Ot,(t,n,o,i)=>{if(o||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});J(this,gl,"LRUCache");const{max:n=0,ttl:o,ttlResolution:i=1,ttlAutopurge:l,updateAgeOnGet:r,updateAgeOnHas:s,allowStale:a,dispose:c,onInsert:d,disposeAfter:u,noDisposeOnSet:m,noUpdateTTL:v,maxSize:p=0,maxEntrySize:w=0,sizeCalculation:C,fetchMethod:x,memoMethod:b,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:A,ignoreFetchAbort:$}=t;if(n!==0&&!Ke(n))throw new TypeError("max option must be a nonnegative integer");const D=n?Yl(n):Array;if(!D)throw new Error("invalid max value: "+n);if(M(this,Me,n),M(this,xe,p),this.maxEntrySize=w||h(this,xe),this.sizeCalculation=C,this.sizeCalculation){if(!h(this,xe)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(b!==void 0&&typeof b!="function")throw new TypeError("memoMethod must be a function if defined");if(M(this,yt,b),x!==void 0&&typeof x!="function")throw new TypeError("fetchMethod must be a function if specified");if(M(this,kt,x),M(this,tt,!!x),M(this,le,new Map),M(this,X,new Array(n).fill(void 0)),M(this,P,new Array(n).fill(void 0)),M(this,ve,new D(n)),M(this,we,new D(n)),M(this,pe,0),M(this,ce,0),M(this,Oe,Wn.create(n)),M(this,re,0),M(this,Be,0),typeof c=="function"&&M(this,ze,c),typeof d=="function"&&M(this,lt,d),typeof u=="function"?(M(this,Re,u),M(this,ue,[])):(M(this,Re,void 0),M(this,ue,void 0)),M(this,Ne,!!h(this,ze)),M(this,Ct,!!h(this,lt)),M(this,be,!!h(this,Re)),this.noDisposeOnSet=!!m,this.noUpdateTTL=!!v,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!k,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!$,this.maxEntrySize!==0){if(h(this,xe)!==0&&!Ke(h(this,xe)))throw new TypeError("maxSize must be a positive integer if specified");if(!Ke(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");I(this,T,Jl).call(this)}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!s,this.ttlResolution=Ke(i)||i===0?i:1,this.ttlAutopurge=!!l,this.ttl=o||0,this.ttl){if(!Ke(this.ttl))throw new TypeError("ttl must be a positive integer if specified");I(this,T,qn).call(this)}if(h(this,Me)===0&&this.ttl===0&&h(this,xe)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!h(this,Me)&&!h(this,xe)){const S="LRU_CACHE_UNBOUNDED";du(S)&&(Xl.add(S),Kl("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",S,co))}}static unsafeExposeInternals(t){return{starts:h(t,He),ttls:h(t,Ae),sizes:h(t,Pe),keyMap:h(t,le),keyList:h(t,X),valList:h(t,P),next:h(t,ve),prev:h(t,we),get head(){return h(t,pe)},get tail(){return h(t,ce)},free:h(t,Oe),isBackgroundFetch:n=>{var o;return I(o=t,T,Z).call(o,n)},backgroundFetch:(n,o,i,l)=>{var r;return I(r=t,T,nn).call(r,n,o,i,l)},moveToTail:n=>{var o;return I(o=t,T,Tt).call(o,n)},indexes:n=>{var o;return I(o=t,T,Ye).call(o,n)},rindexes:n=>{var o;return I(o=t,T,Je).call(o,n)},isStale:n=>{var o;return h(o=t,Ee).call(o,n)}}}get max(){return h(this,Me)}get maxSize(){return h(this,xe)}get calculatedSize(){return h(this,Be)}get size(){return h(this,re)}get fetchMethod(){return h(this,kt)}get memoMethod(){return h(this,yt)}get dispose(){return h(this,ze)}get onInsert(){return h(this,lt)}get disposeAfter(){return h(this,Re)}getRemainingTTL(t){return h(this,le).has(t)?1/0:0}*entries(){for(const t of I(this,T,Ye).call(this))h(this,P)[t]!==void 0&&h(this,X)[t]!==void 0&&!I(this,T,Z).call(this,h(this,P)[t])&&(yield[h(this,X)[t],h(this,P)[t]])}*rentries(){for(const t of I(this,T,Je).call(this))h(this,P)[t]!==void 0&&h(this,X)[t]!==void 0&&!I(this,T,Z).call(this,h(this,P)[t])&&(yield[h(this,X)[t],h(this,P)[t]])}*keys(){for(const t of I(this,T,Ye).call(this)){const n=h(this,X)[t];n!==void 0&&!I(this,T,Z).call(this,h(this,P)[t])&&(yield n)}}*rkeys(){for(const t of I(this,T,Je).call(this)){const n=h(this,X)[t];n!==void 0&&!I(this,T,Z).call(this,h(this,P)[t])&&(yield n)}}*values(){for(const t of I(this,T,Ye).call(this))h(this,P)[t]!==void 0&&!I(this,T,Z).call(this,h(this,P)[t])&&(yield h(this,P)[t])}*rvalues(){for(const t of I(this,T,Je).call(this))h(this,P)[t]!==void 0&&!I(this,T,Z).call(this,h(this,P)[t])&&(yield h(this,P)[t])}[(vl=Symbol.iterator,gl=Symbol.toStringTag,vl)](){return this.entries()}find(t,n={}){for(const o of I(this,T,Ye).call(this)){const i=h(this,P)[o],l=I(this,T,Z).call(this,i)?i.__staleWhileFetching:i;if(l!==void 0&&t(l,h(this,X)[o],this))return this.get(h(this,X)[o],n)}}forEach(t,n=this){for(const o of I(this,T,Ye).call(this)){const i=h(this,P)[o],l=I(this,T,Z).call(this,i)?i.__staleWhileFetching:i;l!==void 0&&t.call(n,l,h(this,X)[o],this)}}rforEach(t,n=this){for(const o of I(this,T,Je).call(this)){const i=h(this,P)[o],l=I(this,T,Z).call(this,i)?i.__staleWhileFetching:i;l!==void 0&&t.call(n,l,h(this,X)[o],this)}}purgeStale(){let t=!1;for(const n of I(this,T,Je).call(this,{allowStale:!0}))h(this,Ee).call(this,n)&&(I(this,T,Qe).call(this,h(this,X)[n],"expire"),t=!0);return t}info(t){const n=h(this,le).get(t);if(n===void 0)return;const o=h(this,P)[n],i=I(this,T,Z).call(this,o)?o.__staleWhileFetching:o;if(i===void 0)return;const l={value:i};if(h(this,Ae)&&h(this,He)){const r=h(this,Ae)[n],s=h(this,He)[n];if(r&&s){const a=r-(ft.now()-s);l.ttl=a,l.start=Date.now()}}return h(this,Pe)&&(l.size=h(this,Pe)[n]),l}dump(){const t=[];for(const n of I(this,T,Ye).call(this,{allowStale:!0})){const o=h(this,X)[n],i=h(this,P)[n],l=I(this,T,Z).call(this,i)?i.__staleWhileFetching:i;if(l===void 0||o===void 0)continue;const r={value:l};if(h(this,Ae)&&h(this,He)){r.ttl=h(this,Ae)[n];const s=ft.now()-h(this,He)[n];r.start=Math.floor(Date.now()-s)}h(this,Pe)&&(r.size=h(this,Pe)[n]),t.unshift([o,r])}return t}load(t){this.clear();for(const[n,o]of t){if(o.start){const i=Date.now()-o.start;o.start=ft.now()-i}this.set(n,o.value,o)}}set(t,n,o={}){var m,v,p,w,C,x,b;if(n===void 0)return this.delete(t),this;const{ttl:i=this.ttl,start:l,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=o;let{noUpdateTTL:c=this.noUpdateTTL}=o;const d=h(this,Ot).call(this,t,n,o.size||0,s);if(this.maxEntrySize&&d>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),I(this,T,Qe).call(this,t,"set"),this;let u=h(this,re)===0?void 0:h(this,le).get(t);if(u===void 0)u=h(this,re)===0?h(this,ce):h(this,Oe).length!==0?h(this,Oe).pop():h(this,re)===h(this,Me)?I(this,T,tn).call(this,!1):h(this,re),h(this,X)[u]=t,h(this,P)[u]=n,h(this,le).set(t,u),h(this,ve)[h(this,ce)]=u,h(this,we)[u]=h(this,ce),M(this,ce,u),Vt(this,re)._++,h(this,xt).call(this,u,d,a),a&&(a.set="add"),c=!1,h(this,Ct)&&((m=h(this,lt))==null||m.call(this,n,t,"add"));else{I(this,T,Tt).call(this,u);const _=h(this,P)[u];if(n!==_){if(h(this,tt)&&I(this,T,Z).call(this,_)){_.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=_;y!==void 0&&!r&&(h(this,Ne)&&((v=h(this,ze))==null||v.call(this,y,t,"set")),h(this,be)&&((p=h(this,ue))==null||p.push([y,t,"set"])))}else r||(h(this,Ne)&&((w=h(this,ze))==null||w.call(this,_,t,"set")),h(this,be)&&((C=h(this,ue))==null||C.push([_,t,"set"])));if(h(this,st).call(this,u),h(this,xt).call(this,u,d,a),h(this,P)[u]=n,a){a.set="replace";const y=_&&I(this,T,Z).call(this,_)?_.__staleWhileFetching:_;y!==void 0&&(a.oldValue=y)}}else a&&(a.set="update");h(this,Ct)&&((x=this.onInsert)==null||x.call(this,n,t,n===_?"update":"replace"))}if(i!==0&&!h(this,Ae)&&I(this,T,qn).call(this),h(this,Ae)&&(c||h(this,Bt).call(this,u,i,l),a&&h(this,Ge).call(this,a,u)),!r&&h(this,be)&&h(this,ue)){const _=h(this,ue);let y;for(;y=_==null?void 0:_.shift();)(b=h(this,Re))==null||b.call(this,...y)}return this}pop(){var t;try{for(;h(this,re);){const n=h(this,P)[h(this,pe)];if(I(this,T,tn).call(this,!0),I(this,T,Z).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(h(this,be)&&h(this,ue)){const n=h(this,ue);let o;for(;o=n==null?void 0:n.shift();)(t=h(this,Re))==null||t.call(this,...o)}}}has(t,n={}){const{updateAgeOnHas:o=this.updateAgeOnHas,status:i}=n,l=h(this,le).get(t);if(l!==void 0){const r=h(this,P)[l];if(I(this,T,Z).call(this,r)&&r.__staleWhileFetching===void 0)return!1;if(h(this,Ee).call(this,l))i&&(i.has="stale",h(this,Ge).call(this,i,l));else return o&&h(this,rt).call(this,l),i&&(i.has="hit",h(this,Ge).call(this,i,l)),!0}else i&&(i.has="miss");return!1}peek(t,n={}){const{allowStale:o=this.allowStale}=n,i=h(this,le).get(t);if(i===void 0||!o&&h(this,Ee).call(this,i))return;const l=h(this,P)[i];return I(this,T,Z).call(this,l)?l.__staleWhileFetching:l}async fetch(t,n={}){const{allowStale:o=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:l=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:v=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:w,forceRefresh:C=!1,status:x,signal:b}=n;if(!h(this,tt))return x&&(x.fetch="get"),this.get(t,{allowStale:o,updateAgeOnGet:i,noDeleteOnStaleGet:l,status:x});const _={allowStale:o,updateAgeOnGet:i,noDeleteOnStaleGet:l,ttl:r,noDisposeOnSet:s,size:a,sizeCalculation:c,noUpdateTTL:d,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:p,ignoreFetchAbort:v,status:x,signal:b};let y=h(this,le).get(t);if(y===void 0){x&&(x.fetch="miss");const k=I(this,T,nn).call(this,t,y,_,w);return k.__returned=k}else{const k=h(this,P)[y];if(I(this,T,Z).call(this,k)){const L=o&&k.__staleWhileFetching!==void 0;return x&&(x.fetch="inflight",L&&(x.returnedStale=!0)),L?k.__staleWhileFetching:k.__returned=k}const A=h(this,Ee).call(this,y);if(!C&&!A)return x&&(x.fetch="hit"),I(this,T,Tt).call(this,y),i&&h(this,rt).call(this,y),x&&h(this,Ge).call(this,x,y),k;const $=I(this,T,nn).call(this,t,y,_,w),S=$.__staleWhileFetching!==void 0&&o;return x&&(x.fetch=A?"stale":"refresh",S&&A&&(x.returnedStale=!0)),S?$.__staleWhileFetching:$.__returned=$}}async forceFetch(t,n={}){const o=await this.fetch(t,n);if(o===void 0)throw new Error("fetch() returned undefined");return o}memo(t,n={}){const o=h(this,yt);if(!o)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:l,...r}=n,s=this.get(t,r);if(!l&&s!==void 0)return s;const a=o(t,s,{options:r,context:i});return this.set(t,a,r),a}get(t,n={}){const{allowStale:o=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:l=this.noDeleteOnStaleGet,status:r}=n,s=h(this,le).get(t);if(s!==void 0){const a=h(this,P)[s],c=I(this,T,Z).call(this,a);return r&&h(this,Ge).call(this,r,s),h(this,Ee).call(this,s)?(r&&(r.get="stale"),c?(r&&o&&a.__staleWhileFetching!==void 0&&(r.returnedStale=!0),o?a.__staleWhileFetching:void 0):(l||I(this,T,Qe).call(this,t,"expire"),r&&o&&(r.returnedStale=!0),o?a:void 0)):(r&&(r.get="hit"),c?a.__staleWhileFetching:(I(this,T,Tt).call(this,s),i&&h(this,rt).call(this,s),a))}else r&&(r.get="miss")}delete(t){return I(this,T,Qe).call(this,t,"delete")}clear(){return I(this,T,Xn).call(this,"delete")}};Me=new WeakMap,xe=new WeakMap,ze=new WeakMap,lt=new WeakMap,Re=new WeakMap,kt=new WeakMap,yt=new WeakMap,re=new WeakMap,Be=new WeakMap,le=new WeakMap,X=new WeakMap,P=new WeakMap,ve=new WeakMap,we=new WeakMap,pe=new WeakMap,ce=new WeakMap,Oe=new WeakMap,ue=new WeakMap,Pe=new WeakMap,He=new WeakMap,Ae=new WeakMap,Ne=new WeakMap,tt=new WeakMap,be=new WeakMap,Ct=new WeakMap,T=new WeakSet,qn=function(){const t=new en(h(this,Me)),n=new en(h(this,Me));M(this,Ae,t),M(this,He,n),M(this,Bt,(l,r,s=ft.now())=>{if(n[l]=r!==0?s:0,t[l]=r,r!==0&&this.ttlAutopurge){const a=setTimeout(()=>{h(this,Ee).call(this,l)&&I(this,T,Qe).call(this,h(this,X)[l],"expire")},r+1);a.unref&&a.unref()}}),M(this,rt,l=>{n[l]=t[l]!==0?ft.now():0}),M(this,Ge,(l,r)=>{if(t[r]){const s=t[r],a=n[r];if(!s||!a)return;l.ttl=s,l.start=a,l.now=o||i();const c=l.now-a;l.remainingTTL=s-c}});let o=0;const i=()=>{const l=ft.now();if(this.ttlResolution>0){o=l;const r=setTimeout(()=>o=0,this.ttlResolution);r.unref&&r.unref()}return l};this.getRemainingTTL=l=>{const r=h(this,le).get(l);if(r===void 0)return 0;const s=t[r],a=n[r];if(!s||!a)return 1/0;const c=(o||i())-a;return s-c},M(this,Ee,l=>{const r=n[l],s=t[l];return!!s&&!!r&&(o||i())-r>s})},rt=new WeakMap,Ge=new WeakMap,Bt=new WeakMap,Ee=new WeakMap,Jl=function(){const t=new en(h(this,Me));M(this,Be,0),M(this,Pe,t),M(this,st,n=>{M(this,Be,h(this,Be)-t[n]),t[n]=0}),M(this,Ot,(n,o,i,l)=>{if(I(this,T,Z).call(this,o))return 0;if(!Ke(i))if(l){if(typeof l!="function")throw new TypeError("sizeCalculation must be a function");if(i=l(o,n),!Ke(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),M(this,xt,(n,o,i)=>{if(t[n]=o,h(this,xe)){const l=h(this,xe)-t[n];for(;h(this,Be)>l;)I(this,T,tn).call(this,!0)}M(this,Be,h(this,Be)+t[n]),i&&(i.entrySize=o,i.totalCalculatedSize=h(this,Be))})},st=new WeakMap,xt=new WeakMap,Ot=new WeakMap,Ye=function*({allowStale:t=this.allowStale}={}){if(h(this,re))for(let n=h(this,ce);!(!I(this,T,Gn).call(this,n)||((t||!h(this,Ee).call(this,n))&&(yield n),n===h(this,pe)));)n=h(this,we)[n]},Je=function*({allowStale:t=this.allowStale}={}){if(h(this,re))for(let n=h(this,pe);!(!I(this,T,Gn).call(this,n)||((t||!h(this,Ee).call(this,n))&&(yield n),n===h(this,ce)));)n=h(this,ve)[n]},Gn=function(t){return t!==void 0&&h(this,le).get(h(this,X)[t])===t},tn=function(t){var l,r;const n=h(this,pe),o=h(this,X)[n],i=h(this,P)[n];return h(this,tt)&&I(this,T,Z).call(this,i)?i.__abortController.abort(new Error("evicted")):(h(this,Ne)||h(this,be))&&(h(this,Ne)&&((l=h(this,ze))==null||l.call(this,i,o,"evict")),h(this,be)&&((r=h(this,ue))==null||r.push([i,o,"evict"]))),h(this,st).call(this,n),t&&(h(this,X)[n]=void 0,h(this,P)[n]=void 0,h(this,Oe).push(n)),h(this,re)===1?(M(this,pe,M(this,ce,0)),h(this,Oe).length=0):M(this,pe,h(this,ve)[n]),h(this,le).delete(o),Vt(this,re)._--,n},nn=function(t,n,o,i){const l=n===void 0?void 0:h(this,P)[n];if(I(this,T,Z).call(this,l))return l;const r=new mn,{signal:s}=o;s==null||s.addEventListener("abort",()=>r.abort(s.reason),{signal:r.signal});const a={signal:r.signal,options:o,context:i},c=(w,C=!1)=>{const{aborted:x}=r.signal,b=o.ignoreFetchAbort&&w!==void 0;if(o.status&&(x&&!C?(o.status.fetchAborted=!0,o.status.fetchError=r.signal.reason,b&&(o.status.fetchAbortIgnored=!0)):o.status.fetchResolved=!0),x&&!b&&!C)return u(r.signal.reason);const _=v;return h(this,P)[n]===v&&(w===void 0?_.__staleWhileFetching?h(this,P)[n]=_.__staleWhileFetching:I(this,T,Qe).call(this,t,"fetch"):(o.status&&(o.status.fetchUpdated=!0),this.set(t,w,a.options))),w},d=w=>(o.status&&(o.status.fetchRejected=!0,o.status.fetchError=w),u(w)),u=w=>{const{aborted:C}=r.signal,x=C&&o.allowStaleOnFetchAbort,b=x||o.allowStaleOnFetchRejection,_=b||o.noDeleteOnFetchRejection,y=v;if(h(this,P)[n]===v&&(!_||y.__staleWhileFetching===void 0?I(this,T,Qe).call(this,t,"fetch"):x||(h(this,P)[n]=y.__staleWhileFetching)),b)return o.status&&y.__staleWhileFetching!==void 0&&(o.status.returnedStale=!0),y.__staleWhileFetching;if(y.__returned===y)throw w},m=(w,C)=>{var b;const x=(b=h(this,kt))==null?void 0:b.call(this,t,l,a);x&&x instanceof Promise&&x.then(_=>w(_===void 0?void 0:_),C),r.signal.addEventListener("abort",()=>{(!o.ignoreFetchAbort||o.allowStaleOnFetchAbort)&&(w(void 0),o.allowStaleOnFetchAbort&&(w=_=>c(_,!0)))})};o.status&&(o.status.fetchDispatched=!0);const v=new Promise(m).then(c,d),p=Object.assign(v,{__abortController:r,__staleWhileFetching:l,__returned:void 0});return n===void 0?(this.set(t,p,{...a.options,status:void 0}),n=h(this,le).get(t)):h(this,P)[n]=p,p},Z=function(t){if(!h(this,tt))return!1;const n=t;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof mn},Zn=function(t,n){h(this,we)[n]=t,h(this,ve)[t]=n},Tt=function(t){t!==h(this,ce)&&(t===h(this,pe)?M(this,pe,h(this,ve)[t]):I(this,T,Zn).call(this,h(this,we)[t],h(this,ve)[t]),I(this,T,Zn).call(this,h(this,ce),t),M(this,ce,t))},Qe=function(t,n){var i,l,r,s;let o=!1;if(h(this,re)!==0){const a=h(this,le).get(t);if(a!==void 0)if(o=!0,h(this,re)===1)I(this,T,Xn).call(this,n);else{h(this,st).call(this,a);const c=h(this,P)[a];if(I(this,T,Z).call(this,c)?c.__abortController.abort(new Error("deleted")):(h(this,Ne)||h(this,be))&&(h(this,Ne)&&((i=h(this,ze))==null||i.call(this,c,t,n)),h(this,be)&&((l=h(this,ue))==null||l.push([c,t,n]))),h(this,le).delete(t),h(this,X)[a]=void 0,h(this,P)[a]=void 0,a===h(this,ce))M(this,ce,h(this,we)[a]);else if(a===h(this,pe))M(this,pe,h(this,ve)[a]);else{const d=h(this,we)[a];h(this,ve)[d]=h(this,ve)[a];const u=h(this,ve)[a];h(this,we)[u]=h(this,we)[a]}Vt(this,re)._--,h(this,Oe).push(a)}}if(h(this,be)&&((r=h(this,ue))!=null&&r.length)){const a=h(this,ue);let c;for(;c=a==null?void 0:a.shift();)(s=h(this,Re))==null||s.call(this,...c)}return o},Xn=function(t){var n,o,i;for(const l of I(this,T,Je).call(this,{allowStale:!0})){const r=h(this,P)[l];if(I(this,T,Z).call(this,r))r.__abortController.abort(new Error("deleted"));else{const s=h(this,X)[l];h(this,Ne)&&((n=h(this,ze))==null||n.call(this,r,s,t)),h(this,be)&&((o=h(this,ue))==null||o.push([r,s,t]))}}if(h(this,le).clear(),h(this,P).fill(void 0),h(this,X).fill(void 0),h(this,Ae)&&h(this,He)&&(h(this,Ae).fill(0),h(this,He).fill(0)),h(this,Pe)&&h(this,Pe).fill(0),M(this,pe,0),M(this,ce,0),h(this,Oe).length=0,M(this,Be,0),M(this,re,0),h(this,be)&&h(this,ue)){const l=h(this,ue);let r;for(;r=l==null?void 0:l.shift();)(i=h(this,Re))==null||i.call(this,...r)}};let Un=co;const Ie={hljs:`${f}-hljs`,hlcss:`${f}-hlCss`,prettier:`${f}-prettier`,prettierMD:`${f}-prettierMD`,cropperjs:`${f}-cropper`,croppercss:`${f}-cropperCss`,screenfull:`${f}-screenfull`,mermaidM:`${f}-mermaid-m`,mermaid:`${f}-mermaid`,katexjs:`${f}-katex`,katexcss:`${f}-katexCss`},fu=(e,t)=>{const n=R("editorId"),{noImgZoomIn:o}=e,i=yl(()=>{const l=document.querySelectorAll(`#${n}-preview img:not(.not-zoom):not(.medium-zoom-image)`);l.length!==0&&Tr(l,{background:"#00000073"})});Q(()=>{!o&&e.setting.preview&&i()}),B([t,je(e.setting,"preview")],()=>{!o&&e.setting.preview&&i()})},hu=(e,t,n)=>{const o=R("editorId"),i=R("rootRef"),l=R("usedLanguageText"),r=()=>{i.value.querySelectorAll(`#${o} .${f}-preview .${f}-code`).forEach(c=>{let d=-1;const u=c.querySelector(`.${f}-copy-button`);u&&(u.onclick=m=>{m.preventDefault(),clearTimeout(d);const p=(c.querySelector("input:checked + pre code")||c.querySelector("pre code")).textContent,{text:w,successTips:C,failTips:x}=l.value.copyCode;let b=C;Fr(e.formatCopiedText(p)).catch(()=>{b=x}).finally(()=>{u.dataset.isIcon?u.dataset.tips=b:u.innerHTML=b,d=window.setTimeout(()=>{u.dataset.isIcon?u.dataset.tips=w:u.innerHTML=w},1500)})})})},s=()=>{Ve(r)},a=c=>{c&&Ve(r)};B([t,n],s),B(()=>e.setting.preview,a),B(()=>e.setting.htmlPreview,a),Q(r)},mu=e=>{const t=R("highlight"),n=at(ie.editorExtensions.highlight.instance);return Q(()=>{e.noHighlight||n.value||($e("link",{...t.value.css,rel:"stylesheet",id:Ie.hlcss}),$e("script",{...t.value.js,id:Ie.hljs,onload(){n.value=window.hljs}},"hljs"))}),B(()=>t.value.css,()=>{e.noHighlight||ie.editorExtensions.highlight.instance||Ws("link",{...t.value.css,rel:"stylesheet",id:Ie.hlcss})}),n},on=new Un({max:1e3,ttl:6e5}),pu=e=>{const t=R("editorId"),n=R("theme"),o=R("rootRef"),{editorExtensions:i,editorExtensionsAttrs:l,mermaidConfig:r}=ie;let s=i.mermaid.instance;const a=at(-1),c=()=>{!e.noMermaid&&s&&(s.initialize(r({startOnLoad:!1,theme:n.value==="dark"?"dark":"default"})),a.value=a.value+1)};return B(()=>n.value,()=>{on.clear(),c()}),Q(()=>{var u,m;if(e.noMermaid||s)return;const v=i.mermaid.js;/\.mjs/.test(v)?($e("link",{...(u=l.mermaid)==null?void 0:u.js,rel:"modulepreload",href:v,id:Ie.mermaidM}),import(v).then(p=>{s=p.default,c()})):$e("script",{...(m=l.mermaid)==null?void 0:m.js,src:v,id:Ie.mermaid,onload(){s=window.mermaid,c()}},"mermaid")}),{reRenderRef:a,replaceMermaid:async()=>{if(!e.noMermaid&&s){const u=o.value.querySelectorAll(`div.${f}-mermaid`),m=document.createElement("div"),v=document.body.offsetWidth>1366?document.body.offsetWidth:1366,p=document.body.offsetHeight>768?document.body.offsetHeight:768;m.style.width=v+"px",m.style.height=p+"px",m.style.position="fixed",m.style.zIndex="-10000",m.style.top="-10000";let w=u.length;w>0&&document.body.appendChild(m),await Promise.allSettled(Array.from(u).map(C=>(async b=>{var _;const y=b.innerText;let k=on.get(y);if(!k){const A=Bn();let $={svg:""};try{$=await s.render(A,y,m),k=await e.sanitizeMermaid($.svg);const D=document.createElement("p");D.className=`${f}-mermaid`,D.setAttribute("data-processed",""),D.innerHTML=k,(_=D.children[0])==null||_.removeAttribute("height"),on.set(y,D.innerHTML),b.dataset.line!==void 0&&(D.dataset.line=b.dataset.line),b.replaceWith(D)}catch(D){F.emit(t,ot,{name:"mermaid",message:D.message,error:D})}--w===0&&m.remove()}})(C)))}}}},gu=e=>{const t=at(ie.editorExtensions.katex.instance);return Q(()=>{if(e.noKatex||t.value)return;const{editorExtensions:n}=ie;$e("script",{src:n.katex.js,id:Ie.katexjs,onload(){t.value=window.katex}},"katex"),$e("link",{rel:"stylesheet",href:n.katex.css,id:Ie.katexcss})}),t},vu=(e,t)=>{const n=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(o,i,l,r,s)=>{const a=o[i],c=a.content.trim();if(a.info==="mermaid"){let d;o[i].map&&o[i].level===0&&(d=o[i].map[0],o[i].attrSet("data-line",String(d)));const u=on.get(c);return u?`<p class="${f}-mermaid" ${d!==void 0?"data-line="+d:""} data-processed>${u}</p>`:`<div class="${f}-mermaid" ${d!==void 0?"data-line="+d:""} data-mermaid-theme=${t.themeRef.value}">${e.utils.escapeHtml(c)}</div>`}return n(o,i,l,r,s)}},pn=(e,t)=>{const n=e.attrs?e.attrs.slice():[];return t.forEach(o=>{const i=e.attrIndex(o[0]);i<0?n.push(o):(n[i]=n[i].slice(),n[i][1]+=` ${o[1]}`)}),n},Gi={block:[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}],inline:[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}]},bu=e=>(t,n)=>{const o=e.delimiters;let i,l,r;for(const s of o)if(t.src.startsWith(s.open,t.pos)){const a=t.pos+s.open.length;for(i=a;(i=t.src.indexOf(s.close,i))!==-1;){for(r=i-1;t.src[r]==="\\";)r-=1;if((i-r)%2===1)break;i+=s.close.length}if(i===-1)return n||(t.pending+=s.open),t.pos=a,!0;if(i-a===0)return n||(t.pending+=s.open+s.close),t.pos=a+s.close.length,!0;if(!n){const c=t.src.slice(a,i);l=t.push("math_inline","math",0),l.markup=s.open,l.content=c}return t.pos=i+s.close.length,!0}return!1},_u=e=>(t,n,o,i)=>{const l=e.delimiters;let r,s,a,c,d=!1,u=t.bMarks[n]+t.tShift[n],m=t.eMarks[n];for(const v of l)if(t.src.slice(u,u+v.open.length)===v.open&&t.src.slice(m-v.close.length,m)===v.close){if(u+=v.open.length,r=t.src.slice(u,m),i)return!0;for(r.trim().slice(-v.close.length)===v.close&&(r=r.trim().slice(0,-v.close.length),d=!0),a=n;!d&&(a++,!(a>=o||(u=t.bMarks[a]+t.tShift[a],m=t.eMarks[a],u<m&&t.tShift[a]<t.blkIndent)));)t.src.slice(u,m).trim().slice(-v.close.length)===v.close&&(c=t.src.slice(0,m).lastIndexOf(v.close),s=t.src.slice(u,c),d=!0);t.line=a+1;const p=t.push("math_block","math",0);return p.block=!0,p.content=(r&&r.trim()?r+`
`:"")+t.getLines(n+1,a,t.tShift[n],!0)+(s&&s.trim()?s:""),p.map=[n,t.line],p.markup=v.open,!0}return!1},ku=(e,{katexRef:t,inlineDelimiters:n,blockDelimiters:o})=>{const i=(r,s,a,c,d)=>{const u=r[s],m={attrs:pn(u,[["class",`${f}-katex-inline`]])};if(t.value){const v=t.value.renderToString(u.content,ie.katexConfig({throwOnError:!1}));return`<span ${d.renderAttrs(m)} data-processed>${v}</span>`}else return`<span ${d.renderAttrs(m)}>${u.content}</span>`},l=(r,s,a,c,d)=>{const u=r[s],m={attrs:pn(u,[["class",`${f}-katex-block`]])};if(t.value){const v=t.value.renderToString(u.content,ie.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${d.renderAttrs(m)} data-processed>${v}</p>`}else return`<p ${d.renderAttrs(m)}>${u.content}</p>`};e.inline.ruler.before("escape","math_inline",bu({delimiters:n||Gi.inline})),e.block.ruler.after("blockquote","math_block",_u({delimiters:o||Gi.block}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=i,e.renderer.rules.math_block=l},yu=(e,t)=>{t=t||{};const n=3,o=t.marker||"!",i=o.charCodeAt(0),l=o.length;let r="",s="";const a=(d,u,m,v,p)=>{const w=d[u];return w.type==="admonition_open"?d[u].attrPush(["class",`${f}-admonition ${f}-admonition-${w.info}`]):w.type==="admonition_title_open"&&d[u].attrPush(["class",`${f}-admonition-title`]),p.renderToken(d,u,m)},c=d=>{const u=d.trim().split(" ",2);s="",r=u[0],u.length>1&&(s=d.substring(r.length+2))};e.block.ruler.before("code","admonition",(d,u,m,v)=>{let p,w,C,x=!1,b=d.bMarks[u]+d.tShift[u],_=d.eMarks[u];if(i!==d.src.charCodeAt(b))return!1;for(p=b+1;p<=_&&o[(p-b)%l]===d.src[p];p++);const y=Math.floor((p-b)/l);if(y!==n)return!1;p-=(p-b)%l;const k=d.src.slice(b,p),A=d.src.slice(p,_);if(c(A),v)return!0;for(w=u;w++,!(w>=m||(b=d.bMarks[w]+d.tShift[w],_=d.eMarks[w],b<_&&d.sCount[w]<d.blkIndent));)if(i===d.src.charCodeAt(b)&&!(d.sCount[w]-d.blkIndent>=4)){for(p=b+1;p<=_&&o[(p-b)%l]===d.src[p];p++);if(!(Math.floor((p-b)/l)<y)&&(p-=(p-b)%l,p=d.skipSpaces(p),!(p<_))){x=!0;break}}const $=d.parentType,D=d.lineMax;return d.parentType="root",d.lineMax=w,C=d.push("admonition_open","div",1),C.markup=k,C.block=!0,C.info=r,C.map=[u,w],s&&(C=d.push("admonition_title_open","p",1),C.markup=k+" "+r,C.map=[u,w],C=d.push("inline","",0),C.content=s,C.map=[u,d.line-1],C.children=[],C=d.push("admonition_title_close","p",-1),C.markup=k+" "+r),d.md.block.tokenize(d,u+1,w),C=d.push("admonition_close","div",-1),C.markup=d.src.slice(b,p),C.block=!0,d.parentType=$,d.lineMax=D,d.line=w+(x?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=a,e.renderer.rules.admonition_title_open=a,e.renderer.rules.admonition_title_close=a,e.renderer.rules.admonition_close=a},Cu=(e,t)=>{e.renderer.rules.heading_open=(n,o)=>{var i;const l=n[o],r=((i=n[o+1].children)==null?void 0:i.reduce((a,c)=>a+(["text","code_inline","math_inline"].includes(c.type)&&c.content||""),""))||"",s=l.markup.length;return t.headsRef.value.push({text:r,level:s,line:l.map[0]}),l.map&&l.level===0&&l.attrSet("id",t.mdHeadingId(r,s,t.headsRef.value.length)),e.renderer.renderToken(n,o,t)},e.renderer.rules.heading_close=(n,o,i,l,r)=>r.renderToken(n,o,i)},xu=(e,t)=>{const n=e.renderer.rules.fence,o=e.utils.unescapeAll,i=/\[(\w*)(?::([\w ]*))?\]/,l=/::(open|close)/,r=u=>u.info?o(u.info).trim():"",s=u=>{const m=r(u),[v=null,p=""]=(i.exec(m)||[]).slice(1);return[v,p]},a=u=>{const m=r(u);return m?m.split(/(\s+)/g)[0]:""},c=u=>{const m=u.info.match(l)||[],v=m[1]==="open"||m[1]!=="close"&&t.codeFoldable&&u.content.trim().split(`
`).length<t.autoFoldThreshold,p=m[1]||t.codeFoldable?"details":"div",w=m[1]||t.codeFoldable?"summary":"div";return{open:v,tagContainer:p,tagHeader:w}},d=(u,m,v,p,w)=>{var C;if(u[m].hidden)return"";const x=(C=t.usedLanguageTextRef.value)==null?void 0:C.copyCode.text,b=t.customIconRef.value.copy||x,_=!!t.customIconRef.value.copy,y=`<span class="${f}-collapse-tips">${Qt("collapse-tips",t.customIconRef.value)}</span>`,[k]=s(u[m]);if(k===null){const{open:oe,tagContainer:ae,tagHeader:De}=c(u[m]),ye=[["class",`${f}-code`]];oe&&ye.push(["open",""]);const ge={attrs:pn(u[m],ye)};u[m].info=u[m].info.replace(l,"");const ne=n(u,m,v,p,w);return`
        <${ae} ${w.renderAttrs(ge)}>
          <${De} class="${f}-code-head">
            <div class="${f}-code-flag"><span></span><span></span><span></span></div>
            <div class="${f}-code-action">
              <span class="${f}-code-lang">${u[m].info.trim()}</span>
              <span class="${f}-copy-button" data-tips="${x}"${_?" data-is-icon=true":""}>${b}</span>
              ${t.extraTools instanceof Function?t.extraTools({lang:u[m].info.trim()}):t.extraTools||""}
              ${ae==="details"?y:""}
            </div>
          </${De}>
          ${ne}
        </${ae}>
      `}let A,$,D,S,L="",H="",z="";const{open:N,tagContainer:te,tagHeader:U}=c(u[m]),se=[["class",`${f}-code`]];N&&se.push(["open",""]);const fe={attrs:pn(u[m],se)};for(let oe=m;oe<u.length&&(A=u[oe],[$,D]=s(A),$===k);oe++){A.info=A.info.replace(i,"").replace(l,""),A.hidden=!0;const ae=`${f}-codetab-${t.editorId}-${m}-${oe-m}`;S=oe-m>0?"":"checked",L+=`
        <li>
          <input
            type="radio"
            id="label-${f}-codetab-label-1-${t.editorId}-${m}-${oe-m}"
            name="${f}-codetab-label-${t.editorId}-${m}"
            class="${ae}"
            ${S}
          >
          <label
            for="label-${f}-codetab-label-1-${t.editorId}-${m}-${oe-m}"
            onclick="this.getRootNode().querySelectorAll('.${ae}').forEach(e => e.click())"
          >
            ${D||a(A)}
          </label>
        </li>`,H+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${f}-codetab-pre-${t.editorId}-${m}"
            class="${ae}"
            ${S}
            role="presentation">
          ${n(u,oe,v,p,w)}
        </div>`,z+=`
        <input
          type="radio"
          name="${f}-codetab-lang-${t.editorId}-${m}"
          class="${ae}"
          ${S}
          role="presentation">
        <span class=${f}-code-lang role="note">${a(A)}</span>`}return`
      <${te} ${w.renderAttrs(fe)}>
        <${U} class="${f}-code-head">
          <div class="${f}-code-flag">
            <ul class="${f}-codetab-label" role="tablist">${L}</ul>
          </div>
          <div class="${f}-code-action">
            <span class="${f}-codetab-lang">${z}</span>
            <span class="${f}-copy-button" data-tips="${x}"${_?" data-is-icon=true":""}>${b}</span>
            ${t.extraTools instanceof Function?t.extraTools({lang:u[m].info.trim()}):t.extraTools||""}
            ${te==="details"?y:""}
          </div>
        </${U}>
        ${H}
      </${te}>
    `};e.renderer.rules.fence=d,e.renderer.rules.code_block=d},Zi=(e,t,n)=>{const o=e.attrIndex(t),i=[t,n];o<0?e.attrPush(i):(e.attrs=e.attrs||[],e.attrs[o]=i)},wu=e=>e.type==="inline",Au=e=>e.type==="paragraph_open",Eu=e=>e.type==="list_item_open",Fu=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,Tu=(e,t)=>wu(e[t])&&Au(e[t-1])&&Eu(e[t-2])&&Fu(e[t]),Du=(e,t)=>{const n=e[t].level-1;for(let o=t-1;o>=0;o--)if(e[o].level===n)return o;return-1},Su=e=>{const t=new e("html_inline","",0);return t.content="<label>",t},$u=e=>{const t=new e("html_inline","",0);return t.content="</label>",t},Iu=(e,t,n)=>{const o=new n("html_inline","",0);return o.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",o.attrs=[{for:t}],o},Lu=(e,t,n)=>{const o=new t("html_inline","",0),i=n.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?o.content='<input class="task-list-item-checkbox"'+i+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(o.content='<input class="task-list-item-checkbox" checked=""'+i+'type="checkbox">'),o},Mu=(e,t,n)=>{if(e.children=e.children||[],e.children.unshift(Lu(e,t,n)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),n.label)if(n.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(Iu(e.content,o,t))}else e.children.unshift(Su(t)),e.children.push($u(t))},zu=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",n=>{const o=n.tokens;for(let i=2;i<o.length;i++)Tu(o,i)&&(Mu(o[i],n.Token,t),Zi(o[i-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Zi(o[Du(o,i-2)],"class","contains-task-list"))})},Ru=e=>{e.core.ruler.push("init-line-number",t=>(t.tokens.forEach(n=>{n.map&&(n.attrs||(n.attrs=[]),n.attrs.push(["data-line",n.map[0].toString()]))}),!0))},Bu=(e,t)=>{const{editorConfig:n,markdownItConfig:o,markdownItPlugins:i,editorExtensions:l}=ie,r=R("editorId"),s=R("language"),a=R("usedLanguageText"),c=R("showCodeRowNumber"),d=R("theme"),u=R("customIcon"),m=R("rootRef"),v=W([]);let p=()=>{};const w=mu(e),C=gu(e),{reRenderRef:x,replaceMermaid:b}=pu(e),_=Le({html:!0,breaks:!0,linkify:!0});o(_,{editorId:r});const y=[{type:"image",plugin:wr,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:yu,options:{}},{type:"taskList",plugin:zu,options:{}},{type:"heading",plugin:Cu,options:{mdHeadingId:e.mdHeadingId,headsRef:v}},{type:"code",plugin:xu,options:{editorId:r,usedLanguageTextRef:a,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:u}},{type:"sub",plugin:Ar,options:{}},{type:"sup",plugin:Er,options:{}}];e.noKatex||y.push({type:"katex",plugin:ku,options:{katexRef:C}}),e.noMermaid||y.push({type:"mermaid",plugin:vu,options:{themeRef:d}}),i(y,{editorId:r}).forEach(z=>{_.use(z.plugin,z.options)});const k=_.options.highlight;_.set({highlight:(z,N,te)=>{if(k){const fe=k(z,N,te);if(fe)return fe}let U;!e.noHighlight&&w.value?w.value.getLanguage(N)?U=w.value.highlight(z,{language:N,ignoreIllegals:!0}).value:U=w.value.highlightAuto(z).value:U=_.utils.escapeHtml(z);const se=c?cu(U.replace(/^\n+|\n+$/g,""),z.replace(/^\n+|\n+$/g,"")):`<span class="${f}-code-block">${U.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${N}" language=${N}>${se}</code></pre>`}}),Ru(_);const A=W(`_article-key_${Bn()}`),$=W(e.sanitize(_.render(e.modelValue))),D=()=>{F.emit(r,Jt,$.value),e.onHtmlChanged($.value),e.onGetCatalog(v.value),F.emit(r,$t,v.value),Ve(()=>{b().then(()=>{var z,N;(z=l.mermaid)!=null&&z.enableZoom&&(p(),p=Fi((N=m.value)==null?void 0:N.querySelectorAll(`#${r} p.${f}-mermaid`),{customIcon:u.value}))})})},S=()=>{v.value=[],$.value=e.sanitize(_.render(e.modelValue)),D()},L=de(()=>(e.noKatex||C.value)&&(e.noHighlight||w.value));let H=-1;return B([je(e,"modelValue"),L,x,s],()=>{H=window.setTimeout(()=>{S()},t?0:n.renderDelay)}),B(()=>e.setting.preview,()=>{e.setting.preview&&Ve(()=>{b().then(()=>{var z,N;(z=l.mermaid)!=null&&z.enableZoom&&(p(),p=Fi((N=m.value)==null?void 0:N.querySelectorAll(`#${r} p.${f}-mermaid`),{customIcon:u.value}))}),F.emit(r,$t,v.value)})}),Q(D),Q(()=>{F.on(r,{name:$l,callback(){F.emit(r,$t,v.value)}}),F.on(r,{name:Jn,callback:()=>{A.value=`_article-key_${Bn()}`,S()}})}),ct(()=>{p(),clearTimeout(H)}),{html:$,key:A}},Xi={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},Ou=(e,t)=>{const n=R("editorId"),o=R("rootRef");let i=()=>{};const l=()=>{if(!o.value)return!1;const r=o.value.querySelectorAll(".task-list-item.enabled"),s=a=>{var c;a.preventDefault();const d=a.target.checked?"unChecked":"checked",u=(c=a.target.parentElement)==null?void 0:c.dataset.line;if(!u)return;const m=Number(u),v=e.modelValue.split(`
`),p=v[Number(m)].replace(Xi[d].regexp,Xi[d].value);e.previewOnly?(v[Number(m)]=p,e.onChange(v.join(`
`))):F.emit(n,Ll,m+1,p)};r.forEach(a=>{a.addEventListener("click",s)}),i=()=>{r.forEach(a=>{a.removeEventListener("click",s)})}};ct(()=>{i()}),B([t],()=>{i(),Ve(l)},{immediate:!0})},Pu=(e,t,n)=>{const o=()=>{Ve(()=>{var l;(l=e.onRemount)==null||l.call(e)})},i=l=>{l&&o()};B([t,n],o),B(()=>e.setting.preview,i),B(()=>e.setting.htmlPreview,i),Q(o)},Ql={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function}},Hu={...Ql,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String},catalogMaxDepth:{type:Number}},Nu=e=>{const n=new DOMParser().parseFromString(e,"text/html");return Array.from(n.body.childNodes)},ju=(e,t)=>{const n=[],o=[];if(e.forEach((i,l)=>{const r=t[l];if(!r){n.push({index:l,newNode:i});return}(i.nodeType!==r.nodeType||i.textContent!==r.textContent||i.nodeType===1&&i.outerHTML!==r.outerHTML)&&n.push({index:l,newNode:i})}),t.length>e.length)for(let i=e.length;i<t.length;i++)o.push(t[i]);return{updates:n,deletes:o}},Vu=Y({name:"UpdateOnDemand",props:{html:{type:String,required:!0}},setup(e){const t=R("editorId"),n=R("previewTheme"),o=R("showCodeRowNumber"),i=W(),l=e.html,r=(s,a)=>{i.value&&(a.forEach(c=>{c.remove()}),s.forEach(({index:c,newNode:d})=>{var u,m,v;const p=(u=i.value)==null?void 0:u.childNodes[c];p?(v=i.value)==null||v.replaceChild(d.cloneNode(!0),p):(m=i.value)==null||m.appendChild(d.cloneNode(!0))}))};return B(()=>e.html,s=>{var a;const c=Nu(s),d=Array.from(((a=i.value)==null?void 0:a.childNodes)||[]),{updates:u,deletes:m}=ju(c,d);r(u,m)}),()=>g("div",{id:`${t}-preview`,class:[`${f}-preview`,`${n==null?void 0:n.value}-theme`,o&&`${f}-scrn`],innerHTML:l,ref:i},null)}}),er=Y({name:"ContentPreview",props:Ql,setup(e){const t=R("editorId"),{html:n,key:o}=Bu(e,e.previewOnly);return hu(e,n,o),fu(e,n),Ou(e,n),Pu(e,n,o),()=>g(Pt,null,[e.setting.preview&&g("div",{id:`${t}-preview-wrapper`,class:`${f}-preview-wrapper`,key:"content-preview-wrapper"},[g(Vu,{key:o.value,html:n.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&g("div",{id:`${t}-html-wrapper`,class:`${f}-preview-wrapper`,key:"html-preview-wrapper"},[g("div",{class:`${f}-html`},[n.value])])])}}),Wu=(e,t,n)=>{const{editorId:o}=n,i=_e({buildFinished:!1,html:""});B(()=>e.modelValue,()=>{i.buildFinished=!1}),Q(()=>{F.on(o,{name:Jt,callback(l){i.buildFinished=!0,i.html=l}}),F.on(o,{name:vn,callback(){const l=new Promise(r=>{if(i.buildFinished)r(i.html);else{const s=a=>{r(a),F.remove(o,Jt,s)};F.on(o,{name:Jt,callback:s})}});e.onSave?e.onSave(e.modelValue,l):t.emit("onSave",e.modelValue,l)}})})},tr=(e,t)=>{const n=ie.editorExtensions.highlight,o=ie.editorExtensionsAttrs.highlight,i=Yu(e);Fe("editorId",i),Fe("rootRef",t),Fe("theme",de(()=>e.theme)),Fe("language",de(()=>e.language)),Fe("highlight",de(()=>{const{js:r}=n,s={...Pn,...n.css},{js:a,css:c={}}=o||{},d=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,u=s[e.codeTheme]?s[e.codeTheme][d]:Pn.atom[d],m=s[e.codeTheme]&&c[e.codeTheme]?c[e.codeTheme][d]:c.atom?c.atom[d]:{};return{js:{src:r,...a},css:{href:u,...m}}})),Fe("showCodeRowNumber",e.showCodeRowNumber);const l=de(()=>{const r={..._i,...ie.editorConfig.languageUserDefined};return bl(Cr(_i["en-US"]),r[e.language]||{})});return Fe("usedLanguageText",l),Fe("previewTheme",de(()=>e.previewTheme)),Fe("customIcon",de(()=>e.customIcon)),{editorId:i}},Uu=(e,t)=>(Fe("tabWidth",e.tabWidth),Fe("disabled",de(()=>e.disabled)),tr(e,t)),qu=e=>{const{noPrettier:t,noUploadImg:n}=e,{editorExtensions:o,editorExtensionsAttrs:i}=ie,l=t||o.prettier.prettierInstance,r=t||o.prettier.parserMarkdownInstance,s=n||o.cropper.instance;Q(()=>{if(!s){const{js:a={},css:c={}}=i.cropper||{};$e("link",{...c,rel:"stylesheet",href:o.cropper.css,id:Ie.croppercss}),$e("script",{...a,src:o.cropper.js,id:Ie.cropperjs})}if(!l){const{standaloneJs:a={}}=i.prettier||{};$e("script",{...a,src:o.prettier.standaloneJs,id:Ie.prettier})}if(!r){const{parserMarkdownJs:a={}}=i.prettier||{};$e("script",{...a,src:o.prettier.parserMarkdownJs,id:Ie.prettierMD})}})},Gu=(e,t,n)=>{const{editorId:o}=n;Q(()=>{F.on(o,{name:ot,callback:i=>{var l;(l=e.onError)==null||l.call(e,i),t.emit("onError",i)}})})},Zu=(e,t,n)=>{const{editorId:o}=n,i=_e({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),l=_e({...i}),r=(c,d)=>{const u=d===void 0?!i[c]:d;switch(c){case"preview":{i.htmlPreview=!1,i.previewOnly=!1;break}case"htmlPreview":{i.preview=!1,i.previewOnly=!1;break}case"previewOnly":{u?!i.preview&&!i.htmlPreview&&(i.preview=!0):(l.preview||(i.preview=!1),l.htmlPreview||(i.htmlPreview=!1));break}}l[c]=u,i[c]=u};let s="";const a=()=>{i.pageFullscreen||i.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=s};return B(()=>[i.pageFullscreen,i.fullscreen],a),Q(()=>{F.on(o,{name:bn,callback(c,d){const u=m=>{F.emit(o,q,"image",{desc:"",urls:m}),d==null||d()};e.onUploadImg?e.onUploadImg(c,u):t.emit("onUploadImg",c,u)}}),s=document.body.style.overflow,a()}),[i,r]},Xu=(e,t)=>{const{editorId:n}=t,o=W(!1);return Q(()=>{F.on(n,{name:Yn,callback:i=>{i===void 0?o.value=!o.value:o.value=i}})}),o},Ku=(e,t,n)=>{const{editorId:o,catalogVisible:i,setting:l,updateSetting:r,codeRef:s}=n;B(()=>l.pageFullscreen,c=>{F.emit(o,ki,c)}),B(()=>l.fullscreen,c=>{F.emit(o,yi,c)}),B(()=>l.preview,c=>{F.emit(o,Ci,c)}),B(()=>l.previewOnly,c=>{F.emit(o,xi,c)}),B(()=>l.htmlPreview,c=>{F.emit(o,wi,c)}),B(i,c=>{F.emit(o,Ai,c)});const a={on(c,d){switch(c){case"pageFullscreen":{F.on(o,{name:ki,callback(u){d(u)}});break}case"fullscreen":{F.on(o,{name:yi,callback(u){d(u)}});break}case"preview":{F.on(o,{name:Ci,callback(u){d(u)}});break}case"previewOnly":{F.on(o,{name:xi,callback(u){d(u)}});break}case"htmlPreview":{F.on(o,{name:wi,callback(u){d(u)}});break}case"catalog":{F.on(o,{name:Ai,callback(u){d(u)}});break}}},togglePageFullscreen(c){r("pageFullscreen",c)},toggleFullscreen(c){F.emit(o,Tl,c)},togglePreview(c){r("preview",c)},togglePreviewOnly(c){r("previewOnly",c)},toggleHtmlPreview(c){r("htmlPreview",c)},toggleCatalog(c){F.emit(o,Yn,c)},triggerSave(){F.emit(o,vn)},insert(c){F.emit(o,q,"universal",{generate:c})},focus(c){var d;(d=s.value)==null||d.focus(c)},rerender(){F.emit(o,Jn)},getSelectedText(){var c;return(c=s.value)==null?void 0:c.getSelectedText()},resetHistory(){var c;(c=s.value)==null||c.resetHistory()},domEventHandlers(c){F.emit(o,Il,c)},execCommand(c){F.emit(o,q,c)},getEditorView(){var c;return(c=s.value)==null?void 0:c.getEditorView()}};t.expose(a)},Yu=e=>{const t=xr();return e.id||e.editorId||`${f}-${t}`},Ju=e=>e,nr={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:Ju},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0}},Qu={...nr,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:El},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:Fl},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String,default:"fixed"},catalogMaxDepth:{type:Number,default:void 0},insertLinkDirect:{type:Boolean,default:!1}},or=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"],ed=[...or,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],td=(e,t,n)=>{const{editorId:o}=n,i={rerender(){F.emit(o,Jn)}};t.expose(i)},ln=Y({name:"MdPreview",props:nr,emits:or,setup(e,t){const{noKatex:n,noMermaid:o,noHighlight:i}=e,l=W(),{editorId:r}=tr(e,l);return td(e,t,{editorId:r}),ct(()=>{F.clear(r)}),()=>g("div",{id:r,class:[f,e.class,e.theme==="dark"&&`${f}-dark`,`${f}-previewOnly`],style:e.style,ref:l},[g(er,{modelValue:e.modelValue,onChange:s=>{var a;(a=e.onChange)==null||a.call(e,s),t.emit("onChange",s),t.emit("update:modelValue",s)},onHtmlChanged:s=>{var a;(a=e.onHtmlChanged)==null||a.call(e,s),t.emit("onHtmlChanged",s)},onGetCatalog:s=>{var a;(a=e.onGetCatalog)==null||a.call(e,s),t.emit("onGetCatalog",s)},mdHeadingId:e.mdHeadingId,noMermaid:o,sanitize:e.sanitize,noKatex:n,formatCopiedText:e.formatCopiedText,noHighlight:i,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var s;(s=e.onRemount)==null||s.call(e),t.emit("onRemount")}},null)])}});ln.install=e=>(e.component(ln.name,ln),e);const nd=()=>g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[g("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),g("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),od={bold:ls,underline:is,italic:os,"strike-through":ns,title:ts,sub:es,sup:Qr,quote:Jr,"unordered-list":Yr,"ordered-list":Kr,task:Xr,"code-row":Zr,code:gi,link:Gr,image:qr,table:Ur,revoke:Wr,next:Vr,save:jr,prettier:gi,minimize:Nr,maximize:Hr,"fullscreen-exit":Pr,fullscreen:Or,"preview-only":Br,preview:Rr,"preview-html":zr,catalog:Mr,github:nd,mermaid:Lr,formula:Ir,close:$r,delete:Sr,upload:Dr},id=Y({name:`${f}-icon-set`,props:{name:{type:String,default:""}},setup(e){return()=>Cl(od[e.name],{class:`${f}-icon`})}}),V=Y({name:`${f}-icon`,props:{name:{type:String,default:""}},setup(e){const t=R("customIcon");return()=>{const n=t.value[e.name];return typeof n=="object"?typeof n.component=="object"?Cl(n.component,n.props):g("span",{innerHTML:n.component},null):g(id,{name:e.name},null)}}}),ld={title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},bt=Y({name:"MdModal",props:ld,emits:["onClose"],setup(e,t){const n=R("theme"),o=R("rootRef"),i=W(e.visible),l=W([`${f}-modal`]),r=W(),s=W(),a=W(),c=at();let d=()=>{};const u=_e({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),m=de(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});B(()=>e.isFullscreen,w=>{w?d():Ve(()=>{d=Ei(s.value,(C,x)=>{u.initPos.left=C+"px",u.initPos.top=x+"px"})})}),B(()=>e.visible,w=>{w?(u.maskStyle.zIndex=ie.editorConfig.zIndex+Ui(),u.modalStyle.zIndex=ie.editorConfig.zIndex+Ui(),l.value.push("zoom-in"),i.value=w,Ve(()=>{const C=r.value.offsetWidth/2,x=r.value.offsetHeight/2,b=document.documentElement.clientWidth/2,_=document.documentElement.clientHeight/2;u.initPos.left=b-C+"px",u.initPos.top=_-x+"px",e.isFullscreen||(d=Ei(s.value,(y,k)=>{u.initPos.left=y+"px",u.initPos.top=k+"px"}))}),setTimeout(()=>{l.value=l.value.filter(C=>C!=="zoom-in")},140)):(l.value.push("zoom-out"),d(),setTimeout(()=>{l.value=l.value.filter(C=>C!=="zoom-out"),i.value=w},130))});const v=de(()=>({display:i.value?"block":"none"})),p=de(()=>typeof e.style=="string"?[e.style,v.value].join("; "):e.style instanceof Object?{...v.value,...e.style}:v.value);return Q(()=>{var w;const C=(w=o.value)==null?void 0:w.getRootNode();a.value=C instanceof Document?document.body:C}),()=>{const w=ke({ctx:t}),C=ke({props:e,ctx:t},"title");return a.value?g(rs,{to:a.value},{default:()=>[g("div",{ref:c,class:`${f}-modal-container`,"data-theme":n.value},[g("div",{class:e.class,style:p.value},[e.showMask&&g("div",{class:`${f}-modal-mask`,style:u.maskStyle,onClick:()=>{var x;(x=e.onClose)==null||x.call(e),t.emit("onClose")}},null),g("div",{class:l.value,style:{...u.modalStyle,...u.initPos,...m.value},ref:r},[g("div",{class:`${f}-modal-header`,ref:s},[C||""]),g("div",{class:`${f}-modal-body`},[w]),g("div",{class:`${f}-modal-func`},[e.showAdjust&&g("div",{class:`${f}-modal-adjust`,onClick:x=>{x.stopPropagation(),e.isFullscreen?u.initPos=u.historyPos:(u.historyPos=u.initPos,u.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[g(V,{name:e.isFullscreen?"minimize":"maximize"},null)]),g("div",{class:`${f}-modal-close`,onClick:x=>{var b;x.stopPropagation(),(b=e.onClose)==null||b.call(e),t.emit("onClose")}},[g(V,{name:"close"},null)])])])])])]}):""}}});bt.install=e=>(e.component(bt.name,bt),e);const rd=`.${f}-preview > [data-line]`,gt=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),sd=(e,t)=>{const n=yl(()=>{e.removeEventListener("scroll",o),e.addEventListener("scroll",o),t.removeEventListener("scroll",o),t.addEventListener("scroll",o)},50),o=i=>{const l=e.clientHeight,r=t.clientHeight,s=e.scrollHeight,a=t.scrollHeight,c=(s-l)/(a-r);i.target===e?(t.removeEventListener("scroll",o),t.scrollTo({top:e.scrollTop/c}),n()):(e.removeEventListener("scroll",o),e.scrollTo({top:t.scrollTop*c}),n())};return[()=>{n().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",o),t.removeEventListener("scroll",o)}]},ad=(e,t,n)=>{const{view:o}=n,i=xl(),l=x=>o.lineBlockAt(o.state.doc.line(x+1).from).top,r=x=>o.lineBlockAt(o.state.doc.line(x+1).from).bottom;let s=[],a=[],c=[];const d=()=>{s=[],a=Array.from(t.querySelectorAll(rd)),c=a.map(k=>Number(k.dataset.line));const x=[...c],{lines:b}=o.state.doc;let _=x.shift()||0,y=x.shift()||b;for(let k=0;k<b;k++)k===y&&(_=k,y=x.shift()||b),s.push({start:_,end:y-1})},u=(x,b)=>{let _=1;for(let y=a.length-1;y-1>=0;y--){const k=a[y],A=a[y-1];if(k.offsetTop+k.offsetHeight>b&&A.offsetTop<b){_=Number(A.dataset.line);break}}for(let y=s.length-1;y>=0;y--){const k=r(s[y].end),A=l(s[y].start);if(k>x&&A<=x){_=_<s[y].start?_:s[y].start;break}}return _};let m=0,v=0;const p=()=>{var x,b,_;if(v!==0)return!1;m++;const{scrollDOM:y,contentHeight:k}=o;let A=gt(t,"padding-top");const $=o.lineBlockAtHeight(y.scrollTop),{number:D}=o.state.doc.lineAt($.from),S=s[D-1];if(!S)return!1;let L=1;const H=t.querySelector(`[data-line="${S.start}"]`)||((x=t.firstElementChild)==null?void 0:x.firstElementChild),z=t.querySelector(`[data-line="${S.end+1}"]`)||((b=t.lastElementChild)==null?void 0:b.lastElementChild),N=y.scrollHeight-y.clientHeight,te=t.scrollHeight-t.clientHeight;let U=l(S.start),se=r(S.end),fe=H.offsetTop,oe=z.offsetTop-fe;U===0&&(fe=0,H===z?(A=0,se=k-y.offsetHeight,oe=te):oe=z.offsetTop),L=(y.scrollTop-U)/(se-U);const ae=z==((_=t.lastElementChild)==null?void 0:_.lastElementChild)?z.offsetTop+z.clientHeight:z.offsetTop;if(se>=N||ae>te){const ye=u(N,te);U=l(ye),L=(y.scrollTop-U)/(N-U);const ge=t.querySelector(`[data-line="${ye}"]`);U>0&&ge&&(fe=ge.offsetTop),oe=te-fe+gt(t,"padding-top")}const De=fe-A+oe*L;i(t,De,()=>{m--})},w=()=>{var x,b,_,y,k,A;if(m!==0)return;v++;const{scrollDOM:$}=o,D=t.scrollTop,S=t.scrollHeight,L=$.scrollHeight-$.clientHeight,H=t.scrollHeight-t.clientHeight;let z=(x=t.firstElementChild)==null?void 0:x.firstElementChild,N=(b=t.firstElementChild)==null?void 0:b.lastElementChild;if(c.length>0){let ge=Math.ceil(c[c.length-1]*(D/S)),ne=c.findLastIndex(he=>he<=ge);ne=ne===-1?0:ne,ge=c[ne];for(let he=ne;he>=0&&he<c.length;)if(a[he].offsetTop>D){if(he-1>=0){he--;continue}ge=-1,ne=he;break}else{if(he+1<c.length&&a[he+1].offsetTop<D){he++;continue}ge=c[he],ne=he;break}switch(ne){case-1:{z=(_=t.firstElementChild)==null?void 0:_.firstElementChild,N=a[ne];break}case c.length-1:{z=a[ne],N=(y=t.firstElementChild)==null?void 0:y.lastElementChild;break}default:z=a[ne],N=a[ne+1===a.length?ne:ne+1]}}let te=z===((k=t.firstElementChild)==null?void 0:k.firstElementChild)?0:z.offsetTop-gt(z,"margin-top"),U=N.offsetTop,se=0;const{start:fe,end:oe}=s[Number(z.dataset.line||0)];let ae=l(fe);const De=l(oe+1===o.state.doc.lines?oe:oe+1);let ye=0;if(De>L||N.offsetTop+N.offsetHeight>H){const ge=u(L,H),ne=t.querySelector(`[data-line="${ge}"]`);te=ne?ne.offsetTop-gt(ne,"margin-top"):te,ae=l(ge),se=(D-te)/(H-te),ye=L-ae}else z===((A=t.firstElementChild)==null?void 0:A.firstElementChild)?(z===N&&(U=N.offsetTop+N.offsetHeight+ +getComputedStyle(N).marginBottom.replace("px","")),ye=De,se=Math.max(D/U,0)):(se=Math.max((D-te)/(U-te),0),ye=De-ae);i(e,ae+ye*se,()=>{v--})},C=x=>{var b;const{scrollDOM:_,contentHeight:y}=o,k=_.clientHeight;if(y<=k||t.firstElementChild.clientHeight<=t.clientHeight||o.state.doc.lines<=((b=s[s.length-1])==null?void 0:b.end))return!1;x.target===e?p():w()};return[()=>{d(),e.addEventListener("scroll",C),t.addEventListener("scroll",C),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",C),t.removeEventListener("scroll",C)}]},cd={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},ir=Y({props:cd,setup(e){const t=R("scrollElementRef"),n=R("roorNodeRef"),o=W();return B(()=>e.tocItem.active,i=>{i&&e.onActive(e.tocItem,o.value)}),Q(()=>{e.tocItem.active&&e.onActive(e.tocItem,o.value)}),()=>{const{tocItem:i,mdHeadingId:l,onClick:r,scrollElementOffsetTop:s}=e;return g("div",{ref:o,class:[`${f}-catalog-link`,i.active&&`${f}-catalog-active`],onClick:a=>{if(a.stopPropagation(),r(a,i),a.defaultPrevented)return;const c=l(i.text,i.level,i.index),d=n.value.getElementById(c),u=t.value;if(d&&u){let m=d.offsetParent,v=d.offsetTop;if(u.contains(m))for(;m&&u!=m;)v+=m==null?void 0:m.offsetTop,m=m==null?void 0:m.offsetParent;const p=d.previousElementSibling;let w=0;p||(w=gt(d,"margin-top")),u==null||u.scrollTo({top:v-s-w,behavior:"smooth"})}}},[g("span",{title:i.text},[i.text]),i.children&&i.children.length>0&&g("div",{class:`${f}-catalog-wrapper`},[i.children.map(a=>g(ir,{mdHeadingId:l,key:`${i.text}-link-${a.level}-${a.text}`,tocItem:a,onActive:e.onActive,onClick:r,scrollElementOffsetTop:s},null))])])}}}),ud={editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1},syncWith:{type:String,default:"preview"},catalogMaxDepth:{type:Number,default:void 0}},It=Y({name:"MdCatalog",props:ud,emits:["onClick","onActive"],setup(e,t){const n=e.editorId,o=`#${n}-preview-wrapper`,i=_e({list:[],show:!1,scrollElement:e.scrollElement||o}),l=at(),r=W(),s=W(),a=W(),c=W(),d=at(),u=W({});Fe("scrollElementRef",s),Fe("roorNodeRef",c);const m=de(()=>{const _=[];return i.list.forEach((y,k)=>{if(e.catalogMaxDepth&&y.level>e.catalogMaxDepth)return;const{text:A,level:$,line:D}=y,S={level:$,text:A,line:D,index:k+1,active:l.value===y};if(_.length===0)_.push(S);else{let L=_[_.length-1];if(S.level>L.level)for(let H=L.level+1;H<=6;H++){const{children:z}=L;if(!z){L.children=[S];break}if(L=z[z.length-1],S.level<=L.level){z.push(S);break}}else _.push(S)}}),_}),v=()=>{var _;if(i.scrollElement instanceof HTMLElement)return i.scrollElement;let y=document;return(i.scrollElement===o||e.isScrollElementInShadow)&&(y=(_=r.value)==null?void 0:_.getRootNode()),y.querySelector(i.scrollElement)},p=_=>{if(_.length===0)return l.value=void 0,i.list=[],!1;const{activeHead:y}=_.reduce((k,A,$)=>{var D;let S=0;if(e.syncWith==="preview"){const L=(D=c.value)==null?void 0:D.getElementById(e.mdHeadingId(A.text,A.level,$+1));L instanceof HTMLElement&&(S=uu(L,s.value))}else{const L=d.value;if(L){const H=L.lineBlockAt(L.state.doc.line(A.line+1).from).top,z=L.scrollDOM.scrollTop;S=H-z}}return S<e.offsetTop&&S>k.minTop?{activeHead:A,minTop:S}:k},{activeHead:_[0],minTop:Number.MIN_SAFE_INTEGER});l.value=y,i.list=_},w=(_,y)=>{var k;u.value.top=y.offsetTop+gt(y,"padding-top")+"px",(k=e.onActive)==null||k.call(e,_,y),t.emit("onActive",_,y)},C=()=>{p(i.list)},x=_=>{var y,k,A;if((y=a.value)==null||y.removeEventListener("scroll",C),e.syncWith==="editor")a.value=(k=d.value)==null?void 0:k.scrollDOM;else{const $=v();s.value=$,a.value=$===document.documentElement?document:$}p(_),(A=a.value)==null||A.addEventListener("scroll",C)},b=_=>{d.value=_};return B([()=>e.syncWith,d,()=>e.catalogMaxDepth],()=>{x(i.list)}),Q(()=>{c.value=r.value.getRootNode(),F.on(n,{name:$t,callback:x}),F.on(n,{name:un,callback:b}),F.emit(n,$l),F.emit(n,Ml)}),ct(()=>{var _;F.remove(n,$t,x),F.remove(n,un,b),(_=a.value)==null||_.removeEventListener("scroll",C)}),()=>g("div",{class:[`${f}-catalog`,e.theme==="dark"&&`${f}-catalog-dark`,e.class||""],ref:r},[m.value.length>0&&g(Pt,null,[g("div",{class:`${f}-catalog-indicator`,style:u.value},null),g("div",{class:`${f}-catalog-container`},[m.value.map(_=>g(ir,{mdHeadingId:e.mdHeadingId,tocItem:_,key:`link-${_.level}-${_.text}`,onActive:w,onClick:(y,k)=>{var A;(A=e.onClick)==null||A.call(e,y,k),t.emit("onClick",y,k)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});It.install=e=>(e.component(It.name,It),e);const dd={title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},rn=Y({name:"NormalToolbar",props:dd,emits:["onClick"],setup(e,t){return()=>{const n=ke({props:e,ctx:t},"trigger"),o=ke({props:e,ctx:t});return g("div",{class:[`${f}-toolbar-item`,e.disabled&&`${f}-disabled`],title:e.title,onClick:i=>{var l;e.disabled||((l=e.onClick)==null||l.call(e,i),t.emit("onClick",i))}},[o||n])}}});rn.install=e=>(e.component(rn.name,rn),e);function fd(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ss(e)}const hd={title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},sn=Y({name:"ModalToolbar",props:hd,emits:["onClick","onClose","onAdjust"],setup(e,t){return()=>{const n=ke({props:e,ctx:t},"trigger"),o=ke({props:e,ctx:t},"modalTitle"),i=ke({props:e,ctx:t});return g(Pt,null,[g("div",{class:[`${f}-toolbar-item`,e.disabled&&`${f}-disabled`],title:e.title,onClick:()=>{var l;e.disabled||((l=e.onClick)==null||l.call(e),t.emit("onClick"))}},[n]),g(bt,{style:e.style,class:e.class,width:e.width,height:e.height,title:o,visible:e.visible,showMask:e.showMask,onClose:()=>{var l;(l=e.onClose)==null||l.call(e),t.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:l=>{var r;(r=e.onAdjust)==null||r.call(e,l),t.emit("onAdjust",l)}},fd(i)?i:{default:()=>[i]})])}}});sn.install=e=>(e.component(sn.name,sn),e);var md=Object.defineProperty,pd=(e,t,n)=>t in e?md(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xe=(e,t,n)=>pd(e,typeof t!="symbol"?t+"":t,n);const gd=Y({name:`${f}-divider`,setup(){return()=>g("div",{class:`${f}-divider`},null)}}),vd={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String},insertLinkDirect:{type:Boolean}},bd=e=>{const t=R("editorId"),{editorExtensions:n,editorExtensionsAttrs:o}=ie;let i=n.screenfull.instance;const l=W(!1),r=c=>{if(!i){F.emit(t,ot,{name:"fullscreen",message:"fullscreen is undefined"});return}i.isEnabled?(l.value=!0,(c===void 0?!i.isFullscreen:c)?i.request():i.exit()):console.error("browser does not support screenfull!")},s=()=>{i&&i.isEnabled&&i.on("change",()=>{(l.value||e.setting.fullscreen)&&(l.value=!1,e.updateSetting("fullscreen"))})},a=()=>{i=window.screenfull,s()};return Q(()=>{var c;s(),i||$e("script",{...(c=o.screenfull)==null?void 0:c.js,src:n.screenfull.js,id:Ie.screenfull,onload:a},"screenfull")}),Q(()=>{F.on(t,{name:Tl,callback:r})}),{fullscreenHandler:r}},_d={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},kd=Y({name:"TableShape",props:_d,setup(e){const t=_e({x:-1,y:-1}),n=de(()=>JSON.stringify(e.tableShape)),o=()=>{const l=[...JSON.parse(n.value)];return(!l[2]||l[2]<l[0])&&(l[2]=l[0]),(!l[3]||l[3]<l[3])&&(l[3]=l[1]),l},i=W(o());return B([n],()=>{i.value=o()}),()=>g("div",{class:`${f}-table-shape`,onMouseleave:()=>{i.value=o(),t.x=-1,t.y=-1}},[new Array(i.value[1]).fill("").map((l,r)=>g("div",{class:`${f}-table-shape-row`,key:`table-shape-row-${r}`},[new Array(i.value[0]).fill("").map((s,a)=>g("div",{class:`${f}-table-shape-col`,key:`table-shape-col-${a}`,onMouseenter:()=>{t.x=r,t.y=a,a+1===i.value[0]&&a+1<i.value[2]?i.value[0]++:a+2<i.value[0]&&i.value[0]>e.tableShape[0]&&i.value[0]--,r+1===i.value[1]&&r+1<i.value[3]?i.value[1]++:r+2<i.value[1]&&i.value[1]>e.tableShape[1]&&i.value[1]--},onClick:()=>{e.onSelected(t)}},[g("div",{class:[`${f}-table-shape-col-default`,r<=t.x&&a<=t.y&&`${f}-table-shape-col-include`]},null)]))]))])}}),yd={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Cd=Y({name:`${f}-modal-link`,props:yd,setup(e){const t=R("usedLanguageText"),n=R("editorId"),o=de(()=>{var l,r;switch(e.type){case"link":return(l=t.value.linkModalTips)==null?void 0:l.linkTitle;case"image":return(r=t.value.linkModalTips)==null?void 0:r.imageTitle;default:return""}}),i=_e({desc:"",url:""});return B(()=>e.visible,l=>{l||setTimeout(()=>{i.desc="",i.url=""},200)}),()=>g(bt,{title:o.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var l,r,s,a,c;return[g("div",{class:`${f}-form-item`},[g("label",{class:`${f}-label`,for:`link-desc-${n}`},[(l=t.value.linkModalTips)==null?void 0:l.descLabel]),g("input",{placeholder:(r=t.value.linkModalTips)==null?void 0:r.descLabelPlaceHolder,class:`${f}-input`,id:`link-desc-${n}`,type:"text",value:i.desc,onChange:d=>{i.desc=d.target.value},autocomplete:"off"},null)]),g("div",{class:`${f}-form-item`},[g("label",{class:`${f}-label`,for:`link-url-${n}`},[(s=t.value.linkModalTips)==null?void 0:s.urlLabel]),g("input",{placeholder:(a=t.value.linkModalTips)==null?void 0:a.urlLabelPlaceHolder,class:`${f}-input`,id:`link-url-${n}`,type:"text",value:i.url,onChange:d=>{i.url=d.target.value},autocomplete:"off"},null)]),g("div",{class:`${f}-form-item`},[g("button",{class:[`${f}-btn`,`${f}-btn-row`],type:"button",onClick:()=>{e.onOk(i),i.desc="",i.url=""}},[(c=t.value.linkModalTips)==null?void 0:c.buttonOK])])]}})}}),xd={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},wd=Y({name:`${f}-modal-clip`,props:xd,setup(e){const t=R("usedLanguageText"),n=R("editorId"),o=R("rootRef");let i=ie.editorExtensions.cropper.instance;const l=W(),r=W(),s=W(),a=_e({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let c=null;B(()=>e.visible,()=>{e.visible&&!a.cropperInited&&(i=i||window.Cropper,l.value.onchange=()=>{if(!i){F.emit(n,ot,{name:"Cropper",message:"Cropper is undefined"});return}const u=l.value.files||[];if(a.imgSelected=!0,(u==null?void 0:u.length)>0){const m=new FileReader;m.onload=v=>{a.imgSrc=v.target.result},m.readAsDataURL(u[0])}})}),B(()=>[a.imgSelected],()=>{s.value.style=""}),B([je(()=>a.isFullscreen),je(()=>a.imgSrc)],()=>{a.imgSrc&&Ve(()=>{c==null||c.destroy(),s.value.style="",r.value&&(c=new i(r.value,{viewMode:2,preview:o.value.getRootNode().querySelector(`.${f}-clip-preview-target`)}))})});const d=()=>{c.clear(),c.destroy(),c=null,l.value.value="",a.imgSelected=!1};return()=>{var u;return g(bt,{class:`${f}-modal-clip`,title:(u=t.value.clipModalTips)==null?void 0:u.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:a.isFullscreen,onAdjust:m=>{a.isFullscreen=m},width:"668px",height:"421px"},{default:()=>{var m,v,p;return[g("div",{class:`${f}-form-item ${f}-clip`},[g("div",{class:`${f}-clip-main`},[a.imgSelected?g("div",{class:`${f}-clip-cropper`},[g("img",{src:a.imgSrc,ref:r,style:{display:"none"},alt:""},null),g("div",{class:`${f}-clip-delete`,onClick:d},[g(V,{name:"delete"},null)])]):g("div",{class:`${f}-clip-upload`,onClick:()=>{l.value.click()},role:"button",tabindex:"0","aria-label":(m=t.value.imgTitleItem)==null?void 0:m.upload},[g(V,{name:"upload"},null)])]),g("div",{class:`${f}-clip-preview`},[g("div",{class:`${f}-clip-preview-target`,ref:s},null)])]),g("div",{class:`${f}-form-item`},[g("button",{class:`${f}-btn`,type:"button",onClick:()=>{if(c){const w=c.getCroppedCanvas();F.emit(n,bn,[au(w.toDataURL("image/png"))],e.onOk),d()}}},[((v=t.value.clipModalTips)==null?void 0:v.buttonUpload)||((p=t.value.linkModalTips)==null?void 0:p.buttonOK)])]),g("input",{ref:l,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),Ad={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Ed=Y({name:`${f}-modals`,props:Ad,setup(e){return()=>g(Pt,null,[g(Cd,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),g(wd,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),Fd=Y({name:"MDEditorToolbar",props:vd,setup(e){const t=R("editorId"),n=R("usedLanguageText"),o=R("theme"),i=R("previewTheme"),l=R("language"),r=R("disabled"),{fullscreenHandler:s}=bd(e),a=`${t}-toolbar-wrapper`,c=W(),d=_e({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),u=(b,_)=>{if(r!=null&&r.value)return!1;F.emit(t,q,b,_)},m=_e({type:"link",linkVisible:!1,clipVisible:!1}),v=W();Q(()=>{F.on(t,{name:Hn,callback(b){m.type=b,m.linkVisible=!0}})});const p=de(()=>{const b=e.toolbars.filter(A=>!e.toolbarsExclude.includes(A)),_=b.indexOf("="),y=_===-1?b:b.slice(0,_+1),k=_===-1?[]:b.slice(_,Number.MAX_SAFE_INTEGER);return[y,k]}),w=W(),C=()=>{F.emit(t,bn,Array.from(w.value.files||[])),w.value.value=""};Q(()=>{w.value.addEventListener("change",C)});const x=b=>{var _,y,k,A,$,D,S,L,H,z,N,te,U,se,fe,oe,ae,De,ye,ge,ne,he,wn,uo,fo,ho,mo,po,go,vo,bo,_o,ko,yo,Co,xo,wo,Ao,Eo,Fo,To,Do,So,$o,Io,Lo,Mo,zo,Ro,Bo,Oo,Po,Ho,No,jo,Vo,Wo,Uo,qo,Go,Zo,Xo,Ko,Yo,Jo,Qo,ei,ti,ni,oi,ii,li,ri,si,ai,ci,ui,di,fi,hi,mi;if(El.includes(b))switch(b){case"-":return g(gd,null,null);case"bold":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(_=n.value.toolbarTips)==null?void 0:_.bold,onClick:()=>{u("bold")}},[g(V,{name:"bold"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(y=n.value.toolbarTips)==null?void 0:y.bold])]);case"underline":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(k=n.value.toolbarTips)==null?void 0:k.underline,onClick:()=>{u("underline")}},[g(V,{name:"underline"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(A=n.value.toolbarTips)==null?void 0:A.underline])]);case"italic":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:($=n.value.toolbarTips)==null?void 0:$.italic,onClick:()=>{u("italic")}},[g(V,{name:"italic"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(D=n.value.toolbarTips)==null?void 0:D.italic])]);case"strikeThrough":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(S=n.value.toolbarTips)==null?void 0:S.strikeThrough,onClick:()=>{u("strikeThrough")}},[g(V,{name:"strike-through"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(L=n.value.toolbarTips)==null?void 0:L.strikeThrough])]);case"title":return g(pt,{relative:`#${a}`,visible:d.title,onChange:O=>{d.title=O},disabled:r==null?void 0:r.value,overlay:g("ul",{class:`${f}-menu`,onClick:()=>{d.title=!1},role:"menu"},[g("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{u("h1")},role:"menuitem",tabindex:"0"},[(H=n.value.titleItem)==null?void 0:H.h1]),g("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{u("h2")},role:"menuitem",tabindex:"0"},[(z=n.value.titleItem)==null?void 0:z.h2]),g("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{u("h3")},role:"menuitem",tabindex:"0"},[(N=n.value.titleItem)==null?void 0:N.h3]),g("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{u("h4")},role:"menuitem",tabindex:"0"},[(te=n.value.titleItem)==null?void 0:te.h4]),g("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{u("h5")},role:"menuitem",tabindex:"0"},[(U=n.value.titleItem)==null?void 0:U.h5]),g("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{u("h6")},role:"menuitem",tabindex:"0"},[(se=n.value.titleItem)==null?void 0:se.h6])])},{default:()=>{var O,me;return[g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(O=n.value.toolbarTips)==null?void 0:O.title},[g(V,{name:"title"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(me=n.value.toolbarTips)==null?void 0:me.title])])]}});case"sub":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(fe=n.value.toolbarTips)==null?void 0:fe.sub,onClick:()=>{u("sub")}},[g(V,{name:"sub"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(oe=n.value.toolbarTips)==null?void 0:oe.sub])]);case"sup":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(ae=n.value.toolbarTips)==null?void 0:ae.sup,onClick:()=>{u("sup")}},[g(V,{name:"sup"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(De=n.value.toolbarTips)==null?void 0:De.sup])]);case"quote":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(ye=n.value.toolbarTips)==null?void 0:ye.quote,onClick:()=>{u("quote")}},[g(V,{name:"quote"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(ge=n.value.toolbarTips)==null?void 0:ge.quote])]);case"unorderedList":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(ne=n.value.toolbarTips)==null?void 0:ne.unorderedList,onClick:()=>{u("unorderedList")}},[g(V,{name:"unordered-list"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(he=n.value.toolbarTips)==null?void 0:he.unorderedList])]);case"orderedList":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(wn=n.value.toolbarTips)==null?void 0:wn.orderedList,onClick:()=>{u("orderedList")}},[g(V,{name:"ordered-list"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(uo=n.value.toolbarTips)==null?void 0:uo.orderedList])]);case"task":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(fo=n.value.toolbarTips)==null?void 0:fo.task,onClick:()=>{u("task")}},[g(V,{name:"task"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(ho=n.value.toolbarTips)==null?void 0:ho.task])]);case"codeRow":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(mo=n.value.toolbarTips)==null?void 0:mo.codeRow,onClick:()=>{u("codeRow")}},[g(V,{name:"code-row"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(po=n.value.toolbarTips)==null?void 0:po.codeRow])]);case"code":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(go=n.value.toolbarTips)==null?void 0:go.code,onClick:()=>{u("code")}},[g(V,{name:"code"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(vo=n.value.toolbarTips)==null?void 0:vo.code])]);case"link":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(bo=n.value.toolbarTips)==null?void 0:bo.link,onClick:()=>{if(r!=null&&r.value)return!1;e.insertLinkDirect?u("link"):(m.type="link",m.linkVisible=!0)}},[g(V,{name:"link"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(_o=n.value.toolbarTips)==null?void 0:_o.link])]);case"image":return e.noUploadImg?g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(ko=n.value.toolbarTips)==null?void 0:ko.image,onClick:()=>{if(r!=null&&r.value)return!1;e.insertLinkDirect?u("image"):(m.type="image",m.linkVisible=!0)}},[g(V,{name:"image"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(yo=n.value.toolbarTips)==null?void 0:yo.image])]):g(pt,{relative:`#${a}`,visible:d.image,onChange:O=>{d.image=O},disabled:r==null?void 0:r.value,overlay:g("ul",{class:`${f}-menu`,onClick:()=>{d.image=!1},role:"menu"},[g("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{e.insertLinkDirect?u("image"):(m.type="image",m.linkVisible=!0)},role:"menuitem",tabindex:"0"},[(Co=n.value.imgTitleItem)==null?void 0:Co.link]),g("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{w.value.click()},role:"menuitem",tabindex:"0"},[(xo=n.value.imgTitleItem)==null?void 0:xo.upload]),g("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{m.clipVisible=!0},role:"menuitem",tabindex:"0"},[(wo=n.value.imgTitleItem)==null?void 0:wo.clip2upload])])},{default:()=>{var O,me;return[g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(O=n.value.toolbarTips)==null?void 0:O.image},[g(V,{name:"image"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(me=n.value.toolbarTips)==null?void 0:me.image])])]}});case"table":return g(pt,{relative:`#${a}`,visible:d.table,onChange:O=>{d.table=O},disabled:r==null?void 0:r.value,key:"bar-table",overlay:g(kd,{tableShape:e.tableShape,onSelected:O=>{u("table",{selectedShape:O})}},null)},{default:()=>{var O,me;return[g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(O=n.value.toolbarTips)==null?void 0:O.table},[g(V,{name:"table"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(me=n.value.toolbarTips)==null?void 0:me.table])])]}});case"revoke":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Ao=n.value.toolbarTips)==null?void 0:Ao.revoke,onClick:()=>{if(r!=null&&r.value)return!1;F.emit(t,Dl)}},[g(V,{name:"revoke"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Eo=n.value.toolbarTips)==null?void 0:Eo.revoke])]);case"next":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Fo=n.value.toolbarTips)==null?void 0:Fo.next,onClick:()=>{if(r!=null&&r.value)return!1;F.emit(t,Sl)}},[g(V,{name:"next"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(To=n.value.toolbarTips)==null?void 0:To.next])]);case"save":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Do=n.value.toolbarTips)==null?void 0:Do.save,onClick:()=>{if(r!=null&&r.value)return!1;F.emit(t,vn)}},[g(V,{name:"save"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(So=n.value.toolbarTips)==null?void 0:So.save])]);case"prettier":return e.noPrettier?"":g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:($o=n.value.toolbarTips)==null?void 0:$o.prettier,onClick:()=>{u("prettier")}},[g(V,{name:"prettier"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Io=n.value.toolbarTips)==null?void 0:Io.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&g("div",{class:[`${f}-toolbar-item`,e.setting.pageFullscreen&&`${f}-toolbar-active`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Lo=n.value.toolbarTips)==null?void 0:Lo.pageFullscreen,onClick:()=>{if(r!=null&&r.value)return!1;e.updateSetting("pageFullscreen")}},[g(V,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Mo=n.value.toolbarTips)==null?void 0:Mo.pageFullscreen])]);case"fullscreen":return g("div",{class:[`${f}-toolbar-item`,e.setting.fullscreen&&`${f}-toolbar-active`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(zo=n.value.toolbarTips)==null?void 0:zo.fullscreen,onClick:()=>{if(r!=null&&r.value)return!1;s()}},[g(V,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Ro=n.value.toolbarTips)==null?void 0:Ro.fullscreen])]);case"preview":return g("div",{class:[`${f}-toolbar-item`,e.setting.preview&&`${f}-toolbar-active`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Bo=n.value.toolbarTips)==null?void 0:Bo.preview,onClick:()=>{if(r!=null&&r.value)return!1;e.updateSetting("preview")}},[g(V,{name:"preview"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Oo=n.value.toolbarTips)==null?void 0:Oo.preview])]);case"previewOnly":return g("div",{class:[`${f}-toolbar-item`,e.setting.previewOnly&&`${f}-toolbar-active`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Po=n.value.toolbarTips)==null?void 0:Po.previewOnly,onClick:()=>{if(r!=null&&r.value)return!1;e.updateSetting("previewOnly")}},[g(V,{name:"preview-only"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Ho=n.value.toolbarTips)==null?void 0:Ho.previewOnly])]);case"htmlPreview":return g("div",{class:[`${f}-toolbar-item`,e.setting.htmlPreview&&`${f}-toolbar-active`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(No=n.value.toolbarTips)==null?void 0:No.htmlPreview,onClick:()=>{if(r!=null&&r.value)return!1;e.updateSetting("htmlPreview")}},[g(V,{name:"preview-html"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(jo=n.value.toolbarTips)==null?void 0:jo.htmlPreview])]);case"catalog":return g("div",{class:[`${f}-toolbar-item`,e.catalogVisible&&`${f}-toolbar-active`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Vo=n.value.toolbarTips)==null?void 0:Vo.catalog,onClick:()=>{if(r!=null&&r.value)return!1;F.emit(t,Yn)},key:"bar-catalog"},[g(V,{name:"catalog"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(Wo=n.value.toolbarTips)==null?void 0:Wo.catalog])]);case"github":return g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(Uo=n.value.toolbarTips)==null?void 0:Uo.github,onClick:()=>{if(r!=null&&r.value)return!1;ws("https://github.com/imzbf/md-editor-v3")}},[g(V,{name:"github"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(qo=n.value.toolbarTips)==null?void 0:qo.github])]);case"mermaid":return g(pt,{relative:`#${a}`,visible:d.mermaid,onChange:O=>{d.mermaid=O},disabled:r==null?void 0:r.value,overlay:g("ul",{class:`${f}-menu`,onClick:()=>{d.mermaid=!1},role:"menu"},[g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("flow")},role:"menuitem",tabindex:"0"},[(Go=n.value.mermaid)==null?void 0:Go.flow]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("sequence")},role:"menuitem",tabindex:"0"},[(Zo=n.value.mermaid)==null?void 0:Zo.sequence]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("gantt")},role:"menuitem",tabindex:"0"},[(Xo=n.value.mermaid)==null?void 0:Xo.gantt]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("class")},role:"menuitem",tabindex:"0"},[(Ko=n.value.mermaid)==null?void 0:Ko.class]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("state")},role:"menuitem",tabindex:"0"},[(Yo=n.value.mermaid)==null?void 0:Yo.state]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("pie")},role:"menuitem",tabindex:"0"},[(Jo=n.value.mermaid)==null?void 0:Jo.pie]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("relationship")},role:"menuitem",tabindex:"0"},[(Qo=n.value.mermaid)==null?void 0:Qo.relationship]),g("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{u("journey")},role:"menuitem",tabindex:"0"},[(ei=n.value.mermaid)==null?void 0:ei.journey])]),key:"bar-mermaid"},{default:()=>{var O,me;return[g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(O=n.value.toolbarTips)==null?void 0:O.mermaid},[g(V,{name:"mermaid"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(me=n.value.toolbarTips)==null?void 0:me.mermaid])])]}});case"katex":return g(pt,{relative:`#${a}`,visible:d.katex,onChange:O=>{d.katex=O},disabled:r==null?void 0:r.value,overlay:g("ul",{class:`${f}-menu`,onClick:()=>{d.katex=!1},role:"menu"},[g("li",{class:`${f}-menu-item ${f}-menu-item-katex`,onClick:()=>{u("katexInline")},role:"menuitem",tabindex:"0"},[(ti=n.value.katex)==null?void 0:ti.inline]),g("li",{class:`${f}-menu-item ${f}-menu-item-katex`,onClick:()=>{u("katexBlock")},role:"menuitem",tabindex:"0"},[(ni=n.value.katex)==null?void 0:ni.block])]),key:"bar-katex"},{default:()=>{var O,me;return[g("div",{class:[`${f}-toolbar-item`,(r==null?void 0:r.value)&&`${f}-disabled`],title:(O=n.value.toolbarTips)==null?void 0:O.katex},[g(V,{name:"formula"},null),e.showToolbarName&&g("div",{class:`${f}-toolbar-item-name`},[(me=n.value.toolbarTips)==null?void 0:me.katex])])]}})}else if(e.defToolbars instanceof Array){const O=e.defToolbars[b];return O?Lt(O,{theme:((oi=O.props)==null?void 0:oi.theme)||o.value,previewTheme:((ii=O.props)==null?void 0:ii.theme)||i.value,language:((li=O.props)==null?void 0:li.theme)||l.value,codeTheme:((ri=O.props)==null?void 0:ri.codeTheme)||e.codeTheme,disabled:((si=O.props)==null?void 0:si.disabled)||(r==null?void 0:r.value),showToolbarName:((ai=O.props)==null?void 0:ai.showToolbarName)||e.showToolbarName,insert(An){F.emit(t,q,"universal",{generate:An})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const O=e.defToolbars.children[b];return O?Lt(O,{theme:((ci=O.props)==null?void 0:ci.theme)||o.value,previewTheme:((ui=O.props)==null?void 0:ui.theme)||i.value,language:((di=O.props)==null?void 0:di.theme)||l.value,codeTheme:((fi=O.props)==null?void 0:fi.codeTheme)||e.codeTheme,disabled:((hi=O.props)==null?void 0:hi.disabled)||(r==null?void 0:r.value),showToolbarName:((mi=O.props)==null?void 0:mi.showToolbarName)||e.showToolbarName,insert(An){F.emit(t,q,"universal",{generate:An})}}):""}else return""};return B(()=>e.toolbars,()=>{Ve(()=>{c.value&&As(c.value)})},{immediate:!0}),()=>{var b;const _=p.value[0].map(k=>x(k)),y=p.value[1].map(k=>x(k));return g(Pt,null,[e.toolbars.length>0&&g("div",{class:`${f}-toolbar-wrapper`,ref:c,id:a},[g("div",{class:[`${f}-toolbar`,e.showToolbarName&&`${f}-stn`]},[g("div",{class:`${f}-toolbar-left`,ref:v},[_]),g("div",{class:`${f}-toolbar-right`},[y])])]),g("label",{for:`${a}_label`,style:{display:"none"},"aria-label":(b=n.value.imgTitleItem)==null?void 0:b.upload},null),g("input",{id:`${a}_label`,ref:w,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),g(Ed,{linkVisible:m.linkVisible,clipVisible:m.clipVisible,type:m.type,onCancel:()=>{m.linkVisible=!1,m.clipVisible=!1},onOk:k=>{k&&u(m.type,{desc:k.desc,url:k.url,transform:m.type==="image"}),m.linkVisible=!1,m.clipVisible=!1}},null)])}}}),Td=(e,t,n)=>{const o=R("editorId");let i=()=>{},l=()=>{};const r=()=>{var s;i();const a=(s=n.value)==null?void 0:s.view.contentDOM.getRootNode(),c=a.querySelector(`#${o} .cm-scroller`),d=a.querySelector(`[id="${o}-preview-wrapper"]`),u=a.querySelector(`[id="${o}-html-wrapper"]`);(d||u)&&([l,i]=(d?ad:sd)(c,d||u,n.value),e.scrollAuto&&l())};B([t,je(e.setting,"preview"),je(e.setting,"htmlPreview"),je(e.setting,"fullscreen"),je(e.setting,"pageFullscreen")],()=>{Ve(r)}),B(()=>e.scrollAuto,s=>{s?l():i()}),B(()=>e.setting.previewOnly,s=>{s?i():l()}),Q(r)},In=async(e,t,n)=>{if(/^h[1-6]$/.test(e))return Dd(e,t);if(e==="prettier")return await Sd(t,n);switch(e){case"bold":case"underline":case"italic":case"strikeThrough":case"sub":case"sup":case"codeRow":case"katexInline":case"katexBlock":return Id(e,t);case"quote":case"orderedList":case"unorderedList":case"task":return Md(e,t);case"code":return zd(n,t);case"table":return Od(n);case"link":{const{desc:o="",url:i=""}=n,l=`[${o}](${i})`;return{text:l,options:{select:i==="",deviationStart:l.length-i.length-1,deviationEnd:-1}}}case"image":return Bd(n);case"flow":case"sequence":case"gantt":case"class":case"state":case"pie":case"relationship":case"journey":return Rd(e);case"universal":return Pd(t.getSelectedText(),n);default:return{text:"",options:{}}}},Dd=(e,t)=>{const n=e.slice(1),o="#".repeat(Number(n)),[i,l,r]=ro(t,{wholeLine:!0});return{text:`${o} ${i}`,options:{deviationStart:o.length+1,replaceStart:l,replaceEnd:r}}},Sd=async(e,t)=>{var n,o,i;const l=window.prettier||((n=ie.editorExtensions.prettier)==null?void 0:n.prettierInstance),r=[((o=window.prettierPlugins)==null?void 0:o.markdown)||((i=ie.editorExtensions.prettier)==null?void 0:i.parserMarkdownInstance)];return!l||!r[0]?(F.emit(t.editorId,ot,{name:"prettier",message:"prettier is undefined"}),{text:e.getValue(),options:{select:!1,replaceAll:!0}}):{text:await l.format(e.getValue(),{parser:"markdown",plugins:r}),options:{select:!1,replaceAll:!0}}},$d={bold:["**","**",2,-2],underline:["<u>","</u>",3,-4],italic:["*","*",1,-1],strikeThrough:["~~","~~",2,-2],sub:["~","~",1,-1],sup:["^","^",1,-1],codeRow:["`","`",1,-1],katexInline:["$","$",1,-1],katexBlock:[`
$$
`,`
$$
`,4,-4]},Id=(e,t)=>{const n=t.getSelectedText(),[o,i,l,r]=$d[e];return{text:`${o}${n}${i}`,options:{deviationStart:l,deviationEnd:r}}},Ld={quote:"> ",unorderedList:"- ",orderedList:1,task:"- [ ] "},Md=(e,t)=>{const[n,o,i]=ro(t,{wholeLine:!0}),l=n.split(`
`),r=Ld[e],s=e==="orderedList"?l.map((d,u)=>`${r+u}. ${d}`):l.map(d=>`${r}${d}`),a=e==="orderedList"?"1. ":r.toString(),c=l.length===1?a.length:0;return{text:s.join(`
`),options:{deviationStart:c,replaceStart:o,replaceEnd:i}}},zd=(e,t)=>{const[n,o,i]=ro(t),l=e.mode||"language",r=`
\`\`\`${l}
${e.text||n||""}
\`\`\`
`;return{text:r,options:{deviationStart:4,deviationEnd:4+l.length-r.length,replaceStart:o,replaceEnd:i}}},Rd=e=>({text:`
\`\`\`mermaid
${{flow:`flowchart TD 
  Start --> Stop`,sequence:`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!`,gantt:`gantt
title Gantt Chart
dateFormat  YYYY-MM-DD`,class:`classDiagram
  class Animal`,state:`stateDiagram-v2
  s1 --> s2`,pie:`pie
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`,relationship:`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows`,journey:`journey
  title My Journey`,...ie.editorConfig.mermaidTemplate}[e]}
\`\`\`
`,options:{deviationStart:12,deviationEnd:-5}}),Bd=e=>{const{desc:t="",url:n="",urls:o}=e;let i="";return o instanceof Array?i=o.reduce((l,r)=>{const{url:s="",alt:a="",title:c=""}=typeof r=="object"?r:{url:r};return l+`![${a}](${s}${c?" '"+c+"'":""})
`},""):i=`![${t}](${n})
`,{text:i,options:{select:n==="",deviationStart:i.length-n.length-2,deviationEnd:-2}}},Od=e=>{const{selectedShape:t={x:1,y:1}}=e,{x:n,y:o}=t;let i=`
| Column`;for(let l=0;l<=o;l++)i+=" |";i+=`
|`;for(let l=0;l<=o;l++)i+=" - |";for(let l=0;l<=n;l++){i+=`
|`;for(let r=0;r<=o;r++)i+=" |"}return i+=`
`,{text:i,options:{deviationStart:3,deviationEnd:10-i.length}}},Pd=(e,t)=>{const{generate:n}=t,o=n(e);return{text:o.targetValue,options:{select:o.select??!0,deviationStart:o.deviationStart||0,deviationEnd:o.deviationEnd||0}}},ro=(e,t={wholeLine:!1})=>{const n=e.view.state,o=n.selection.main;if(o.empty){const i=n.doc.lineAt(o.from);return[n.doc.lineAt(o.from).text,i.from,i.to]}else if(t.wholeLine){const i=n.doc.lineAt(o.from),l=n.doc.lineAt(o.to);return[n.doc.sliceString(i.from,l.to),i.from,l.to]}return[n.doc.sliceString(o.from,o.to),o.from,o.to]},Hd="#e5c07b",Ki="var(--md-color)",Nd="#56b6c2",jd="#ffffff",Dt="var(--md-color)",Yi="#e5c07b",Vd="#e5c07b",Wd="var(--md-color)",Ji="#d19a66",Ud="#c678dd",qd="#21252b",Gd="#2c313a",Qi="var(--md-bk-color)",Ln="var(--md-bk-color)",Zd="#ceedfa33",el="#528bff",Xd=Ze.theme({"&":{color:Dt,backgroundColor:Qi},".cm-content":{caretColor:el},".cm-cursor, .cm-dropCursor":{borderLeftColor:el},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Zd},".cm-panels":{backgroundColor:qd,color:Dt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Qi,color:Dt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Gd},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Ln},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ln,borderBottomColor:Ln},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Dt}}},{dark:!0}),Kd=Al.define([{tag:E.keyword,color:Ud},{tag:[E.name,E.deleted,E.character,E.propertyName,E.macroName],color:Ki},{tag:[E.function(E.variableName),E.labelName],color:Vd},{tag:[E.color,E.constant(E.name),E.standard(E.name)],color:Ji},{tag:[E.definition(E.name),E.separator],color:Dt},{tag:[E.typeName,E.className,E.number,E.changed,E.annotation,E.modifier,E.self,E.namespace],color:Hd},{tag:[E.operator,E.operatorKeyword,E.url,E.escape,E.regexp,E.link,E.special(E.string)],color:Nd},{tag:[E.meta,E.comment],color:Yi},{tag:E.strong,fontWeight:"bold"},{tag:E.emphasis,fontStyle:"italic"},{tag:E.strikethrough,textDecoration:"line-through"},{tag:E.link,color:Yi,textDecoration:"underline"},{tag:E.heading,fontWeight:"bold",color:Ki},{tag:[E.atom,E.bool,E.special(E.variableName)],color:Ji},{tag:[E.processingInstruction,E.string,E.inserted],color:Wd},{tag:E.invalid,color:jd}]),tl=[Xd,wl(Kd)],Yd="#e5c07b",nl="var(--md-color)",Jd="#56b6c2",Qd="#fff",St="#3f4a54",ol="#2d8cf0",ef="#2d8cf0",tf="#3f4a54",il="#d19a66",nf="#c678dd",of="#f6f6f6",lf="#ceedfa33",ll="var(--md-bk-color)",Mn="var(--md-bk-color)",rf="#bad5fa",rl="#3f4a54",sf=Ze.theme({"&":{color:St,backgroundColor:ll},".cm-content":{caretColor:rl},".cm-cursor, .cm-dropCursor":{borderLeftColor:rl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:rf},".cm-panels":{backgroundColor:of,color:St},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ll,color:St,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:lf},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Mn},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Mn,borderBottomColor:Mn},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:St}}}),af=Al.define([{tag:E.keyword,color:nf},{tag:[E.name,E.deleted,E.character,E.propertyName,E.macroName],color:nl},{tag:[E.function(E.variableName),E.labelName],color:ef},{tag:[E.color,E.constant(E.name),E.standard(E.name)],color:il},{tag:[E.definition(E.name),E.separator],color:St},{tag:[E.typeName,E.className,E.number,E.changed,E.annotation,E.modifier,E.self,E.namespace],color:Yd},{tag:[E.operator,E.operatorKeyword,E.url,E.escape,E.regexp,E.link,E.special(E.string)],color:Jd},{tag:[E.meta,E.comment],color:ol},{tag:E.strong,fontWeight:"bold"},{tag:E.emphasis,fontStyle:"italic"},{tag:E.strikethrough,textDecoration:"line-through"},{tag:E.link,color:ol,textDecoration:"underline"},{tag:E.heading,fontWeight:"bold",color:nl},{tag:[E.atom,E.bool,E.special(E.variableName)],color:il},{tag:[E.processingInstruction,E.string,E.inserted],color:tf},{tag:E.invalid,color:Qd}]),sl=[sf,wl(af)],Gt=(e,t,n,o,i)=>(l,r,s,a)=>{const c=`${e}${t}${n}${o}`,d=s+r.label.length+(i==="title"?n.length:0);l.dispatch({changes:{from:s,to:a,insert:c},selection:vt.create([vt.range(s+r.label.length+(i==="title"?1:-t.length),d),vt.cursor(d)],1)}),l.focus()},al=e=>(t,n,o,i)=>{const l=e.slice(i-o);t.dispatch(t.state.replaceSelection(`${l} `))},cl=e=>{const t=n=>{const o=n.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return o===null||o.from==o.to&&n.explicit?null:{from:o.from,options:[...["h2","h3","h4","h5","h6"].map((i,l)=>{const r=new Array(l+2).fill("#").join("");return{label:r,type:"text",apply:al(r)}}),...["unchecked","checked"].map(i=>{const l=i==="checked"?"- [x]":"- [ ]";return{label:l,type:"text",apply:al(l)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(i=>({label:`${i[0]}${i[1]}`,type:"text",apply:Gt(i[0],i[1],"",i[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:Gt("$","","","$","type")},{label:"$$",type:"text",apply:Gt("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(i=>({label:`!!! ${i}`,type:"text",apply:Gt("!!!",` ${i}`," Title",`

!!!`,"title")}))]}};return Cs({override:e?[t,...e]:[t]})},ht=e=>{const t=new mt;return o=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(o)}):e.dispatch({effects:xs.appendConfig.of(t.of(o))}),!0)};class cf{constructor(t){Xe(this,"view"),Xe(this,"maxLength",Number.MAX_SAFE_INTEGER),Xe(this,"toggleTabSize"),Xe(this,"togglePlaceholder"),Xe(this,"setExtensions"),Xe(this,"toggleDisabled"),Xe(this,"toggleReadOnly"),Xe(this,"toggleMaxlength"),this.view=t,this.toggleTabSize=ht(this.view),this.togglePlaceholder=ht(this.view),this.setExtensions=ht(this.view),this.toggleDisabled=ht(this.view),this.toggleReadOnly=ht(this.view),this.toggleMaxlength=ht(this.view)}getValue(){return this.view.state.doc.toString()}setValue(t,n=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:n,to:o,insert:t}})}getSelectedText(){const{from:t,to:n}=this.view.state.selection.main;return this.view.state.sliceDoc(t,n)}replaceSelectedText(t,n,o){const i={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1,replaceStart:-1,replaceEnd:-1,...n};try{if(i.replaceAll){if(this.setValue(t),t.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+t.length>this.maxLength)throw new Error("The input text is too long");const{from:l}=this.view.state.selection.main;i.replaceStart!==-1?this.view.dispatch({changes:{from:i.replaceStart,to:i.replaceEnd,insert:t}}):this.view.dispatch(this.view.state.replaceSelection(t)),i.select&&this.view.dispatch({selection:{anchor:i.replaceStart===-1?l+i.deviationStart:i.replaceStart+i.deviationStart,head:i.replaceStart===-1?l+t.length+i.deviationEnd:i.replaceStart+t.length+i.deviationEnd}}),this.view.focus()}catch(l){if(l.message==="The input text is too long")F.emit(o,ot,{name:"overlength",message:l.message,data:t});else throw l}}setTabSize(t){this.toggleTabSize([Fn.tabSize.of(t),_s.of(" ".repeat(t))])}setPlaceholder(t){this.togglePlaceholder(ks(t))}focus(t){if(this.view.focus(),!t)return;let n=0,o=0,i=0;switch(t){case"start":break;case"end":{n=o=i=this.getValue().length;break}default:n=t.rangeAnchor||t.cursorPos,o=t.rangeHead||t.cursorPos,i=t.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:vt.create([vt.range(n,o),vt.cursor(i)],1)})}setDisabled(t){this.toggleDisabled([Ze.editable.of(!t)])}setReadOnly(t){this.toggleReadOnly([Fn.readOnly.of(t)])}setMaxLength(t){this.maxLength=t,this.toggleMaxlength([Fn.changeFilter.of(n=>n.newDoc.length<=t)])}}const uf=(e,t)=>{const n=R("editorId"),o=l=>{l instanceof Promise?l.then(r=>{F.emit(n,q,"universal",{generate(){return{targetValue:r}}})}).catch(r=>{console.error(r)}):F.emit(n,q,"universal",{generate(){return{targetValue:l}}})};return l=>{var r,s,a;if(!l.clipboardData)return;if(l.clipboardData.files.length>0){const{files:w}=l.clipboardData;F.emit(n,bn,Array.from(w).filter(C=>/image\/.*/.test(C.type))),l.preventDefault();return}const c=l.clipboardData.getData("text/plain"),d=((r=t.value)==null?void 0:r.view.state.selection.main.to)||0,u=((s=t.value)==null?void 0:s.view.state.doc.lineAt(d).from)||0,m=((a=t.value)==null?void 0:a.view.state.doc.sliceString(u,d))||"",v=/!\[.*\]\(\s*$/.test(m),p=/!\[.*\]\((.*)\s?.*\)/.test(c);if(v){const w=e.transformImgUrl(c);o(w),l.preventDefault();return}else if(p){const w=c.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));w?Promise.all(w.map(C=>e.transformImgUrl(C))).then(C=>{o(C.reduce((x,b,_)=>x.replace(w[_],b),c))}):o(c),l.preventDefault();return}if(e.autoDetectCode&&l.clipboardData.types.includes("vscode-editor-data")){const w=JSON.parse(l.clipboardData.getData("vscode-editor-data"));F.emit(n,q,"code",{mode:w.mode,text:l.clipboardData.getData("text/plain")}),l.preventDefault();return}e.maxlength&&c.length+e.modelValue.length>e.maxlength&&F.emit(n,ot,{name:"overlength",message:"The input text is too long",data:c})}},df=(e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(F.emit(e,q,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:vs,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:y=>(F.emit(e,vn,y.state.doc.toString()),!0),shift:()=>(F.emit(e,q,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(F.emit(e,q,"underline"),!0),shift:()=>(F.emit(e,q,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(F.emit(e,q,"italic"),!0),shift:()=>(F.emit(e,Hn,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(F.emit(e,q,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(F.emit(e,q,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(F.emit(e,q,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(F.emit(e,q,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(F.emit(e,q,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(F.emit(e,q,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(F.emit(e,q,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(F.emit(e,q,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(F.emit(e,q,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(F.emit(e,q,"code"),!0),any(y,k){return(k.ctrlKey||k.metaKey)&&k.altKey&&k.code==="KeyC"?(F.emit(e,q,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(F.emit(e,Hn,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>t.noPrettier?!1:(F.emit(e,q,"prettier"),!0)},{any:(y,k)=>(k.ctrlKey||k.metaKey)&&k.altKey&&k.shiftKey&&k.code==="KeyT"?(F.emit(e,q,"table"),!0):!1},...bs];Ze.EDIT_CONTEXT=!1;const ff=e=>{const t=R("tabWidth"),n=R("editorId"),o=R("theme"),i=W(),l=at(),r=W(!1),s=new mt,a=new mt,c=new mt,d=new mt,u=new mt,m=df(n,e),v=()=>[...m,...us,...ds,fs],w={paste:uf(e,l),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{r.value=!0},compositionend:(b,_)=>{r.value=!1,e.updateModelValue(_.state.doc.toString())},input:b=>{e.onInput&&e.onInput(b);const{data:_}=b;e.maxlength&&e.modelValue.length+_.length>e.maxlength&&F.emit(n,ot,{name:"overlength",message:"The input text is too long",data:_})}},C=[as.of(v()),d.of(vi()),s.of(hs({codeLanguages:ys})),Ze.lineWrapping,Ze.updateListener.of(b=>{b.docChanged&&(e.onChange(b.state.doc.toString()),r.value||e.updateModelValue(b.state.doc.toString()))}),u.of(Ze.domEventHandlers(w)),cs()],x=()=>{const b=[...C,a.of(o.value==="light"?sl:tl),c.of(cl(e.completions))];return ie.codeMirrorExtensions(o.value,b,v(),{editorId:n})};return Q(()=>{const b=new Ze({doc:e.modelValue,parent:i.value,extensions:[x()]}),_=new cf(b);l.value=_,setTimeout(()=>{_.setTabSize(t),_.setDisabled(e.disabled),_.setReadOnly(e.readonly),e.placeholder&&_.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&_.setMaxLength(e.maxlength),e.autofocus&&b.focus()},0),F.on(n,{name:Dl,callback(){ms(b)}}),F.on(n,{name:Sl,callback(){ps(b)}}),F.on(n,{name:q,async callback(y,k={}){var A,$;if(y==="image"&&k.transform){const D=e.transformImgUrl(k.url);if(D instanceof Promise)D.then(async S=>{var L;const{text:H,options:z}=await In(y,l.value,{...k,url:S});(L=l.value)==null||L.replaceSelectedText(H,z,n)}).catch(S=>{console.error(S)});else{const{text:S,options:L}=await In(y,l.value,{...k,url:D});(A=l.value)==null||A.replaceSelectedText(S,L,n)}}else{const{text:D,options:S}=await In(y,l.value,k);($=l.value)==null||$.replaceSelectedText(D,S,n)}}}),F.on(n,{name:Il,callback:gs(y=>{var k;const A={...w},$=Object.keys(w);for(const D in y){const S=D;$.includes(S)?A[S]=(L,H)=>{y[S](L,H),L.defaultPrevented||w[S](L,H)}:A[S]=y[S]}(k=l.value)==null||k.view.dispatch({effects:u.reconfigure(Ze.domEventHandlers(A))})})}),F.on(n,{name:Ll,callback:(y,k)=>{const A=b.state.doc.line(y);b.dispatch(b.state.update({changes:{from:A.from,to:A.to,insert:k}}))}}),F.on(n,{name:Ml,callback(){F.emit(n,un,b)}}),F.emit(n,un,b)}),B(o,()=>{var b;(b=l.value)==null||b.view.dispatch({effects:a.reconfigure(o.value==="light"?sl:tl)})},{deep:!0}),B(()=>e.completions,()=>{var b;(b=l.value)==null||b.view.dispatch({effects:c.reconfigure(cl(e.completions))})},{deep:!0}),B(()=>e.modelValue,()=>{var b,_;((b=l.value)==null?void 0:b.getValue())!==e.modelValue&&((_=l.value)==null||_.setValue(e.modelValue))}),B(()=>e.placeholder,()=>{var b;(b=l.value)==null||b.setPlaceholder(e.placeholder)}),B(()=>e.disabled,()=>{var b;(b=l.value)==null||b.setDisabled(e.disabled)}),B(()=>e.readonly,()=>{var b;(b=l.value)==null||b.setDisabled(e.readonly)}),B(()=>e.maxlength,()=>{var b;e.maxlength&&((b=l.value)==null||b.setMaxLength(e.maxlength))}),{inputWrapperRef:i,codeMirrorUt:l,resetHistory(){var b,_;(b=l.value)==null||b.view.dispatch({effects:d.reconfigure([])}),(_=l.value)==null||_.view.dispatch({effects:d.reconfigure(vi())})}}},hf=(e,t,n)=>{const o=de(()=>/px$/.test(`${e.inputBoxWidth}`)?"50%":e.inputBoxWidth),i=_e({resizedWidth:o.value}),l=_e({width:o.value}),r=_e({left:o.value,display:"initial"}),s=d=>{var u,m,v;const p=((u=t.value)==null?void 0:u.offsetWidth)||0,w=((m=t.value)==null?void 0:m.getBoundingClientRect().x)||0;let C=d.x-w;C/p<Wt?C=p*Wt:C>p-p*Wt&&(C=p-p*Wt);const x=`${C/p*100}%`;l.width=x,r.left=x,i.resizedWidth=x,(v=e.oninputBoxWidthChange)==null||v.call(e,x)},a=d=>{d.target===n.value&&document.addEventListener("mousemove",s)},c=()=>{document.removeEventListener("mousemove",s)};return B([n],()=>{document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",c),document.addEventListener("mousedown",a),document.addEventListener("mouseup",c)}),Q(()=>{document.addEventListener("mousedown",a),document.addEventListener("mouseup",c)}),ct(()=>{document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",c)}),B([o],([d])=>{i.resizedWidth=d,l.width=d,r.left=d}),B([je(e.setting,"htmlPreview"),je(e.setting,"preview"),je(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(l.width="0%",r.display="none"):!e.setting.htmlPreview&&!e.setting.preview?(l.width="100%",r.display="none"):(l.width=i.resizedWidth,r.display="initial")},{immediate:!0}),{inputWrapperStyle:l,resizeOperateStyle:r}},mf=xl(),pf=Y({name:"MDEditorContent",props:Hu,setup(e,t){const n=R("editorId"),o=W(""),i=W(),l=W(),{inputWrapperRef:r,codeMirrorUt:s,resetHistory:a}=ff(e),{inputWrapperStyle:c,resizeOperateStyle:d}=hf(e,i,l);return Td(e,o,s),t.expose({getSelectedText(){var u;return(u=s.value)==null?void 0:u.getSelectedText()},focus(u){var m;(m=s.value)==null||m.focus(u)},resetHistory:a,getEditorView(){var u;return(u=s.value)==null?void 0:u.view}}),()=>g("div",{class:`${f}-content`},[g("div",{class:`${f}-content-wrapper`,ref:i},[g("div",{class:`${f}-input-wrapper`,style:c,ref:r},null),(e.setting.htmlPreview||e.setting.preview)&&g("div",{class:`${f}-resize-operate`,style:d,ref:l},null),g(er,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:u=>{o.value=u,e.onHtmlChanged(u)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:e.onRemount},null)]),e.catalogVisible&&g(It,{theme:e.theme,class:`${f}-catalog-editor ${f}-catalog-${e.catalogLayout}`,editorId:n,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2,syncWith:e.setting.preview?"preview":"editor",onClick:(u,m)=>{var v,p;if(!e.setting.preview&&m.line!==void 0){u.preventDefault();const w=(v=s.value)==null?void 0:v.view;if(w){const C=w.state.doc.line(m.line+1),x=(p=w.lineBlockAt(C.from))==null?void 0:p.top,b=w.scrollDOM;mf(b,x)}}},catalogMaxDepth:e.catalogMaxDepth},null)])}}),gf=Y({props:{modelValue:{type:String,default:""}},setup(e){const t=R("usedLanguageText");return()=>{var n,o;return g("div",{class:`${f}-footer-item`},[g("label",{class:`${f}-footer-label`},[`${(n=t.value.footer)==null?void 0:n.markdownTotal}:`]),g("span",null,[((o=e.modelValue)==null?void 0:o.length)||0])])}}}),vf={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},bf=Y({name:`${f}-checkbox`,props:vf,setup(e){return()=>g("div",{class:[`${f}-checkbox`,e.checked&&`${f}-checkbox-checked`,e.disabled&&`${f}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}}),_f={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},kf=Y({props:_f,setup(e){const t=R("usedLanguageText"),n=R("disabled");return()=>{var o;return g("div",{class:[`${f}-footer-item`,(n==null?void 0:n.value)&&`${f}-disabled`]},[g("label",{class:`${f}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(o=t==null?void 0:t.value.footer)==null?void 0:o.scrollAuto]),g(bf,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:n==null?void 0:n.value},null)])}}}),yf={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},Cf=Y({name:"MDEditorFooter",props:yf,setup(e){const t=R("theme"),n=R("language"),o=R("disabled"),i=de(()=>{const r=e.footers.indexOf("="),s=r===-1?e.footers:e.footers.slice(0,r),a=r===-1?[]:e.footers.slice(r,Number.MAX_SAFE_INTEGER);return[s,a]}),l=r=>{var s,a,c,d,u,m;if(Fl.includes(r))switch(r){case"markdownTotal":return g(gf,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&g(kf,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else if(e.defFooters instanceof Array){const v=e.defFooters[r];return v?Lt(v,{theme:((s=v.props)==null?void 0:s.theme)||t.value,language:((a=v.props)==null?void 0:a.language)||n.value,disabled:((c=v.props)==null?void 0:c.disabled)||(o==null?void 0:o.value)}):""}else if(e.defFooters&&e.defFooters.children instanceof Array){const v=e.defFooters.children[r];return v?Lt(v,{theme:((d=v.props)==null?void 0:d.theme)||t.value,language:((u=v.props)==null?void 0:u.language)||n.value,disabled:((m=v.props)==null?void 0:m.disabled)||(o==null?void 0:o.value)}):""}else return""};return()=>{const r=i.value[0].map(a=>l(a)),s=i.value[1].map(a=>l(a));return g("div",{class:`${f}-footer`},[g("div",{class:`${f}-footer-left`},[r]),g("div",{class:`${f}-footer-right`},[s])])}}}),zn=Y({name:"MdEditorV3",props:Qu,emits:ed,setup(e,t){const{noKatex:n,noMermaid:o,noPrettier:i,noUploadImg:l,noHighlight:r}=e,s=_e({scrollAuto:e.scrollAuto}),a=W(),c=W(),{editorId:d}=Uu(e,a),[u,m]=Zu(e,t,{editorId:d}),v=Xu(e,{editorId:d});return Wu(e,t,{editorId:d}),qu(e),Gu(e,t,{editorId:d}),Ku(e,t,{editorId:d,catalogVisible:v,setting:u,updateSetting:m,codeRef:c}),ct(()=>{F.clear(d)}),()=>{const p=ke({props:e,ctx:t},"defToolbars"),w=ke({props:e,ctx:t},"defFooters");return g("div",{id:d,class:[f,e.class,e.theme==="dark"&&`${f}-dark`,u.fullscreen||u.pageFullscreen?`${f}-fullscreen`:""],style:e.style,ref:a},[e.toolbars.length>0&&g(Fd,{noPrettier:i,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:u,updateSetting:m,tableShape:e.tableShape,defToolbars:p,noUploadImg:l,showToolbarName:e.showToolbarName,catalogVisible:v.value,codeTheme:e.codeTheme,insertLinkDirect:e.insertLinkDirect},null),g(pf,{ref:c,modelValue:e.modelValue,setting:u,mdHeadingId:e.mdHeadingId,noMermaid:o,noPrettier:i,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:n,scrollAuto:s.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:r,updateModelValue:C=>{t.emit("update:modelValue",C)},onChange:C=>{var x;(x=e.onChange)==null||x.call(e,C),t.emit("onChange",C)},onHtmlChanged:C=>{var x;(x=e.onHtmlChanged)==null||x.call(e,C),t.emit("onHtmlChanged",C)},onGetCatalog:C=>{var x;(x=e.onGetCatalog)==null||x.call(e,C),t.emit("onGetCatalog",C)},onBlur:C=>{var x;(x=e.onBlur)==null||x.call(e,C),t.emit("onBlur",C)},onFocus:C=>{var x;(x=e.onFocus)==null||x.call(e,C),t.emit("onFocus",C)},onInput:C=>{var x;(x=e.onInput)==null||x.call(e,C),t.emit("onInput",C)},completions:e.completions,catalogVisible:v.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:C=>{var x;(x=e.onDrop)==null||x.call(e,C),t.emit("onDrop",C)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:C=>{var x;(x=e.oninputBoxWidthChange)==null||x.call(e,C),t.emit("oninputBoxWidthChange",C)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var C;(C=e.onRemount)==null||C.call(e),t.emit("onRemount")},catalogLayout:e.catalogLayout,catalogMaxDepth:e.catalogMaxDepth},null),e.footers.length>0&&g(Cf,{modelValue:e.modelValue,footers:e.footers,defFooters:w,noScrollAuto:!u.preview&&!u.htmlPreview||u.previewOnly,scrollAuto:s.scrollAuto,onScrollAutoChange:C=>s.scrollAuto=C},null)])}}});zn.install=e=>(e.component(zn.name,zn),e.use(rn).use(Yt).use(sn).use(It).use(ln),e);const xf={onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},Rn=Y({name:"NormalFooterToolbar",props:xf,emits:["onClick"],setup(e,t){return()=>{const n=ke({props:e,ctx:t});return g("div",{class:[`${f}-footer-item`,e.disabled&&`${f}-disabled`],onClick:o=>{var i;e.disabled||((i=e.onClick)==null||i.call(e,o),t.emit("onClick",o))}},[n])}}});Rn.install=e=>(e.component(Rn.name,Rn),e);var ul={exports:{}},ee={},Kn={exports:{}},ut={};function lr(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function wf(e,t,n){}function Af(e,t,n){}var Ef=/javascript\s*\:/img;function Ff(e,t){return Ef.test(t)?"":t}ut.whiteList=lr();ut.getDefaultWhiteList=lr;ut.onAttr=wf;ut.onIgnoreAttr=Af;ut.safeAttrValue=Ff;var Tf={indexOf:function(e,t){var n,o;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var o,i;if(Array.prototype.forEach)return e.forEach(t,n);for(o=0,i=e.length;o<i;o++)t.call(n,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Ft=Tf;function Df(e,t){e=Ft.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,o=!1,i=0,l=0,r="";function s(){if(!o){var d=Ft.trim(e.slice(i,l)),u=d.indexOf(":");if(u!==-1){var m=Ft.trim(d.slice(0,u)),v=Ft.trim(d.slice(u+1));if(m){var p=t(i,r.length,m,v,d);p&&(r+=p+"; ")}}}i=l+1}for(;l<n;l++){var a=e[l];if(a==="/"&&e[l+1]==="*"){var c=e.indexOf("*/",l+2);if(c===-1)break;l=c+1,i=l+1,o=!1}else a==="("?o=!0:a===")"?o=!1:a===";"?o||s():a===`
`&&s()}return Ft.trim(r)}var Sf=Df,Zt=ut,$f=Sf;function dl(e){return e==null}function If(e){var t={};for(var n in e)t[n]=e[n];return t}function rr(e){e=If(e||{}),e.whiteList=e.whiteList||Zt.whiteList,e.onAttr=e.onAttr||Zt.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Zt.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Zt.safeAttrValue,this.options=e}rr.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,o=n.whiteList,i=n.onAttr,l=n.onIgnoreAttr,r=n.safeAttrValue,s=$f(e,function(a,c,d,u,m){var v=o[d],p=!1;if(v===!0?p=v:typeof v=="function"?p=v(u):v instanceof RegExp&&(p=v.test(u)),p!==!0&&(p=!1),u=r(d,u),!!u){var w={position:c,sourcePosition:a,source:m,isWhite:p};if(p){var C=i(d,u,w);return dl(C)?d+":"+u:C}else{var C=l(d,u,w);if(!dl(C))return C}}});return s};var Lf=rr;(function(e,t){var n=ut,o=Lf;function i(r,s){var a=new o(s);return a.process(r)}t=e.exports=i,t.FilterCSS=o;for(var l in n)t[l]=n[l];typeof window<"u"&&(window.filterCSS=e.exports)})(Kn,Kn.exports);var so=Kn.exports,ao={indexOf:function(e,t){var n,o;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var o,i;if(Array.prototype.forEach)return e.forEach(t,n);for(o=0,i=e.length;o<i;o++)t.call(n,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},Mf=so.FilterCSS,zf=so.getDefaultWhiteList,gn=ao;function sr(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var ar=new Mf;function Rf(e,t,n){}function Bf(e,t,n){}function Of(e,t,n){}function Pf(e,t,n){}function cr(e){return e.replace(Nf,"&lt;").replace(jf,"&gt;")}function Hf(e,t,n,o){if(n=pr(n),t==="href"||t==="src"){if(n=gn.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if(Xt.lastIndex=0,Xt.test(n))return""}else if(t==="style"){if(fl.lastIndex=0,fl.test(n)||(hl.lastIndex=0,hl.test(n)&&(Xt.lastIndex=0,Xt.test(n))))return"";o!==!1&&(o=o||ar,n=o.process(n))}return n=gr(n),n}var Nf=/</g,jf=/>/g,Vf=/"/g,Wf=/&quot;/g,Uf=/&#([a-zA-Z0-9]*);?/gim,qf=/&colon;?/gim,Gf=/&newline;?/gim,Xt=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,fl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,hl=/u\s*r\s*l\s*\(.*/gi;function ur(e){return e.replace(Vf,"&quot;")}function dr(e){return e.replace(Wf,'"')}function fr(e){return e.replace(Uf,function(n,o){return o[0]==="x"||o[0]==="X"?String.fromCharCode(parseInt(o.substr(1),16)):String.fromCharCode(parseInt(o,10))})}function hr(e){return e.replace(qf,":").replace(Gf," ")}function mr(e){for(var t="",n=0,o=e.length;n<o;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return gn.trim(t)}function pr(e){return e=dr(e),e=fr(e),e=hr(e),e=mr(e),e}function gr(e){return e=ur(e),e=cr(e),e}function Zf(){return""}function Xf(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function o(r){return n?!0:gn.indexOf(e,r)!==-1}var i=[],l=!1;return{onIgnoreTag:function(r,s,a){if(o(r))if(a.isClosing){var c="[/removed]",d=a.position+c.length;return i.push([l!==!1?l:a.position,d]),l=!1,c}else return l||(l=a.position),"[removed]";else return t(r,s,a)},remove:function(r){var s="",a=0;return gn.forEach(i,function(c){s+=r.slice(a,c[0]),a=c[1]}),s+=r.slice(a),s}}}function Kf(e){for(var t="",n=0;n<e.length;){var o=e.indexOf("<!--",n);if(o===-1){t+=e.slice(n);break}t+=e.slice(n,o);var i=e.indexOf("-->",o);if(i===-1)break;n=i+3}return t}function Yf(e){var t=e.split("");return t=t.filter(function(n){var o=n.charCodeAt(0);return o===127?!1:o<=31?o===10||o===13:!0}),t.join("")}ee.whiteList=sr();ee.getDefaultWhiteList=sr;ee.onTag=Rf;ee.onIgnoreTag=Bf;ee.onTagAttr=Of;ee.onIgnoreTagAttr=Pf;ee.safeAttrValue=Hf;ee.escapeHtml=cr;ee.escapeQuote=ur;ee.unescapeQuote=dr;ee.escapeHtmlEntities=fr;ee.escapeDangerHtml5Entities=hr;ee.clearNonPrintableCharacter=mr;ee.friendlyAttrValue=pr;ee.escapeAttrValue=gr;ee.onIgnoreTagStripAll=Zf;ee.StripTagBody=Xf;ee.stripCommentTag=Kf;ee.stripBlankChar=Yf;ee.attributeWrapSign='"';ee.cssFilter=ar;ee.getDefaultCSSWhiteList=zf;var xn={},et=ao;function Jf(e){var t=et.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=et.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function Qf(e){return e.slice(0,2)==="</"}function eh(e,t,n){var o="",i=0,l=!1,r=!1,s=0,a=e.length,c="",d="";e:for(s=0;s<a;s++){var u=e.charAt(s);if(l===!1){if(u==="<"){l=s;continue}}else if(r===!1){if(u==="<"){o+=n(e.slice(i,s)),l=s,i=s;continue}if(u===">"||s===a-1){o+=n(e.slice(i,l)),d=e.slice(l,s+1),c=Jf(d),o+=t(l,o.length,c,d,Qf(d)),i=s+1,l=!1;continue}if(u==='"'||u==="'")for(var m=1,v=e.charAt(s-m);v.trim()===""||v==="=";){if(v==="="){r=u;continue e}v=e.charAt(s-++m)}}else if(u===r){r=!1;continue}}return i<a&&(o+=n(e.substr(i))),o}var th=/[^a-zA-Z0-9\\_:.-]/gim;function nh(e,t){var n=0,o=0,i=[],l=!1,r=e.length;function s(m,v){if(m=et.trim(m),m=m.replace(th,"").toLowerCase(),!(m.length<1)){var p=t(m,v||"");p&&i.push(p)}}for(var a=0;a<r;a++){var c=e.charAt(a),d,u;if(l===!1&&c==="="){l=e.slice(n,a),n=a+1,o=e.charAt(n)==='"'||e.charAt(n)==="'"?n:ih(e,a+1);continue}if(l!==!1&&a===o){if(u=e.indexOf(c,a+1),u===-1)break;d=et.trim(e.slice(o+1,u)),s(l,d),l=!1,a=u,n=a+1;continue}if(/\s|\n|\t/.test(c))if(e=e.replace(/\s|\n|\t/g," "),l===!1)if(u=oh(e,a),u===-1){d=et.trim(e.slice(n,a)),s(d),l=!1,n=a+1;continue}else{a=u-1;continue}else if(u=lh(e,a-1),u===-1){d=et.trim(e.slice(n,a)),d=ml(d),s(l,d),l=!1,n=a+1;continue}else continue}return n<e.length&&(l===!1?s(e.slice(n)):s(l,ml(et.trim(e.slice(n))))),et.trim(i.join(" "))}function oh(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function ih(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function lh(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function rh(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function ml(e){return rh(e)?e.substr(1,e.length-2):e}xn.parseTag=eh;xn.parseAttr=nh;var sh=so.FilterCSS,Se=ee,vr=xn,ah=vr.parseTag,ch=vr.parseAttr,an=ao;function Kt(e){return e==null}function uh(e){var t=an.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=an.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=an.trim(e.slice(0,-1))),{html:e,closing:n}}function dh(e){var t={};for(var n in e)t[n]=e[n];return t}function fh(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(o){return o.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function br(e){e=dh(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Se.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=fh(e.whiteList||e.allowList):e.whiteList=Se.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":Se.attributeWrapSign,e.onTag=e.onTag||Se.onTag,e.onTagAttr=e.onTagAttr||Se.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Se.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Se.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Se.safeAttrValue,e.escapeHtml=e.escapeHtml||Se.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new sh(e.css))}br.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,o=n.whiteList,i=n.onTag,l=n.onIgnoreTag,r=n.onTagAttr,s=n.onIgnoreTagAttr,a=n.safeAttrValue,c=n.escapeHtml,d=t.attributeWrapSign,u=t.cssFilter;n.stripBlankChar&&(e=Se.stripBlankChar(e)),n.allowCommentTag||(e=Se.stripCommentTag(e));var m=!1;n.stripIgnoreTagBody&&(m=Se.StripTagBody(n.stripIgnoreTagBody,l),l=m.onIgnoreTag);var v=ah(e,function(p,w,C,x,b){var _={sourcePosition:p,position:w,isClosing:b,isWhite:Object.prototype.hasOwnProperty.call(o,C)},y=i(C,x,_);if(!Kt(y))return y;if(_.isWhite){if(_.isClosing)return"</"+C+">";var k=uh(x),A=o[C],$=ch(k.html,function(D,S){var L=an.indexOf(A,D)!==-1,H=r(C,D,S,L);return Kt(H)?L?(S=a(C,D,S,u),S?D+"="+d+S+d:D):(H=s(C,D,S,L),Kt(H)?void 0:H):H});return x="<"+C,$&&(x+=" "+$),k.closing&&(x+=" /"),x+=">",x}else return y=l(C,x,_),Kt(y)?c(x):y},c);return m&&(v=m.remove(v)),v};var hh=br;(function(e,t){var n=ee,o=xn,i=hh;function l(s,a){var c=new i(a);return c.process(s)}t=e.exports=l,t.filterXSS=l,t.FilterXSS=i,function(){for(var s in n)t[s]=n[s];for(var a in o)t[a]=o[a]}(),typeof window<"u"&&(window.filterXSS=e.exports);function r(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}r()&&(self.filterXSS=e.exports)})(ul,ul.exports);export{zn as E,_h as G,wh as H,ln as M,gh as R,Ts as S,Fs as a,Ds as b,kh as c,yh as d,xh as e,Ch as f,bh as g,Ah as h,vh as u};
