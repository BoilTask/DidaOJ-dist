import{bm as $e,bn as wt,bo as X,s as n,bp as o,bq as I,br as E,ap as w,n as J,r as f,bs as ne,bt as M,aD as re,g as kt,o as Q,bu as z,bv as Ct,bw as St,bx as Qe,F as Z,by as ae,bz as se,aM as Lt,bA as Ue,bB as Ne,q as he,y as De,J as we,bC as et,c as ve,a0 as It,bD as Ee,u as Ke,bE as Ve,ac as Tt,bF as Pt,bG as xt,bH as Vt,bI as jt,B as $t,bJ as Dt}from"./node_modules-DPCfXZqM.js";import{R as me,C as pe,a as oe,B as A,F as ke,b as Ce,I as Se,L as Et,M as tt,c as nt,S as Rt,H as zt,d as Mt,e as At,f as fe,g as qt,h as Ht,A as Ot,i as Ut,j as Nt,T as ge,k as ue,D as Re,l as ze,m as at,O as ot,n as lt,o as st,p as Ft,q as Gt,r as Kt,s as Bt,t as Xt,u as Wt,v as Yt}from"./tdesign-vue-next-BwRv9oVM.js";import{V as le}from"./vditor-DArazWIS.js";import{e as We}from"./monaco-editor-DCUKHC_e.js";import{H as Jt,v as Zt}from"./highlight.js-D9zWiMxS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=a(l);fetch(l.href,r)}})();var be=(e=>(e.Manage="i-manage",e.ManageJudge="i-manage-judge",e.ManageProblem="i-manage-problem",e))(be||{});const Qt={"r-admin":["i-manage","i-manage-judge","i-manage-problem"]};function en(e){if(e==null)return[];const t=[];for(const a of e){const s=Qt[a];s!=null&&t.push(...s)}return[...new Set(t)]}function tn(e,t){if(e==null||t==null)return!1;const a=en(e);for(const s of t)if(!a.includes(s))return!1;return!0}const ce=$e("user",{state:()=>({token:"",userId:-1,username:"",nickname:"",roles:[]}),getters:{getToken(){return this.token},getUserId(){return this.userId},getUsername(){return this.username},getNickname(){return this.nickname}},actions:{clear(){this.$patch({token:"",userId:-1,username:"",nickname:"",roles:[]})},loadResponse(e){this.$patch({token:e.token,userId:e.user_id,username:e.username,nickname:e.nickname,roles:e.roles})},isLogin(){return this.token!=null&&this.token!=""},hasAuth(e){return this.hasAllAuths([e])},hasAllAuths(e){return e?tn(this.roles,e):!0}},persist:!0}),nn="https://oj-api.didapipa.com/",Y=wt.create({baseURL:nn,timeout:6e4,withCredentials:!0,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});Y.interceptors.request.use(e=>{const a=ce().getToken;return a&&(e.headers["X-Token"]=a),e},e=>Promise.reject(e));Y.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)});function an(e,t){return Y({url:"/user/login",method:"post",data:{username:e,password:t}})}function on(){return Y({url:"/user/login/refresh",method:"post"})}const rt=$e("login",{state:()=>({Loaded:!1}),getters:{isLoaded(){return this.Loaded}}}),Le=$e("webStyle",{state:()=>({title:""}),getters:{getTitle(){return this.title}},actions:{setTitle(e){this.title=e}}}),Me=$e("sidebarStyle",{state:()=>({showSidebar:!1,forceHiddenSidebar:!1,menuActiveName:"",menuList:[]}),getters:{getMenuList(){return this.menuList}},actions:{setSidebarShow(e){this.showSidebar=e},setForceHiddenSidebar(e){this.forceHiddenSidebar=e},setMenuActiveName(e){this.menuActiveName=e},clearMenuList(){this.menuList=[]},setMenuList(e){this.menuList=e},addMenuList(e){this.menuList.push(e)}}}),G=(e,t)=>{const a=e.__vccOpts||e;for(const[s,l]of t)a[s]=l;return a},ln={},sn={class:"sh-main"};function rn(e,t){const a=oe,s=pe,l=me;return I(),X("div",sn,[n(l,null,{default:o(()=>[n(s,{span:6},{default:o(()=>[n(a,{title:"正在完善，欢迎提供意见建议"},{default:o(()=>t[0]||(t[0]=[E("p",null,[E("a",{href:"https://codeoj.cn/",target:"_blank"},"CodeOJ"),w("的迁移计划")],-1),E("p",null,"正在开发中",-1)])),_:1})]),_:1})]),_:1})])}const un=G(ln,[["render",rn],["__scopeId","data-v-78f609f9"]]),cn={class:"sh-main"},dn=J({__name:"View404",setup(e){let t=ne(),a=f(t.fullPath);return(s,l)=>{const r=A;return I(),X("div",cn,[E("p",null,M(re(a)),1),l[2]||(l[2]=E("p",null,"该页面无效或已被迁移，请重新选择访问目标",-1)),n(r,{theme:"primary",onClick:l[0]||(l[0]=()=>s.$router.push("/"))},{default:o(()=>l[1]||(l[1]=[w("返回首页")])),_:1})])}}}),ut=G(dn,[["__scopeId","data-v-d4218944"]]);let Fe=null;async function mn(){Fe=await fn()}function pn(e,t="zh"){if(Fe==null)return[!1,e.toString()];const a=Fe[e.toString()];if(!a)return[!1,e.toString()];let s=a[t];return s||(t="zh",s=a[t]),s?[!0,s]:[!1,e.toString()]}async function fn(){return new Promise((e,t)=>{e({404:{zh:"接口未找到"},1e3:{zh:"系统错误"},10001:{zh:"权限异常，请重新登陆后再试"},10002:{zh:"参数不符合要求"},10003:{zh:"未找到目标数据"},100001:{zh:"用户名不存在或密码不匹配"}})})}function te(){const{appContext:e}=kt();return{globalProperties:e.config.globalProperties}}function Ae(){return 1e3}function _n(e,t,a=3e3){e.$message.success({duration:a,content:t})}function de(e,t,a=3e3){e.$message.info({duration:a,content:t})}function _e(e,t,a=3e3){e.$message.error({duration:a,content:t})}function F(e,t,a=3e3){const[s,l]=pn(t),r=s?l:`系统错误，错误提示[${l}]`;e.$message.error({duration:a,content:r})}const gn={class:"dida-login-footer"},hn=J({__name:"LoginView",setup(e){const{globalProperties:t}=te(),a=ce(),s=f(!1),l=f({account:"",password:""}),r=()=>{de(t,"重置成功")},d=({validateResult:V,firstError:p})=>{s.value||an(l.value.account,l.value.password).then(m=>{if(m.code===0){a.loadResponse(m.data),de(t,"登录成功");let v=t.$route.query.redirect_uri;v||(v="/user/"+m.data.username),t.$router.push({path:v})}else F(t,m.code)}).catch(m=>{console.error("Login error",m),_e(t,"登录失败")})};return Q(()=>{if(a.isLogin()){t.$router.push({path:"/user"});return}}),(V,p)=>{const m=Se,v=Ce,S=A,k=ke,b=Et,R=oe;return I(),z(R,{class:"yj-login-card",title:"欢迎使用DidaOJ~"},{default:o(()=>[n(k,{ref:"form",data:l.value,colon:!0,onReset:r,onSubmit:d,class:"yj-login-form","label-width":0},{default:o(()=>[n(v,{name:"account"},{default:o(()=>[n(m,{modelValue:l.value.account,"onUpdate:modelValue":p[0]||(p[0]=$=>l.value.account=$),clearable:"",placeholder:"请输入账户名"},{"prefix-icon":o(()=>[n(re(Ct))]),_:1},8,["modelValue"])]),_:1}),n(v,{name:"password"},{default:o(()=>[n(m,{modelValue:l.value.password,"onUpdate:modelValue":p[1]||(p[1]=$=>l.value.password=$),type:"password",clearable:"",placeholder:"请输入密码"},{"prefix-icon":o(()=>[n(re(St))]),_:1},8,["modelValue"])]),_:1}),n(v,null,{default:o(()=>[n(S,{theme:"primary",type:"submit",block:"",loading:s.value},{default:o(()=>p[2]||(p[2]=[w("登录")])),_:1},8,["loading"])]),_:1})]),_:1},8,["data"]),E("div",gn,[n(b,null,{default:o(()=>p[3]||(p[3]=[w("忘记密码")])),_:1}),n(b,null,{default:o(()=>p[4]||(p[4]=[w("注册账户")])),_:1})])]),_:1})}}}),vn=G(hn,[["__scopeId","data-v-bb5469c5"]]),bn={};function yn(e,t){return" TODO "}const wn=G(bn,[["render",yn]]),Be=[{name:"home",path:"/",title:"首页",showSidebar:!1,disableGenerateTab:!0,component:un},{name:"problem",path:"/problem",title:"题目",icon:"dashboard",showSidebar:!0,redirect:"problem-list"},{name:"judge",path:"/judge",title:"评测",icon:"dashboard",showSidebar:!0,redirect:"judge-list"},{name:"contest",path:"/contest",title:"比赛",icon:"dashboard",showSidebar:!0,redirect:"contest-list"},{name:"contest-detail",title:"比赛",path:"/contest",showSidebar:!0,disableGenerateTab:!0,redirect:"contest-list"},{name:"manage",path:"/manage",title:"管理",icon:"dashboard",showSidebar:!0,redirect:"manage-judge",auths:[be.Manage]},{name:"login",path:"/login",title:"登陆",showSidebar:!1,disableGenerateTab:!0,component:vn},{name:"user",path:"/user/:username+",title:"用户",showSidebar:!1,needLogin:!0,disableGenerateTab:!0,component:wn},{name:"404",path:"/404",title:"404",showSidebar:!1,disableGenerateTab:!0,component:ut}],kn=e=>Be.find(t=>t.name==e),Cn=e=>{const t=[];return Be.forEach(a=>{!a.disableGenerateTab&&e.hasAllAuths(a.auths)&&t.push(a)}),t},Sn=e=>{Be.forEach(t=>{const a={name:t.name,path:t.path,meta:{title:t.title,tab:t.name,showSidebar:t.showSidebar,needLogin:t.needLogin,redirect:t.redirect,tabAuths:t.auths},component:t.component};e.push(a)})},Ln=J({__name:"HeaderContent",setup(e){const t=rt(),a=ce(),{globalProperties:s}=te(),l=f(t.isLoaded),r=f(!1),d=f(a.getUsername),V=f(a.getNickname),p=f(),m=()=>{p.value=Cn(a)};t.$subscribe((k,b)=>{l.value=b.Loaded}),a.$subscribe((k,b)=>{d.value=b.username,V.value=b.nickname,r.value=b.token!="",m()});const v=()=>{s.$router.currentRoute.value.name!=="login"&&s.$router.push({name:"login",query:{redirect_uri:s.$router.currentRoute.value.fullPath}})},S=()=>{a.clear(),s.$message.success({duration:3e3,content:"注销成功"}),s.$router.push({path:"/login",query:{redirect_uri:s.$router.currentRoute.value.fullPath}})};return Q(()=>{m()}),(k,b)=>{const R=Qe("router-link"),$=nt,x=tt,y=Rt,L=zt;return I(),z(L,{modelValue:k.$route.meta.tab,"onUpdate:modelValue":b[0]||(b[0]=c=>k.$route.meta.tab=c),class:"sh-menu","expand-type":"popup"},{logo:o(()=>[n(R,{to:"/",class:"sh-logo"},{default:o(()=>b[1]||(b[1]=[w("DidaOJ")])),_:1})]),operations:o(()=>[l.value&&r.value?(I(),z(y,{key:0,title:V.value},{icon:o(()=>[n($,{name:"user"})]),default:o(()=>[n(x,{value:"user",to:{path:"/user/"+d.value}},{default:o(()=>b[2]||(b[2]=[w("个人空间")])),_:1},8,["to"]),n(x,{value:"user_logout",onClick:S},{default:o(()=>b[3]||(b[3]=[w(" 注销")])),_:1})]),_:1},8,["title"])):l.value?(I(),z(x,{key:2,value:"login",onClick:v},{icon:o(()=>[n($,{name:"login"})]),default:o(()=>[b[5]||(b[5]=w(" 登录 "))]),_:1})):(I(),z(x,{key:1,value:"login"},{icon:o(()=>[n($,{name:"login"})]),default:o(()=>[b[4]||(b[4]=w(" ... "))]),_:1}))]),default:o(()=>[(I(!0),X(Z,null,ae(p.value,c=>(I(),z(x,{key:c.name,value:c.name,to:{name:c.name}},{icon:o(()=>[c.icon?(I(),z($,{key:0,name:c.icon},null,8,["name"])):se("",!0)]),default:o(()=>[w(" "+M(c.title),1)]),_:2},1032,["value","to"]))),128))]),_:1},8,["modelValue"])}}}),In=G(Ln,[["__scopeId","data-v-a4891d9b"]]);function it(e){return e.children!==void 0}function Tn(e){return e.children!==void 0}const Pn={id:"menu-container"},xn=J({__name:"SidebarContent",setup(e){const t=Me(),a=f(!1),s=f(null),l=f(t.menuActiveName),r=f(t.menuList),d=f([]),V=f(!1),p=()=>{l.value=t.menuActiveName;const v=JSON.stringify(r.value),S=JSON.stringify(t.menuList);v!==S&&(d.value.push([...t.menuList]),m())},m=async()=>{if(d.value.length>0&&!V.value){for(V.value=!0;d.value.length>1;)d.value.shift();const v=d.value.shift();a.value=v.length<=0,r.value=[],await he(),s.value&&s.value.updateActiveName(),await new Promise(k=>setTimeout(k,300)),r.value=v,await he(),s.value&&s.value.updateActiveName();const S=300;await new Promise(k=>setTimeout(k,S)),V.value=!1,await m()}};return t.$subscribe((v,S)=>{p()}),Q(()=>{p()}),(v,S)=>{const k=nt,b=tt,R=At,$=Mt,x=fe;return I(),X(Z,null,[E("div",Pn,[n($,{modelValue:l.value,"onUpdate:modelValue":S[0]||(S[0]=y=>l.value=y),theme:"light",class:"sh-menu-container"},{default:o(()=>[n(Lt,{name:"move-left"},{default:o(()=>[(I(!0),X(Z,null,ae(r.value,(y,L)=>(I(),X(Z,{key:L},[re(Tn)(y)?(I(),z(R,{key:0,title:y.title},{default:o(()=>[(I(!0),X(Z,null,ae(y.children,(c,P)=>(I(),z(b,{key:c.name,value:c.name,to:c.to},Ue({default:o(()=>[w(" "+M(c.title),1)]),_:2},[c.icon?{name:"icon",fn:o(()=>[n(k,{name:c.icon,class:Ne(c.iconClass)},null,8,["name","class"])]),key:"0"}:void 0]),1032,["value","to"]))),128))]),_:2},1032,["title"])):(I(),z(b,{key:y.name,value:y.name,to:y.to},Ue({default:o(()=>[w(" "+M(y.title),1)]),_:2},[y.icon?{name:"icon",fn:o(()=>[n(k,{name:y.icon,class:Ne(y.iconClass)},null,8,["name","class"])]),key:"0"}:void 0]),1032,["value","to"]))],64))),128))]),_:1})]),_:1},8,["modelValue"])]),n(x,{size:"small",loading:a.value,"show-overlay":!0,attach:"#menu-container",class:"sh-sidebar-loading",style:{"align-items":"flex-start","padding-top":"100px"}},null,8,["loading"])],64)}}}),Vn=G(xn,[["__scopeId","data-v-96e2d89f"]]),jn={};function $n(e,t){return null}const Dn=G(jn,[["render",$n]]),En={class:"footer"},Rn={class:"footer-left"},zn={class:"foot-time"},Mn={class:"footer-center"},An={href:"https://boiltask.com",target:"_blank"},qn={class:"footer-right"},Hn={class:"foot-text"},On={href:"https://github.com/hpu-user/DiDaOJ-web",target:"_blank"},Un=J({__name:"FooterContent",setup(e){const t=f("");function a(){t.value=new Date().toLocaleString()}return Q(()=>{a(),setInterval(()=>{a()},1e3)}),(s,l)=>{const r=A;return I(),X("div",En,[E("div",Rn,[E("p",zn,M(t.value),1)]),E("div",Mn,[E("a",An,[n(r,{theme:"default",variant:"outline",ghost:!0},{default:o(()=>l[0]||(l[0]=[w("@BoilTask")])),_:1})])]),E("div",qn,[E("p",Hn,[E("a",On,[n(r,{theme:"default",variant:"outline",ghost:!0},{default:o(()=>l[1]||(l[1]=[w("@didaoj-web")])),_:1})])])])])}}}),Nn=G(Un,[["__scopeId","data-v-400ac98b"]]),Pe=20,He=100,Oe=50,Fn=J({__name:"ForceHiddenSidebarButton",setup(e){let t=Me();const a=f({x:window.innerWidth-He-Pe,y:window.innerHeight-Oe-Pe}),s=f(window.innerWidth),l=f(window.innerHeight);let r=!1,d={x:0,y:0};const V=y=>{r=!0;const L=y.clientX??y.touches[0].clientX,c=y.clientY??y.touches[0].clientY;d={x:L-a.value.x,y:c-a.value.y},document.addEventListener("mousemove",p),document.addEventListener("touchmove",p),document.addEventListener("mouseup",m),document.addEventListener("touchend",m)},p=y=>{if(!r)return;const L=y.clientX??y.touches[0].clientX,c=y.clientY??y.touches[0].clientY;let P=L-d.x,C=c-d.y;P=Math.max(0,Math.min(P,s.value-He)),C=Math.max(0,Math.min(C,l.value-Oe)),a.value={x:P,y:C}},m=()=>{r=!1,document.removeEventListener("mousemove",p),document.removeEventListener("touchmove",p),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m)},v=()=>{s.value=window.innerWidth,l.value=window.innerHeight,a.value={x:Math.min(a.value.x,s.value-He-Pe),y:Math.min(a.value.y,l.value-Oe-Pe)}};let S=f(t.forceHiddenSidebar),k=f(t.forceHiddenSidebar);const b=()=>{S.value=!S.value,t.setForceHiddenSidebar(S.value)},R=()=>{k.value||(k.value=!0,t.setForceHiddenSidebar(S.value))},$=()=>{k.value&&(k.value=!1,t.setForceHiddenSidebar(!1))},x=y=>{y>=800?$():R()};return x(s.value),De(s,y=>{x(y)}),Q(()=>{window.addEventListener("resize",v)}),we(()=>{window.removeEventListener("resize",v)}),(y,L)=>{const c=A;return re(k)?(I(),z(c,{key:0,class:"draggable-button",style:et({top:`${a.value.y}px`,left:`${a.value.x}px`}),onMousedown:V,onTouchstart:V,variant:"dashed",theme:"primary",onClick:b},{default:o(()=>[w(M(re(S)?"显示":"隐藏"),1)]),_:1},8,["style"])):se("",!0)}}}),Gn=G(Fn,[["__scopeId","data-v-1aee5506"]]),Kn={class:"sh-main"},Bn=J({__name:"View403",setup(e){let t=ne();const a=f("");return Q(()=>{t.query.target?a.value=t.query.target:a.value=t.fullPath}),(s,l)=>{const r=A;return I(),X("div",Kn,[E("p",null,M(a.value),1),l[2]||(l[2]=E("p",null,"该页面无访问权限，请更换访问目标或重新登陆后再试",-1)),n(r,{theme:"primary",onClick:l[0]||(l[0]=()=>s.$router.push("/"))},{default:o(()=>l[1]||(l[1]=[w("返回首页")])),_:1})])}}}),ct=G(Bn,[["__scopeId","data-v-8f62f1f8"]]),xe="DidaOJ",Xn=J({__name:"App",setup(e){const{globalProperties:t}=te(),a=rt(),s=ce(),l=Le(),r=Me();a.$patch({Loaded:!1});const d=s.getToken,V=f(!1),p=f(!1);l.title&&l.title.length>0?document.title=l.title+" - "+xe:document.title=xe,l.$subscribe((k,b)=>{b.title&&b.title.length>0?document.title=b.title+" - "+xe:document.title=xe}),r.$subscribe((k,b)=>{V.value=b.showSidebar,p.value=V.value&&!b.forceHiddenSidebar});const m=ne(),v=ve(()=>{const k=m.meta.auths;return k?!s.hasAllAuths(k):!1});function S(){t.$message.warning({duration:3e3,content:"登陆状态失效"}),a.$patch({Loaded:!0}),s.clear()}return Q(()=>{if(d==""){a.$patch({Loaded:!0});return}on().then(k=>{k.code==0?(s.loadResponse(k.data),a.$patch({Loaded:!0})):(F(t,k.code),a.$patch({Loaded:!0}),s.clear())}).catch(k=>{console.log(k),S()})}),(k,b)=>{const R=qt,$=Ot,x=Qe("RouterView"),y=Ut,L=Ht,c=Nt;return I(),X(Z,null,[n(L,null,{default:o(()=>[n(R,{class:"sh-header"},{default:o(()=>[n(In)]),_:1}),n(L,null,{default:o(()=>[n(It,{name:"slide"},{default:o(()=>[p.value?(I(),z($,{key:0,class:"sh-sidebar"},{default:o(()=>[n(Vn)]),_:1})):se("",!0)]),_:1}),n(L,{class:Ne(["sh-main-layout",{expanded:!p.value}])},{default:o(()=>[n(Dn),n(y,{class:"sh-main-content"},{default:o(()=>[v.value?(I(),z(ct,{key:0})):(I(),z(x,{key:1}))]),_:1}),n(Nn)]),_:1},8,["class"])]),_:1})]),_:1}),V.value?(I(),z(Gn,{key:0})):se("",!0),n(c,{container:"body",offset:["24px","80px"],size:"small"})],64)}}}),Wn=G(Xn,[["__scopeId","data-v-3cab4566"]]);var dt=(e=>(e[e.Unknown=-1]="Unknown",e[e.C=0]="C",e[e.Cpp=1]="Cpp",e[e.Java=2]="Java",e[e.Python=3]="Python",e[e.Pascal=4]="Pascal",e[e.Golang=5]="Golang",e[e.Max=6]="Max",e))(dt||{});function mt(){const e=[-1,4,5,6];return Object.values(dt).filter(t=>typeof t=="number"&&!e.includes(t)).map(t=>({value:t,label:pt(t)}))}function Yn(e){return e>-1&&e<6}function pt(e){switch(e){case 0:return"C";case 1:return"C++";case 2:return"Java";case 3:return"Python";case 4:return"Pascal";case 5:return"Golang";default:return"Unknown"}}function ft(e){switch(e){case 0:return"c";case 1:return"cpp";case 2:return"java";case 3:return"python";case 4:return"pascal";case 5:return"golang";default:return"text"}}var B=(e=>(e[e.Init=0]="Init",e[e.Rejudge=1]="Rejudge",e[e.Submitting=2]="Submitting",e[e.Queuing=3]="Queuing",e[e.Compiling=4]="Compiling",e[e.Running=5]="Running",e[e.Accept=6]="Accept",e[e.PE=7]="PE",e[e.WA=8]="WA",e[e.TLE=9]="TLE",e[e.MLE=10]="MLE",e[e.OLE=11]="OLE",e[e.RE=12]="RE",e[e.CE=13]="CE",e[e.CLE=14]="CLE",e[e.JudgeFail=15]="JudgeFail",e[e.SubmitFail=16]="SubmitFail",e[e.Unknown=17]="Unknown",e))(B||{});const Jn=e=>{switch(e){case 0:return"普通评测";case 1:return"特殊评测";default:return"未知"}},je=e=>{switch(e){case 0:return"等待处理";case 1:return"重新评测";case 2:return"提交中";case 3:return"队列中";case 4:return"编译中";case 5:return"运行中";case 6:return"通过";case 7:return"格式错误";case 8:return"答案错误";case 9:return"超时";case 10:return"内存超限";case 11:return"输出超限";case 12:return"运行错误";case 13:return"编译错误";case 14:return"编译超限";case 15:return"评测失败";case 16:return"提交失败";case 17:return"未知";default:return e}};function Zn(){const e=[17];return Object.values(B).filter(t=>typeof t=="number"&&!e.includes(t)).map(t=>({value:t,label:je(t)}))}function ye(e){switch(e){case 0:case 1:case 2:case 4:case 5:return!0;default:return!1}}function _t(e){var a;const t={};if(t.id=e.id,t.problemId=e.problem_id,t.status=e.status,ye(e.status)?t.score="-":t.score=e.score.toString(),e.time?t.time=Math.ceil(e.time/1e6)+"ms":t.time="-",e.memory?t.memory=(e.memory/1024/1024).toFixed(2)+"MB":t.memory="-",t.language=pt(e.language),t.codeLength=e.code_length,e.approve_time?t.approveTime=new Date(e.approve_time).toLocaleString():t.approveTime="-",t.author=e.author,t.authorUsername=e.author_username,t.authorNickname=e.author_nickname,t.code=e.code,t.compileMessage=e.compile_message,t.task=[],e.task)for(let s=0;s<((a=e.task)==null?void 0:a.length);s++){const l=e.task[s],r={};r.taskId=l.task_id,r.status=l.status,l.time?r.time=Math.ceil(l.time/1e6)+"ms":r.time="-",l.memory?r.memory=(l.memory/1024/1024).toFixed(2)+"MB":r.memory="-",r.score=l.score,r.content=l.content,r.waHint=l.wa_hint,!r.content&&!r.waHint&&(r.content="无提示信息"),t.task.push(r)}return t}function Qn(e,t,a){return Y({url:"/judge/approve",method:"post",data:{problem_id:e,language:t,code:a}})}function ea(e){return Y({url:"/judge?id="+e,method:"get"})}function ta(e,t,a,s,l,r){const d=new URLSearchParams({problem_id:e,username:t,language:String(a),status:String(s),page:String(l),page_size:String(r)});return Y({url:`/judge/list?${d.toString()}`,method:"get"})}function na(){return Y({url:"/judge/rejudge/recently",method:"post"})}var Ge=(e=>(e[e.None=0]="None",e[e.Attempt=1]="Attempt",e[e.Accept=2]="Accept",e))(Ge||{});function qe(e,t){const a={};if(a.id=e.id,a.author=e.author,a.title=e.title,a.tags=[],e.tags)for(const s of e.tags){const l=t[s];l&&a.tags.push(l)}return a.accept=e.accept,a.attempt=e.attempt,e.description!=null&&(a.description=e.description),e.time_limit!=null&&(a.timeLimit=e.time_limit.toString()+" ms"),e.memory_limit!=null&&(a.memoryLimit=(e.memory_limit/1024).toFixed(2)+" MB"),e.judge_type!=null&&(a.judgeType=Jn(e.judge_type)),e.insert_time!=null&&(a.insertTime=new Date(e.insert_time).toLocaleString()),e.update_time!=null&&(a.updateTime=new Date(e.update_time).toLocaleString()),e.creator_nickname!=null&&(a.creatorNickname=e.creator_nickname),e.source!=null&&(a.source=e.source),e.judge_md5!=null&&(a.judgeMd5=e.judge_md5),a}function gt(e){return Y({url:"/problem?id="+e,method:"get"})}function ht(e){return Y({url:"/problem/tag/list?max_count="+e,method:"get"})}function aa(e){return Y({url:"/problem/judge?id="+e,method:"get"})}function oa(e,t,a,s){return Y({url:"/problem/list?title="+e+"&tag="+t+"&page="+a+"&page_size="+s,method:"get"})}function la(e,t,a,s,l,r,d){return Y({url:"/problem/edit",method:"post",data:{id:e,title:t,time_limit:a,memory_limit:s,source:l,tags:r,description:d}})}function sa(e,t){return Y({url:"/problem/judge/data/download?id="+e+"&key="+t,method:"get"})}function ra(e,t){const a=new FormData;return a.append("id",e),a.append("zip",t),Y({url:"/problem/judge/data",method:"post",data:a,headers:{"Content-Type":"multipart/form-data"},timeout:1e3*60*5})}const ua={style:{margin:"10px"}};function ia(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}const ca=J({__name:"ProblemList",setup(e){const t=ne(),a=Ee(),{globalProperties:s}=te();let l=null;const r=f(!1),d={};let V={};const p=f([{title:"ID",colKey:"id",cell:(i,u)=>{let g=y(u.row.id);return n(A,{variant:"dashed",theme:g,onClick:()=>x(u.row.id)},{default:()=>[u.row.id]})}},{title:"标题",colKey:"title",cell:(i,u)=>n(A,{variant:"text",onClick:()=>x(u.row.id)},{default:()=>[u.row.title]})},{title:"标签",colKey:"tags",cell:(i,u)=>{const g=u.row.tags;if(!g||g.length===0)return"";let T=[];for(let _=0;_<g.length;_++){const h=g[_];T.push(n(A,{key:_,theme:"default",variant:"outline"},{default:()=>[h.name]}))}return n(ue,null,ia(T)?T:{default:()=>[T]})}},{title:"正确",colKey:"accept"},{title:"提交",colKey:"attempt"}]),m=f(!1);let v=1,S=50;const k=f({defaultPageSize:S,defaultCurrent:v,total:0,pageSizeOptions:[50,100]}),b=f(),R=f(),$=f({title:"",tag:""}),x=i=>{i&&a.push({path:"/problem/"+i})},y=i=>{if(!i||!V)return"default";const u=V[i];if(!u)return"default";switch(u){case Ge.Accept:return"success";case Ge.Attempt:return"warning";default:return"default"}},L=async()=>{await a.push({query:{...t.query,title:$.value.title,tag:$.value.tag,page:1,page_size:k.value.defaultPageSize}})},c=i=>{i&&a.push({query:{...t.query,title:"",tag:i.name,page:1,page_size:k.value.defaultPageSize}})},P=async(i,u)=>{m.value=!0;try{const{current:g,pageSize:T}=i,_=await oa($.value.title,$.value.tag,g,T);if(b.value=[],_.code===0){const h=_.data.list;if(!h||h.length<=0){k.value={...k.value,total:0},V=null,de(s,"未找到记录");return}h.forEach(j=>{var N;const H=qe(j,d);(N=b.value)==null||N.push(H)}),k.value={...k.value,total:_.data.total_count},V=_.data.problem_attempt_status}else u&&F(s,_.code)}catch(g){console.error(g),F(s,Ae())}finally{m.value=!1}},C=async i=>{await a.push({query:{...t.query,page:i.current,page_size:i.pageSize}})};return Q(async()=>{R.value=[],ht(-1).then(i=>{if(i.code===0){R.value=i.data.list,r.value=i.data.total_count>i.data.list.length;for(let u=0;u<i.data.list.length;u++){const g=i.data.list[u];d[g.id]=g}l=De(()=>t.query,u=>{$.value.title=u.title||"",$.value.tag=u.tag||"";const g=parseInt(u.page)||k.value.defaultCurrent,T=parseInt(u.page_size)||k.value.defaultPageSize;v=g,S=T,k.value={...k.value,defaultCurrent:v,defaultPageSize:S},P({current:v,pageSize:S},!0)},{immediate:!0})}else r.value=!0}).catch(i=>{console.error(i),r.value=!0})}),we(()=>{l&&l()}),(i,u)=>{const g=ge,T=oe,_=pe,h=Se,j=Ce,H=A,N=ke,ee=me;return I(),z(ee,null,{default:o(()=>[n(_,{span:9},{default:o(()=>[n(T,{style:{margin:"10px"}},{default:o(()=>[n(g,{data:b.value,columns:p.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:k.value,loading:m.value,onPageChange:C},null,8,["data","columns","pagination","loading"])]),_:1})]),_:1}),n(_,{span:3},{default:o(()=>[E("div",ua,[n(T,{class:"sh-card"},{default:o(()=>[n(N,{model:$.value},{default:o(()=>[n(j,{label:"标题"},{default:o(()=>[n(h,{modelValue:$.value.title,"onUpdate:modelValue":u[0]||(u[0]=K=>$.value.title=K),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),n(j,{label:"标签"},{default:o(()=>[n(h,{modelValue:$.value.tag,"onUpdate:modelValue":u[1]||(u[1]=K=>$.value.tag=K),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),n(j,null,{default:o(()=>[n(H,{theme:"primary",onClick:L},{default:o(()=>u[3]||(u[3]=[w("搜索")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),n(T,{class:"sh-card sh-background-black"},{default:o(()=>[(I(!0),X(Z,null,ae(R.value,K=>(I(),z(H,{class:"sh-tag-button",theme:"default",variant:"outline",ghost:!0,onClick:()=>c(K)},{default:o(()=>[w(M(K.name),1)]),_:2},1032,["onClick"]))),256)),r.value?(I(),z(H,{key:0,class:"sh-tag-button",theme:"default",variant:"outline",ghost:!0,onClick:u[2]||(u[2]=()=>i.$router.push("/problem/tags"))},{default:o(()=>u[4]||(u[4]=[w(" ... ")])),_:1})):se("",!0)]),_:1})])]),_:1})]),_:1})}}}),da=G(ca,[["__scopeId","data-v-161e200a"]]);function Xe(e){e.querySelectorAll("pre > code:not([data-copy-attached])").forEach(a=>{a.setAttribute("data-copy-attached","true");const s=a.parentElement,l=document.createElement("div");l.className="copy-wrapper";const r=document.createElement("button");r.className="copy-btn",r.innerText="复制",r.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(a.innerText),r.innerText="已复制",setTimeout(()=>r.innerText="复制",1500)}catch{r.innerText="失败"}}),s.replaceWith(l),l.appendChild(r),l.appendChild(s)})}const ma=["innerHTML"],pa={style:{margin:"12px"}},fa={class:"dida-edit-container"},_a={class:"dida-operation-container"},ga={class:"dida-code-submit-div"},ha=J({__name:"ProblemDetail",setup(e){let t=ne();const{globalProperties:a}=te(),s=Le(),l=ce();let r=f("");const d=f(""),V=f(null),p=f(!1),m=f(null);let v=null;const S=f(null),k={},b=f(""),R=f([]);R.value=mt();const $=ve(()=>l.hasAuth(be.ManageProblem)),x=u=>{u&&U.push({name:"problem-list",query:{...t.query,title:"",tag:u.name}})},y=()=>{U.push({name:"manage-problem",params:{problemId:d.value}})},L=()=>{U.push({name:"judge-list",query:{problem_id:d.value}})},c=()=>{},P=()=>{U.push({name:"problem-recommend",params:{problemId:d.value}})},C=async()=>{if(!d.value){_e(a,"问题ID无效");return}const u=parseInt(b.value);if(!Yn(u)){_e(a,"请选择所编写的语言");return}const g=v==null?void 0:v.getValue();if(!g){_e(a,"请输入所需提交的代码");return}const T=await Qn(d.value,u,g);if(T.code!==0){F(a,T.code);return}de(a,"提交成功，正在跳转到详情页面");const _=T.data.id;await U.push({path:"/judge/"+_})},i=u=>{v&&We.setModelLanguage(v.getModel(),ft(u))};return Q(async()=>{if(t.params.problemId&&t.params.problemId.length===1)d.value=t.params.problemId[0];else{await U.push({name:"problem"});return}p.value=!0;const u=await gt(d.value);if(u.code!==0){p.value=!1,F(a,u.code),await U.push({name:"problem"});return}u.data.tags&&u.data.tags.forEach(_=>{k[_.id]=_}),m.value=qe(u.data.problem,k),s.setTitle(m.value.title+" - "+s.getTitle);let g=m.value.description;const T={math:{inlineDigit:!0,engine:"KaTeX"}};r.value=await le.md2html(g,T),await he(()=>{V.value&&(le.mathRender(V.value),le.highlightRender({lineNumber:!0,enable:!0},V.value),Xe(V.value),S.value&&(v=We.create(S.value,{value:"",language:"cpp",minimap:{enabled:!0},colorDecorators:!0,readOnly:!1,theme:"vs-dark"}))),p.value=!1})}),(u,g)=>{const T=oe,_=pe,h=A,j=ze,H=ue,N=Re,ee=ot,K=at,O=me,q=fe;return I(),z(q,{loading:p.value},{default:o(()=>[n(O,{class:"dida-main-content"},{default:o(()=>[n(_,{span:8},{default:o(()=>[n(T,{style:{margin:"10px"}},{default:o(()=>[E("div",{innerHTML:re(r),ref_key:"markdownRef",ref:V},null,8,ma)]),_:1})]),_:1}),n(_,{span:4},{default:o(()=>[E("div",pa,[E("div",fa,[$.value?(I(),z(h,{key:0,onClick:y},{default:o(()=>g[1]||(g[1]=[w("编辑")])),_:1})):se("",!0)]),n(N,{layout:"vertical",bordered:!0},{default:o(()=>[n(j,{label:"标题"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.title),1)]}),_:1}),n(j,{label:"时间限制"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.timeLimit),1)]}),_:1}),n(j,{label:"内存限制"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.memoryLimit),1)]}),_:1}),n(j,{label:"判题方式"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.judgeType),1)]}),_:1}),n(j,{label:"正确提交"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.accept),1)]}),_:1}),n(j,{label:"提交总数"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.attempt),1)]}),_:1}),n(j,{label:"创建时间"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.insertTime),1)]}),_:1}),n(j,{label:"更新时间"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.updateTime),1)]}),_:1}),n(j,{label:"上传用户"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.creatorNickname),1)]}),_:1}),n(j,{label:"题目来源"},{default:o(()=>{var D;return[w(M((D=m.value)==null?void 0:D.source),1)]}),_:1}),n(j,{label:"标签"},{default:o(()=>[n(H,null,{default:o(()=>{var D;return[(I(!0),X(Z,null,ae((D=m.value)==null?void 0:D.tags,W=>(I(),z(h,{key:W.id,variant:"dashed",onClick:()=>x(W)},{default:o(()=>[w(M(W.name),1)]),_:2},1032,["onClick"]))),128))]}),_:1})]),_:1})]),_:1}),E("div",_a,[n(H,null,{default:o(()=>[n(h,{onClick:L},{default:o(()=>g[2]||(g[2]=[w("提交记录")])),_:1}),n(h,{onClick:c},{default:o(()=>g[3]||(g[3]=[w("题目讨论")])),_:1}),n(h,{onClick:P},{default:o(()=>g[4]||(g[4]=[w("题目推荐")])),_:1})]),_:1})]),E("div",ga,[n(H,null,{default:o(()=>[n(K,{modelValue:b.value,"onUpdate:modelValue":g[0]||(g[0]=D=>b.value=D),label:"语言：",placeholder:"请选择提交语言","auto-width":"",clearable:"",onChange:i},{default:o(()=>[(I(!0),X(Z,null,ae(R.value,D=>(I(),z(ee,{key:D.value,value:D.value,label:D.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),n(h,{onClick:C},{default:o(()=>g[5]||(g[5]=[w("提交")])),_:1})]),_:1}),E("div",{ref_key:"codeEditRef",ref:S,class:"dida-code-editor"},null,512)])])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),va=G(ha,[["__scopeId","data-v-0ced73e3"]]),ba={};function ya(e,t){return" TODO "}const wa=G(ba,[["render",ya]]);function ka(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}const Ca=J({__name:"JudgeJobList",setup(e){const t=ne(),a=Ee(),{globalProperties:s}=te();let l=!1,r=null;const d=f({problemId:"",username:"",language:void 0,status:void 0}),V=f([{title:"ID",colKey:"id",cell:(i,u)=>n(A,{variant:"text",onClick:()=>x(u.row.id)},{default:()=>[u.row.id]})},{title:"问题",colKey:"problemId",cell:(i,u)=>n(A,{variant:"text",onClick:()=>$(u.row.problemId)},{default:()=>[u.row.problemId]})},{title:"状态",colKey:"status",align:"center",cell:(i,u)=>{const g=u.row.status,T=je(g);let _;switch(g){case B.Init:case B.Rejudge:case B.Compiling:case B.Running:_="default";break;case B.Accept:_="success";break;case B.PE:_="warning";break;default:_="danger";break}let h=[];return ye(g)&&h.push(n(fe,{text:u.row.state,size:"small",class:"dida-status-loading"},null)),h.push(n("span",null,[T])),n(A,{theme:_,variant:"outline",onClick:()=>x(u.row.id)},ka(h)?h:{default:()=>[h]})}},{title:"分数",colKey:"score"},{title:"时间",colKey:"time"},{title:"内存",colKey:"memory"},{title:"代码",colKey:"code",cell:(i,u)=>n(A,{theme:"default",onClick:()=>x(u.row.id)},{default:()=>[u.row.language+" / "+u.row.codeLength]})},{title:"作者",colKey:"author",width:200,cell:(i,u)=>n(A,{variant:"text",onClick:()=>y(u.row.authorUsername)},{default:()=>[u.row.authorNickname]})},{title:"提交时间",colKey:"approveTime",width:180}]),p=f(!1);let m=1,v=50;const S=f({defaultPageSize:v,defaultCurrent:m,total:0,pageSizeOptions:[50,100]}),k=f(),b=f([]);b.value=mt();const R=f([]);R.value=Zn();const $=i=>{i&&a.push({path:"/problem/"+i})},x=i=>{i&&a.push({path:"/judge/"+i})},y=i=>{i&&a.push({path:"/user/"+i})},L=async()=>{await a.push({query:{...t.query,page:1,page_size:v,problem_id:d.value.problemId,username:d.value.username,language:d.value.language,status:d.value.status}})},c=async()=>{d.value.problemId="",d.value.username="",d.value.language=void 0,d.value.status=void 0,await a.push({query:{...t.query,page:1,page_size:v,problem_id:"",username:"",language:void 0,status:void 0}})},P=async(i,u)=>{u&&(p.value=!0);let g=!1;try{const{current:T,pageSize:_}=i,h=await ta(d.value.problemId,d.value.username,d.value.language,d.value.status,T,_);k.value=[],h.code===0?h.data.list&&h.data.list.length>0?(h.data.list.forEach(H=>{var ee;const N=_t(H);(ee=k.value)==null||ee.push(N),ye(H.status)&&(g=!0)}),S.value={...S.value,total:h.data.total_count}):(de(s,"未找到记录"),S.value={...S.value,total:0}):u&&F(s,h.code)}catch(T){console.error(T),u&&F(s,Ae())}finally{u&&(p.value=!1),g&&l&&setTimeout(()=>{P({current:m,pageSize:v},!1)},5e3)}},C=async i=>{await a.push({query:{...t.query,page:i.current,page_size:i.pageSize}})};return Q(async()=>{l=!0,r=De(()=>t.query,i=>{d.value.problemId=i.problem_id||"",d.value.username=i.username||"",i.language!=null?d.value.language=Number(i.language):d.value.language=void 0,i.status!=null?d.value.status=Number(i.status):d.value.status=void 0;const u=parseInt(i.page)||S.value.defaultCurrent,g=parseInt(i.page_size)||S.value.defaultPageSize;m=u,v=g,S.value={...S.value,defaultCurrent:m,defaultPageSize:v},P({current:m,pageSize:v},!0)},{immediate:!0})}),we(()=>{l=!1,r&&r()}),(i,u)=>{const g=Se,T=Ce,_=ot,h=at,j=A,H=ue,N=ke,ee=ge,K=oe;return I(),z(K,{style:{margin:"10px"}},{default:o(()=>[n(N,{layout:"inline",onSubmit:L,onReset:c},{default:o(()=>[n(T,{label:"题号"},{default:o(()=>[n(g,{modelValue:d.value.problemId,"onUpdate:modelValue":u[0]||(u[0]=O=>d.value.problemId=O),placeholder:"请输入完整题号"},null,8,["modelValue"])]),_:1}),n(T,{label:"用户"},{default:o(()=>[n(g,{modelValue:d.value.username,"onUpdate:modelValue":u[1]||(u[1]=O=>d.value.username=O),placeholder:"仅支持输入完整用户名"},null,8,["modelValue"])]),_:1}),n(T,{label:"语言"},{default:o(()=>[n(h,{modelValue:d.value.language,"onUpdate:modelValue":u[2]||(u[2]=O=>d.value.language=O),placeholder:"请选择提交语言","auto-width":"",clearable:""},{default:o(()=>[(I(!0),X(Z,null,ae(b.value,O=>(I(),z(_,{key:O.value,value:O.value,label:O.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(T,{label:"状态"},{default:o(()=>[n(h,{modelValue:d.value.status,"onUpdate:modelValue":u[3]||(u[3]=O=>d.value.status=O),placeholder:"请选择评测状态","auto-width":"",clearable:""},{default:o(()=>[(I(!0),X(Z,null,ae(R.value,O=>(I(),z(_,{key:O.value,value:O.value,label:O.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(T,null,{default:o(()=>[n(H,null,{default:o(()=>[n(j,{theme:"primary",type:"submit"},{default:o(()=>u[4]||(u[4]=[w("搜索")])),_:1}),n(j,{theme:"default",variant:"base",type:"reset"},{default:o(()=>u[5]||(u[5]=[w("重置")])),_:1})]),_:1})]),_:1})]),_:1}),n(ee,{data:k.value,columns:V.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:S.value,loading:p.value,onPageChange:C},null,8,["data","columns","pagination","loading"])]),_:1})}}}),Sa=G(Ca,[["__scopeId","data-v-8238a01f"]]),La=["innerHTML"];function Ye(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}const Ia=J({__name:"JudgeJobDetail",setup(e){const t=ne(),a=Ee(),{globalProperties:s}=te();let l=!1,r=-1;const d=f(null),V=f(""),p=f(null),m=f([{title:"ID",colKey:"id"},{title:"问题",colKey:"problemId",cell:(x,y)=>n(A,{variant:"text",onClick:()=>k(y.row.problemId)},{default:()=>[y.row.problemId]})},{title:"状态",colKey:"status",align:"center",cell:(x,y)=>{const L=y.row.status,c=je(L);let P;switch(L){case B.Init:case B.Rejudge:case B.Compiling:case B.Running:P="default";break;case B.Accept:P="success";break;case B.PE:P="warning";break;default:P="danger";break}let C=[];return ye(L)&&C.push(n(fe,{text:y.row.state,size:"small",class:"dida-status-loading"},null)),C.push(n("span",null,[c])),n(A,{theme:P,variant:"outline"},Ye(C)?C:{default:()=>[C]})}},{title:"分数",colKey:"score"},{title:"时间",colKey:"time"},{title:"内存",colKey:"memory"},{title:"代码",colKey:"language",cell:(x,y)=>n("span",null,[y.row.language+" / "+y.row.codeLength])},{title:"作者",colKey:"author",cell:(x,y)=>n(A,{variant:"text",onClick:()=>b(y.row.authorUsername)},{default:()=>[y.row.authorNickname]})},{title:"提交时间",colKey:"approveTime",width:180}]),v=f(!1),S=f(),k=x=>{x&&a.push({path:"/problem/"+x})},b=x=>{x&&a.push({path:"/user/"+x})},R=x=>{const y=x.status,L=je(y);let c;switch(y){case B.Init:case B.Rejudge:case B.Compiling:case B.Running:c="default";break;case B.Accept:c="success";break;case B.PE:c="warning";break;default:c="danger";break}return n(ue,null,{default:()=>[n(A,{theme:"default",variant:"outline"},{default:()=>[x.taskId]}),n(A,{theme:c,variant:"outline"},Ye(L)?L:{default:()=>[L]}),n("span",null,[w("分数："),x.score]),n("span",null,[w("用时："),x.time]),n("span",null,[w("内存："),x.memory])]})},$=async x=>{var L;x&&(v.value=!0);let y=!1;try{const c=await ea(r);if(S.value=[],c.code===0){const P=c.data,C=_t(P);(L=S.value)==null||L.push(C);const i={};if(P.code){const g=`\`\`\`${ft(P.language)}
${P.code}
\`\`\``;V.value=await le.md2html(g,i),await he(()=>{p.value&&(le.highlightRender({lineNumber:!0,enable:!0},p.value),Xe(p.value))})}d.value=C,ye(P.status)&&(y=!0)}else x&&F(s,c.code)}catch(c){console.error(c),x&&F(s,Ae())}finally{x&&(v.value=!1),y&&l&&setTimeout(()=>{$(!1)},5e3)}};return Q(async()=>{if(l=!0,t.params.judgeId&&t.params.judgeId.length===1)r=parseInt(t.params.judgeId[0]);else{await a.push({name:"judge"});return}await $(!0)}),we(()=>{l=!1}),(x,y)=>{var i,u;const L=ge,c=oe,P=lt,C=st;return I(),X(Z,null,[n(c,{style:{margin:"10px"}},{default:o(()=>[n(L,{data:S.value,columns:m.value,"row-key":"id","vertical-align":"top",hover:!0,loading:v.value},null,8,["data","columns","loading"])]),_:1}),E("div",{innerHTML:V.value,ref_key:"markdownCodeRef",ref:p},null,8,La),(i=d.value)!=null&&i.compileMessage?(I(),z(c,{key:0,class:"compile-message"},{default:o(()=>{var g;return[w(M((g=d.value)==null?void 0:g.compileMessage),1)]}),_:1})):se("",!0),((u=d.value)==null?void 0:u.task.length)>0?(I(),z(C,{key:1,class:"task-panel"},{default:o(()=>{var g;return[(I(!0),X(Z,null,ae((g=d.value)==null?void 0:g.task,T=>(I(),z(P,{key:T.taskId,header:()=>R(T)},{default:o(()=>[w(M(T.content)+" "+M(T.waHint),1)]),_:2},1032,["header"]))),128))]}),_:1})):se("",!0)],64)}}}),Ta=G(Ia,[["__scopeId","data-v-d49229ed"]]);function Pa(e){let t="";for(e++;e>0;)e--,t=String.fromCharCode(65+e%26)+t,e=Math.floor(e/26);return t}async function vt(e){const t={};if(t.id=e.id,t.ownerId=e.owner_id,t.ownerUsername=e.owner_username,t.ownerNickname=e.owner_nickname,t.title=e.title,t.startTime=new Date(e.start_time).toLocaleString(),t.endTime=new Date(e.end_time).toLocaleString(),e.descriptions){t.descriptions=[];const a={math:{inlineDigit:!0,engine:"KaTeX"}};for(let s=0;s<e.descriptions.length;s++){const l=e.descriptions[s],r={};r.title=l.title,r.content=await le.md2html(l.content,a),r.sort=l.sort,t.descriptions.push(r)}}if(t.notification=e.notification,e.problems){t.problems=[],e.problems.sort((a,s)=>a.sort-s.sort);for(let a=0;a<e.problems.length;a++){const s=e.problems[a];s.accept||(s.accept=0),s.attempt||(s.attempt=0),s.id=Pa(a),t.problems.push(s)}}return t}function xa(e){return Y({url:"/contest?id="+e,method:"get"})}function Va(e,t){return Y({url:"/contest/list?page="+e+"&page_size="+t,method:"get"})}function ja(e){return Y({url:"/contest/create",method:"post",data:e})}const $a={style:{margin:"10px"}},Da=J({__name:"ContestList",setup(e){const t=ne(),a=Ee(),{globalProperties:s}=te();let l=null;const r=f(!1),d=f(!1),V=f([{title:"ID",colKey:"id",width:"100",cell:(C,i)=>n(A,{variant:"text",onClick:()=>$(i.row.id)},{default:()=>[i.row.id]})},{title:"标题",colKey:"title",cell:(C,i)=>n(A,{variant:"text",onClick:()=>$(i.row.id)},{default:()=>[i.row.title]})},{title:"负责人",colKey:"ownerNickname",width:"200"},{title:"开始时间",colKey:"startTime",width:"180"},{title:"结束时间",colKey:"endTime",width:"180"}]),p=f(!1);let m=1,v=50;const S=f({defaultPageSize:v,defaultCurrent:m,total:0,pageSizeOptions:[50,100]}),k=f(),b=f({title:"",username:""}),R=f({title:"",description:"",open_time:[]}),$=C=>{C&&a.push({path:"/contest/"+C})},x=async()=>{await a.push({query:{...t.query,title:b.value.title,username:b.value.username,page:1,page_size:S.value.defaultPageSize}})},y=async(C,i)=>{var u;p.value=!0;try{const{current:g,pageSize:T}=C,_=await Va(g,T);if(k.value=[],_.code===0){const h=_.data.list;for(let j=0;j<h.length;j++){const H=h[j],N=await vt(H);(u=k.value)==null||u.push(N)}S.value={...S.value,total:_.data.total_count}}else i&&F(s,_.code)}catch(g){console.error(g),F(s,Ae())}finally{p.value=!1}},L=async C=>{await a.push({query:{...t.query,page:C.current,page_size:C.pageSize}})},c=()=>{r.value=!0},P=async()=>{d.value=!0,console.log("contestCreateForm",R.value),ja(R.value).then(C=>{C.code===0?(de(s,"创建比赛成功"),r.value=!1,a.push({path:"/contest/"+C.data.id})):F(s,C.code)}).finally(()=>{d.value=!1})};return Q(async()=>{l=De(()=>t.query,C=>{b.value.title=C.title||"",b.value.username=C.username||"";const i=parseInt(C.page)||S.value.defaultCurrent,u=parseInt(C.page_size)||S.value.defaultPageSize;m=i,v=u,S.value={...S.value,defaultCurrent:m,defaultPageSize:v},y({current:m,pageSize:v},!0)},{immediate:!0})}),we(()=>{l&&l()}),(C,i)=>{const u=ge,g=oe,T=pe,_=Se,h=Ce,j=A,H=ke,N=ue,ee=me,K=Ft,O=Gt;return I(),X(Z,null,[n(ee,null,{default:o(()=>[n(T,{span:9},{default:o(()=>[n(g,{style:{margin:"10px"}},{default:o(()=>[n(u,{data:k.value,columns:V.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:S.value,loading:p.value,onPageChange:L},null,8,["data","columns","pagination","loading"])]),_:1})]),_:1}),n(T,{span:3},{default:o(()=>[E("div",$a,[n(g,{class:"sh-card"},{default:o(()=>[n(H,{model:b.value},{default:o(()=>[n(h,{label:"标题"},{default:o(()=>[n(_,{modelValue:b.value.title,"onUpdate:modelValue":i[0]||(i[0]=q=>b.value.title=q),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),n(h,{label:"负责人"},{default:o(()=>[n(_,{modelValue:b.value.username,"onUpdate:modelValue":i[1]||(i[1]=q=>b.value.username=q),placeholder:"仅支持输入完整用户名"},null,8,["modelValue"])]),_:1}),n(h,null,{default:o(()=>[n(j,{theme:"primary",onClick:x},{default:o(()=>i[6]||(i[6]=[w("提交")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),n(g,{class:"sh-card"},{default:o(()=>[n(N,null,{default:o(()=>[n(j,{onClick:c},{default:o(()=>i[7]||(i[7]=[w("创建")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),n(O,{visible:r.value,"onUpdate:visible":i[5]||(i[5]=q=>r.value=q),header:"创建比赛",onConfirm:P,"confirm-loading":d.value},{default:o(()=>[n(H,{"label-width":80,model:R.value,onSubmit:i[4]||(i[4]=Ve(()=>{},["prevent"]))},{default:o(()=>[n(h,{label:"标题"},{default:o(()=>[n(_,{modelValue:R.value.title,"onUpdate:modelValue":i[2]||(i[2]=q=>R.value.title=q),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),n(h,{label:"开启时间"},{default:o(()=>[n(K,{"enable-time-picker":"","allow-input":"",clearable:"",modelValue:R.value.open_time,"onUpdate:modelValue":i[3]||(i[3]=q=>R.value.open_time=q)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"])],64)}}}),ie=G(Da,[["__scopeId","data-v-743254ea"]]),Ea=["innerHTML"],Ra={style:{margin:"12px"}},za=J({__name:"ContestDetail",setup(e){let t=ne();const{globalProperties:a}=te(),s=f(""),l=f(!1),r=f(null),d=f([{title:"ID",colKey:"id",cell:(p,m)=>n(A,{variant:"text"},{default:()=>[m.row.id]})},{title:"标题",colKey:"title",cell:(p,m)=>n(A,{variant:"text"},{default:()=>[m.row.title]})},{title:"正确",colKey:"accept"},{title:"提交",colKey:"attempt"}]),V=f([]);return Q(async()=>{if(t.params.contestId&&t.params.contestId.length===1)s.value=t.params.contestId[0];else{await U.push({name:"contest"});return}l.value=!0;const p=await xa(s.value);if(p.code!==0){l.value=!1,F(a,p.code),await U.push({name:"contest"});return}r.value=await vt(p.data),V.value=r.value.problems,await he(()=>{const m=document.querySelectorAll(".contest-description");m&&m.length>0&&m.forEach(v=>{le.mathRender(v),le.highlightRender({lineNumber:!0,enable:!0},v),Xe(v)}),l.value=!1})}),(p,m)=>{const v=Kt,S=A,k=ue,b=lt,R=st,$=ge,x=oe,y=pe,L=ze,c=Re,P=me,C=fe;return I(),z(C,{loading:l.value},{default:o(()=>[n(P,{class:"dida-main-content"},{default:o(()=>[n(y,{span:8},{default:o(()=>{var i,u,g;return[E("h1",null,M((i=r.value)==null?void 0:i.title),1),(u=r.value)!=null&&u.notification?(I(),z(v,{key:0,theme:"info",message:(g=r.value)==null?void 0:g.notification},null,8,["message"])):se("",!0),n(R,{"default-value":[0],"expand-icon":!1,borderless:!0},{default:o(()=>{var T;return[(I(!0),X(Z,null,ae((T=r.value)==null?void 0:T.descriptions,(_,h)=>(I(),z(b,{key:h,header:_.title},Ue({default:o(()=>[E("div",{innerHTML:_.content,class:"dida-content-description"},null,8,Ea)]),_:2},[h===0?{name:"headerRightContent",fn:o(()=>[n(k,{size:"small"},{default:o(()=>[n(S,{size:"small"},{default:o(()=>m[0]||(m[0]=[w("收起全部")])),_:1}),n(S,{size:"small"},{default:o(()=>m[1]||(m[1]=[w("展开全部")])),_:1})]),_:1})]),key:"0"}:void 0]),1032,["header"]))),128))]}),_:1}),n(x,{style:{margin:"10px"}},{default:o(()=>[n($,{data:V.value,columns:d.value,"row-key":"id","vertical-align":"top",hover:!0},null,8,["data","columns"])]),_:1})]}),_:1}),n(y,{span:4},{default:o(()=>[E("div",Ra,[n(c,{layout:"vertical",bordered:!0},{default:o(()=>[n(L,{label:"开始时间"},{default:o(()=>{var i;return[w(M((i=r.value)==null?void 0:i.startTime),1)]}),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),Ma=G(za,[["__scopeId","data-v-7aec72d2"]]),Aa=J({__name:"ManageJudge",setup(e){const{globalProperties:t}=te(),a=async()=>{const s=await na();if(s.code!==0){F(t,s.code);return}de(t,"重判成功")};return(s,l)=>{const r=A,d=oe;return I(),z(d,{class:"yj-manage-card",title:"重判"},{default:o(()=>[n(r,{onClick:a},{default:o(()=>l[0]||(l[0]=[w("重判")])),_:1})]),_:1})}}}),qa=G(Aa,[["__scopeId","data-v-6a8b6bc2"]]),Ha={style:{margin:"10px"}},Oa={key:1},Ua={style:{margin:"12px"}},Na={class:"dida-edit-container"},Fa=J({__name:"ProblemEdit",setup(e){let t=ne();const{globalProperties:a}=te(),s=Le(),l=f(""),r=f(!1);let d=null;const V=f(null),p=f({title:"",timeLimit:0,memoryLimit:0,source:"",tags:[]}),m=f([]),v=f([]),S=ve(()=>{const L=[],c=m.value;for(let P=0,C=c.length;P<C;P++)c[P].value&&L.push(c[P].value);return L}),k=(L,c)=>{const{trigger:P,index:C,item:i}=c;if(P==="clear"&&(m.value=[]),["tag-remove","backspace"].includes(P)&&m.value.splice(C,1),P==="enter"){for(let g=0;g<v.value.length;g++){const T=v.value[g];if(T.label===i){for(let _=0;_<m.value.length;_++)if(m.value[_].label===T.label)return;m.value.push(T);return}}const u={label:i,value:i};m.value.push(u),v.value=v.value.concat(u)}},b=(L,{current:c,type:P})=>{if(!c){m.value=P==="check"?v.value.slice(1):[];return}if(P==="check"){const C=v.value.find(i=>i.value===c);if(!C)return;m.value.push(C)}else m.value=m.value.filter(C=>C.value!==c)},R=()=>{U.push({name:"problem-detail",params:{problemId:l.value}})},$=()=>{U.push({name:"manage-problem-judge",params:{problemId:l.value}})},x=async()=>{if(!d)return;p.value.tags=[];for(let c=0;c<m.value.length;c++){const P=m.value[c];P&&P.label&&p.value.tags.push(P.label)}const L=await la(l.value,p.value.title,p.value.timeLimit,p.value.memoryLimit,p.value.source,p.value.tags,d.getValue());if(L.code!==0){F(a,L.code);return}_n(a,"保存成功")},y=async()=>{const L=await gt(l.value);if(L.code!==0){F(a,L.code),await U.push({name:"problem"});return}const c=L.data.problem;if(V.value=qe(c,{}),p.value.title=c.title,p.value.timeLimit=c.time_limit,p.value.memoryLimit=c.memory_limit,p.value.source=c.source,p.value.tags=[],m.value=[],L.data.tags)for(let i=0;i<L.data.tags.length;i++){const u=L.data.tags[i];u&&u.name&&(p.value.tags.push(u.name),m.value.push({label:u.name,value:u.id}))}s.setTitle(c.title+" - "+s.getTitle);let P=c.description;const C={after:()=>{d==null||d.setValue(P)}};d=new le("codeEditRef",C),r.value=!1};return Q(async()=>{if(t.params.problemId&&t.params.problemId.length===1)l.value=t.params.problemId[0];else{await U.push({name:"problem"});return}r.value=!0,ht(-1).then(async L=>{L.code===0?(L.data.list&&L.data.list.forEach(c=>{v.value.push({label:c.name,value:c.id})}),await y()):(F(a,L.code),await U.push({name:"problem"}))}).catch(async L=>{console.error(L),F(a,"获取数据异常"),await U.push({name:"problem"})})}),(L,c)=>{const P=Se,C=Ce,i=Bt,u=Wt,g=Xt,T=ke,_=oe,h=pe,j=A,H=ue,N=ze,ee=Re,K=me,O=fe;return I(),z(O,{loading:r.value},{default:o(()=>[n(K,null,{default:o(()=>[n(h,{span:8},{default:o(()=>[E("div",Ha,[n(_,{class:"sh-card"},{default:o(()=>[n(T,{model:p.value},{default:o(()=>[n(C,{label:"标题"},{default:o(()=>[n(P,{modelValue:p.value.title,"onUpdate:modelValue":c[0]||(c[0]=q=>p.value.title=q),placeholder:"问题标题"},null,8,["modelValue"])]),_:1}),n(C,{label:"时间限制"},{default:o(()=>[n(i,{modelValue:p.value.timeLimit,"onUpdate:modelValue":c[1]||(c[1]=q=>p.value.timeLimit=q),theme:"normal",min:0},{suffix:o(()=>c[4]||(c[4]=[E("span",null,"ms",-1)])),_:1},8,["modelValue"])]),_:1}),n(C,{label:"内存限制"},{default:o(()=>[n(i,{modelValue:p.value.memoryLimit,"onUpdate:modelValue":c[2]||(c[2]=q=>p.value.memoryLimit=q),theme:"normal",min:0},{suffix:o(()=>c[5]||(c[5]=[E("span",null,"KB",-1)])),_:1},8,["modelValue"])]),_:1}),n(C,{label:"来源"},{default:o(()=>[n(P,{modelValue:p.value.source,"onUpdate:modelValue":c[3]||(c[3]=q=>p.value.source=q),placeholder:"请输入题目来源"},null,8,["modelValue"])]),_:1}),n(C,{label:"标签"},{default:o(()=>[n(g,{value:m.value,"allow-input":!0,placeholder:"请选择或输入","tag-input-props":{excessTagsDisplayType:"break-line"},"popup-props":{overlayInnerClassName:["narrow-scrollbar"],overlayInnerStyle:{maxHeight:"280px",overflowY:"auto",overscrollBehavior:"contain",padding:"6px"}},clearable:"",multiple:"",onTagChange:k},{panel:o(()=>[v.value.length?(I(),z(u,{key:0,value:S.value,options:v.value,onChange:b},null,8,["value","options"])):(I(),X("div",Oa,"暂无数据"))]),suffixIcon:o(()=>[n(re(Tt))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})])]),_:1}),n(h,{span:4},{default:o(()=>[E("div",Ua,[E("div",Na,[n(H,null,{default:o(()=>[n(j,{onClick:x,theme:"danger"},{default:o(()=>c[6]||(c[6]=[w("保存")])),_:1}),n(j,{onClick:$,theme:"warning"},{default:o(()=>c[7]||(c[7]=[w("判题数据")])),_:1}),n(j,{onClick:R},{default:o(()=>c[8]||(c[8]=[w("查看")])),_:1})]),_:1})]),n(ee,{layout:"vertical",bordered:!0},{default:o(()=>[n(N,{label:"创建时间"},{default:o(()=>{var q;return[w(M((q=V.value)==null?void 0:q.insertTime),1)]}),_:1}),n(N,{label:"更新时间"},{default:o(()=>{var q;return[w(M((q=V.value)==null?void 0:q.updateTime),1)]}),_:1}),n(N,{label:"上传用户"},{default:o(()=>{var q;return[w(M((q=V.value)==null?void 0:q.creatorNickname),1)]}),_:1})]),_:1})])]),_:1})]),_:1}),c[9]||(c[9]=E("div",{id:"codeEditRef",class:"dida-description-editor"},null,-1))]),_:1},8,["loading"])}}}),Ga=G(Fa,[["__scopeId","data-v-f313815d"]]),Ka={style:{margin:"10px"}},Ba={style:{margin:"12px"}},Xa={class:"dida-edit-container"},Wa=J({__name:"ProblemJudge",setup(e){let t=ne();const{globalProperties:a}=te(),s=Le(),l=f(""),r=f(!1),d=f(null);let V=null;const p=f(null),m=f(""),v=f(!1),S=f(!1),k=f([{title:"文件",colKey:"file"},{title:"操作",colKey:"action",cell:(_,h)=>n(A,{onClick:()=>L(h.row.file)},{default:()=>[w("下载")]})}]),b=f([]),R=ve(()=>({border:"2px dashed #ccc",borderRadius:"6px",padding:"20px",textAlign:"center",cursor:"pointer",backgroundColor:v.value?"#f0f9ff":"#fff",transition:"background-color 0.2s ease"})),$=ve(()=>m.value?`已选择：${m.value}`:v.value?"松开文件以上传":"拖拽文件到这里，或点击选择文件"),x=()=>{U.push({name:"problem-detail",params:{problemId:l.value}})},y=()=>{U.push({name:"manage-problem",params:{problemId:l.value}})},L=async _=>{const h=await sa(l.value,_);if(h.code!==0){F(a,h.code);return}const j=document.createElement("a");j.href=h.data,j.target="_blank",j.click(),URL.revokeObjectURL(j.href)},c=async()=>{if(!V){_e(a,"请选择压缩包");return}S.value=!0,ra(l.value,V).then(async _=>{_.code==0?(a.$message.success({duration:3e3,content:"申请成功"}),p.value.value=null,V=null,m.value="",r.value=!0,await T()):F(a,_.code)}).catch(_=>{console.log(_),a.$message.error({duration:3e3,content:"申请失败"})}).finally(()=>{S.value=!1})},P=()=>{var _;(_=p.value)==null||_.click()},C=_=>{const h=_.target.files[0];h&&(m.value=h.name,V=h)},i=_=>{v.value=!0},u=()=>{v.value=!1},g=_=>{_.preventDefault(),_.stopPropagation(),v.value=!1;const h=_.dataTransfer.files[0];if(h){m.value=h.name;const j=new DataTransfer;j.items.add(h),p.value.files=j.files,V=h}},T=async()=>{const _=await aa(l.value);if(_.code!==0){F(a,_.code),await U.push({name:"problem"});return}const h=_.data.problem;d.value=qe(h,{}),s.setTitle(h.title+" - "+s.getTitle),b.value=[],_.data.judges?_.data.judges.forEach(j=>{b.value.push({file:j})}):_e(a,"评测数据不存在"),r.value=!1};return Q(async()=>{if(t.params.problemId&&t.params.problemId.length===1)l.value=t.params.problemId[0];else{await U.push({name:"problem"});return}r.value=!0,await T()}),(_,h)=>{const j=ge,H=pe,N=A,ee=ue,K=ze,O=Re,q=me,D=fe;return I(),z(D,{loading:r.value},{default:o(()=>[n(q,null,{default:o(()=>[n(H,{span:8},{default:o(()=>[E("div",Ka,[E("div",{id:"drop-zone",style:et([R.value,{width:"1000px",height:"30px"}]),onClick:P,onDragenter:Ve(i,["prevent"]),onDragover:h[0]||(h[0]=Ve(()=>{},["prevent"])),onDragleave:Ve(u,["prevent"]),onDrop:g},[E("input",{ref_key:"fileInput",ref:p,type:"file",style:{display:"none"},onChange:C},null,544),w(" "+M($.value),1)],36)]),n(j,{data:b.value,columns:k.value,"row-key":"id","vertical-align":"top",hover:!0},null,8,["data","columns"])]),_:1}),n(H,{span:4},{default:o(()=>[E("div",Ba,[E("div",Xa,[n(ee,null,{default:o(()=>[n(N,{onClick:c,theme:"danger",loading:S.value},{default:o(()=>h[1]||(h[1]=[w("上传")])),_:1},8,["loading"]),n(N,{onClick:y,theme:"warning"},{default:o(()=>h[2]||(h[2]=[w("编辑")])),_:1}),n(N,{onClick:x},{default:o(()=>h[3]||(h[3]=[w("查看")])),_:1})]),_:1})]),n(O,{layout:"vertical",bordered:!0},{default:o(()=>[n(K,{label:"标题"},{default:o(()=>{var W;return[w(M((W=d.value)==null?void 0:W.title),1)]}),_:1}),n(K,{label:"创建时间"},{default:o(()=>{var W;return[w(M((W=d.value)==null?void 0:W.insertTime),1)]}),_:1}),n(K,{label:"更新时间"},{default:o(()=>{var W;return[w(M((W=d.value)==null?void 0:W.updateTime),1)]}),_:1}),n(K,{label:"上传用户"},{default:o(()=>{var W;return[w(M((W=d.value)==null?void 0:W.creatorNickname),1)]}),_:1}),n(K,{label:"评测数据"},{default:o(()=>{var W;return[w(M((W=d.value)==null?void 0:W.judgeMd5),1)]}),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),Ya=G(Wa,[["__scopeId","data-v-9310745f"]]),bt=[{name:"problem-list",tab:"problem",sidebar:"problem-list",path:"",title:"问题列表",icon:"cpu",component:da},{name:"problem-detail",tab:"problem",sidebar:"problem-list",path:":problemId+",title:"问题详情",icon:"cpu",component:va},{name:"problem-recommend",tab:"problem",sidebar:"problem-recommend",path:"recommend/:problemId*",title:"问题推荐",icon:"cpu",component:wa},{name:"judge-list",tab:"judge",sidebar:"judge-list",path:"",title:"评测列表",icon:"cpu",component:Sa},{name:"judge-detail",tab:"judge",sidebar:"judge-list",path:":judgeId+",title:"评测详情",icon:"cpu",component:Ta},{name:"contest-list",tab:"contest",sidebar:"contest-list",path:"",title:"比赛列表",icon:"cpu",component:ie},{name:"contest-recent",tab:"contest",sidebar:"contest-recent",path:"recent",title:"近期比赛",icon:"cpu",component:ie},{name:"contest-detail",tab:"contest-detail",sidebar:"contest-detail",path:":contestId+",title:"比赛详情",icon:"cpu",component:Ma},{name:"contest-problem",tab:"contest-detail",sidebar:"contest-problem",path:":contestId+/problem",title:"问题列表",icon:"cpu",component:ie},{name:"contest-judge",tab:"contest-detail",sidebar:"contest-judge",path:":contestId+/judge",title:"评测列表",icon:"cpu",component:ie},{name:"contest-rank",tab:"contest-detail",sidebar:"contest-rank",path:":contestId+/rank",title:"比赛排名",icon:"cpu",component:ie},{name:"contest-statistics",tab:"contest-detail",sidebar:"contest-statistics",path:":contestId+/statistics",title:"结果统计",icon:"cpu",component:ie},{name:"contest-discuss",tab:"contest-detail",sidebar:"contest-discuss",path:":contestId+/discuss",title:"比赛讨论",icon:"cpu",component:ie},{name:"manage-problem",tab:"manage",sidebar:"manage-problem",disableSidebar:!0,path:"problem/:problemId+",title:"问题编辑",icon:"cpu",component:Ga,auths:[be.ManageProblem]},{name:"manage-problem-judge",tab:"manage",sidebar:"manage-problem-judge",disableSidebar:!0,path:"problem/:problemId+/judge",title:"评测数据",icon:"cpu",component:Ya,auths:[be.ManageProblem]},{name:"manage-judge",tab:"manage",path:"judge",sidebar:"manage-judge",title:"评测管理",icon:"cpu",auths:["i-manage-judge"],component:qa}],Je=(e,t,a,s)=>{s.tab==a&&(s.disableSidebar&&t!=s.sidebar||s.sidebar==null||s.sidebar!=s.name||e.push({name:s.name,title:s.title,icon:s.icon,to:{name:s.name}}))},Ja=(e,t)=>{const a=[];return bt.forEach(s=>{if(it(s)){const l=[];s.children.forEach(r=>{Je(l,e,t,r)}),l.length>0&&a.push({title:s.title,children:l})}else Je(a,e,t,s)}),a},Ze=(e,t)=>{const a=kn(t.tab),s={name:t.name,path:"/"+t.path,meta:{title:t.title+" - "+a.title,tab:t.tab,sidebar:t.sidebar,showSidebar:a.showSidebar,needLogin:a.needLogin||t.needLogin,tabAuths:a.auths,auths:t.auths},component:t.component};a.disablePath||(s.path=a.path+s.path),e.push(s)},Za=e=>{bt.forEach(t=>{it(t)?t.children.forEach(a=>{Ze(e,a)}):Ze(e,t)})},Ie=[];Sn(Ie);Za(Ie);Ie.push({path:"/403",name:"403",component:ct});Ie.push({path:"/:pathMatch(.*)*",name:"404",component:ut});const U=Pt({history:xt("/"),routes:Ie});U.beforeEach((e,t,a)=>{if(e.name==null||!U.hasRoute(e.name)){a({name:"home"});return}const s=e.matched[e.matched.length-1].meta;if(s.redirect){a({name:s.redirect});return}if(s.needLogin){const r=ce();if(r.getToken==null||r.getToken==""){a({name:"login",query:{redirect_uri:e.fullPath}});return}}const l=s.tabAuths;if(l&&!ce().hasAllAuths(l)){a({name:"403",query:{target:e.fullPath}});return}a()});U.afterEach((e,t)=>{if(e.name===t.name)return;const a=Me(),s=Le();let l=null;if(e.matched.length>0&&(l=e.matched[e.matched.length-1].meta),l!=null&&l.title&&s.setTitle(l==null?void 0:l.title),l!=null&&l.showSidebar){a.setSidebarShow(!0);const r=Ja(l==null?void 0:l.sidebar,l==null?void 0:l.tab);a.setMenuList(r),a.setMenuActiveName(l==null?void 0:l.sidebar)}else a.setSidebarShow(!1)});Jt.registerLanguage("verilog",Zt);const yt=Vt();yt.use(jt);const Te=$t(Wn);Te.use(yt);Te.use(U);Te.use(Yt);Te.use(Dt);Te.mount("#app");mn().then(()=>{console.log("Text cache reinitialized")}).catch(e=>{console.error("Text cache reinitialization failed",e)});
