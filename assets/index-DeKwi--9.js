import{bm as Xe,bn as kt,n as ae,r as _,o as ne,G as St,bo as W,bp as j,s as t,bq as n,br as R,F as ee,bs as ie,bt as M,bu as E,ap as S,u as Re,bv as se,bw as ce,aD as oe,g as Qt,bx as Ct,by as Je,bz as It,aM as ea,bA as lt,bB as st,q as ke,y as xe,J as Ce,bC as Pt,c as Te,$ as ta,bD as Ue,bE as qe,ac as aa,bF as na,bG as oa,bH as la,bI as sa,B as ra,bJ as ua}from"./node_modules-zO3nKDJE.js";import{L as he,C as ue,S as pe,a as ia,T as ca,b as ge,A as Tt,c as da,d as ma,e as pa,f as fa,g as Ye,R as ve,B as G,F as je,h as ze,I as Ie,M as Lt,i as xt,j as _a,H as ga,k as va,l as ha,m as ba,n as ya,o as wa,p as ka,q as Sa,r as Pe,D as Ae,s as Ee,t as jt,O as zt,u as ct,P as Ca,v as Vt,w as $t,x as Dt,y as Ia,z as Pa,E as Ta,G as La,J as xa,K as ja,N as za}from"./tdesign-vue-next-78bwmitM.js";import{V as le}from"./vditor-DArazWIS.js";import{e as vt}from"./monaco-editor-DCUKHC_e.js";import{H as Va,v as $a}from"./highlight.js-D9zWiMxS.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const y of c.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function o(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=o(l);fetch(l.href,c)}})();var Le=(e=>(e.Manage="i-manage",e.ManageJudge="i-manage-judge",e.ManageProblem="i-manage-problem",e))(Le||{});const Da={"r-admin":["i-manage","i-manage-judge","i-manage-problem"]};function Ra(e){if(e==null)return[];const a=[];for(const o of e){const s=Da[o];s!=null&&a.push(...s)}return[...new Set(a)]}function Ua(e,a){if(e==null||a==null)return!1;const o=Ra(e);for(const s of a)if(!o.includes(s))return!1;return!0}const be=Xe("user",{state:()=>({token:"",userId:-1,username:"",nickname:"",roles:[]}),getters:{getToken(){return this.token},getUserId(){return this.userId},getUsername(){return this.username},getNickname(){return this.nickname}},actions:{clear(){this.$patch({token:"",userId:-1,username:"",nickname:"",roles:[]})},loadResponse(e){this.$patch({token:e.token,userId:e.user_id,username:e.username,nickname:e.nickname,roles:e.roles})},isLogin(){return this.token!=null&&this.token!=""},hasAuth(e){return this.hasAllAuths([e])},hasAllAuths(e){return e?Ua(this.roles,e):!0}},persist:!0}),Aa="https://oj-api.didapipa.com/",Y=kt.create({baseURL:Aa,timeout:6e4,withCredentials:!0,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});Y.interceptors.request.use(e=>{const o=be().getToken;return o&&(e.headers["X-Token"]=o),e},e=>Promise.reject(e));Y.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)});function Rt(e,a){return Y({url:"/user/login",method:"post",data:{username:e,password:a}})}function Ea(){return Y({url:"/user/login/refresh",method:"post"})}const Ut=Xe("login",{state:()=>({Loaded:!1}),getters:{isLoaded(){return this.Loaded}}}),Ve=Xe("webStyle",{state:()=>({title:""}),getters:{getTitle(){return this.title}},actions:{setTitle(e){this.title=e}}}),Ze=Xe("sidebarStyle",{state:()=>({showSidebar:!1,forceHiddenSidebar:!1,menuActiveName:"",menuList:[]}),getters:{getMenuList(){return this.menuList}},actions:{setSidebarShow(e){this.showSidebar=e},setForceHiddenSidebar(e){this.forceHiddenSidebar=e},setMenuActiveName(e){this.menuActiveName=e},clearMenuList(){this.menuList=[]},setMenuList(e){this.menuList=e},addMenuList(e){this.menuList.push(e)}}}),Ge=kt.create({timeout:6e4,withCredentials:!1,headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});Ge.interceptors.response.use(function(e){return e.data},function(e){return Promise.reject(e)});function Fa(){return Ge({baseURL:"https://r2-oj.didapipa.com",url:"/system/notification.json?"+Date.now(),method:"get"})}function Ma(){return Ge({baseURL:"https://r2-oj.didapipa.com",url:"/status/judger.json?"+Date.now(),method:"get"})}function At(e){return Ge({baseURL:"https://r2-oj.didapipa.com",url:"/status/judger/"+e+".json?"+Date.now(),method:"get"})}function qa(e){return Ge({baseURL:"https://r2-oj.didapipa.com",url:"/status/web.json?"+Date.now(),method:"get"})}const Ga={class:"judger-status-panel"},Oa={class:"judger-status-panel"};function Ha(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Re(e)}const Ka=ae({__name:"SystemStatus",setup(e){const a=_([]),o=_([]),s=_(!1),l=_(!1);let c;const y=i=>{let d="失效",b="danger";const h=new Date,w=new Date(i.updateTime);return h.getTime()-w.getTime()>3e4?(d="离线",b="default"):i.cpuUsage>90?(d="CPU过高",b="warning"):i.memPercent>90?(d="内存过高",b="warning"):(d="在线",b="success"),t(pe,null,{default:()=>[t("span",null,[i.key,S(" - "),i.name]),t("span",null,[i.updateTime]),t(ca,{theme:b,size:"small"},Ha(d)?d:{default:()=>[d]})]})},L=async()=>{const i=[{key:"didaoj",name:"DidaOj"}],d={};for(let h=0;h<a.value.length;h++){const w=a.value[h];d[w.key]=w}const b=[];for(let h=0;h<i.length;h++){const w=i[h],m={key:w.key},v=await qa(w.key);v&&(v.name?m.name=v.name:m.name="-",v.update_time?m.updateTime=new Date(v.update_time).toLocaleString():m.updateTime="-",v.cpu_usage?m.cpuUsage=Number(v.cpu_usage):m.cpuUsage=0,v.mem_usage?m.memUsage=v.mem_usage/(1024*1024*1024):m.memUsage=0,v.mem_total?m.memTotal=v.mem_total/(1024*1024*1024):m.memTotal=0,m.memTotal>0?m.memPercent=Math.round(m.memUsage/m.memTotal*1e4)/100:m.memPercent=0,m.avgMessage=v.avg_message,d[w.key]?(m.cpuUsageFrom=d[w.key].cpuUsage,m.memPercentFrom=d[w.key].memPercent,m.memUsageFrom=d[w.key].memUsage,m.memTotalFrom=d[w.key].memTotal):(m.cpuUsageFrom=0,m.memPercentFrom=0,m.memUsageFrom=0,m.memTotalFrom=0),b.push(m))}a.value=b},g=async()=>{const i=await Ma(),d={};for(let h=0;h<o.value.length;h++){const w=o.value[h];d[w.key]=w}const b=[];for(let h=0;h<i.judgers.length;h++){const w=i.judgers[h],m={key:w.key,name:w.name},v=await At(w.key);v&&(v.name?m.name=v.name:m.name="-",v.update_time?m.updateTime=new Date(v.update_time).toLocaleString():m.updateTime="-",v.cpu_usage?m.cpuUsage=Number(v.cpu_usage):m.cpuUsage=0,v.mem_usage?m.memUsage=v.mem_usage/(1024*1024*1024):m.memUsage=0,v.mem_total?m.memTotal=v.mem_total/(1024*1024*1024):m.memTotal=0,m.memTotal>0?m.memPercent=Math.round(m.memUsage/m.memTotal*1e4)/100:m.memPercent=0,m.avgMessage=v.avg_message,d[w.key]?(m.cpuUsageFrom=d[w.key].cpuUsage,m.memPercentFrom=d[w.key].memPercent,m.memUsageFrom=d[w.key].memUsage,m.memTotalFrom=d[w.key].memTotal):(m.cpuUsageFrom=0,m.memPercentFrom=0,m.memUsageFrom=0,m.memTotalFrom=0),b.push(m))}o.value=b},p=async()=>{await L(),s.value=!1,await g(),l.value=!1};return ne(async()=>{o.value=[],a.value=[],l.value=!0,s.value=!0,await p(),c=setInterval(()=>{p()},5e3)}),St(()=>{clearInterval(c)}),(i,d)=>{const b=ia,h=pe,w=ue,m=he;return j(),W(ee,null,[t(w,{title:"接口状态",class:"judger-status"},{default:n(()=>[t(m,{loading:s.value},{default:n(()=>[R("div",Ga,[(j(!0),W(ee,null,ie(a.value,v=>(j(),M(w,{key:v.key,header:()=>y(v),class:"judge-status-judger"},{footer:n(()=>[R("span",null," 负载信息："+E(v.avgMessage),1)]),default:n(()=>[t(h,{class:"judge-status-judger"},{default:n(()=>[t(b,{title:"CPU使用率",value:v.cpuUsage,animation:{valueFrom:v.cpuUsageFrom,duration:2e3},"animation-start":!0,unit:"%",decimalPlaces:2},null,8,["value","animation"]),t(b,{title:"内存使用率",value:v.memPercent,animation:{valueFrom:v.memPercentFrom,duration:2e3},"animation-start":!0,unit:"%",decimalPlaces:2},null,8,["value","animation"]),t(b,{title:"内存使用量",animation:{valueFrom:v.memUsageFrom,duration:2e3},"animation-start":!0,value:v.memUsage,unit:"GB",decimalPlaces:2},null,8,["animation","value"]),t(b,{title:"内存总量",value:v.memTotal,animation:{valueFrom:v.memTotalFrom,duration:2e3},"animation-start":!0,unit:"GB",decimalPlaces:2},null,8,["value","animation"])]),_:2},1024)]),_:2},1032,["header"]))),128))])]),_:1},8,["loading"])]),_:1}),t(w,{title:"判题机状态",class:"judger-status"},{default:n(()=>[t(m,{loading:l.value},{default:n(()=>[R("div",Oa,[(j(!0),W(ee,null,ie(o.value,v=>(j(),M(w,{key:v.key,header:()=>y(v),class:"judge-status-judger"},{footer:n(()=>[R("span",null," 负载信息："+E(v.avgMessage),1)]),default:n(()=>[t(h,{class:"judge-status-judger"},{default:n(()=>[t(b,{title:"CPU使用率",value:v.cpuUsage,animation:{valueFrom:v.cpuUsageFrom,duration:2e3},"animation-start":!0,unit:"%",decimalPlaces:2},null,8,["value","animation"]),t(b,{title:"内存使用率",value:v.memPercent,animation:{valueFrom:v.memPercentFrom,duration:2e3},"animation-start":!0,unit:"%",decimalPlaces:2},null,8,["value","animation"]),t(b,{title:"内存使用量",animation:{valueFrom:v.memUsageFrom,duration:2e3},"animation-start":!0,value:v.memUsage,unit:"GB",decimalPlaces:2},null,8,["animation","value"]),t(b,{title:"内存总量",value:v.memTotal,animation:{valueFrom:v.memTotalFrom,duration:2e3},"animation-start":!0,unit:"GB",decimalPlaces:2},null,8,["value","animation"])]),_:2},1024)]),_:2},1032,["header"]))),128))])]),_:1},8,["loading"])]),_:1})],64)}}}),Q=(e,a)=>{const o=e.__vccOpts||e;for(const[s,l]of a)o[s]=l;return o},rt=Q(Ka,[["__scopeId","data-v-b8c98192"]]),Na={class:"sh-main"},Ba={class:"dida-swiper-div"},Ja=ae({__name:"HomeView",setup(e){let a=-1;const o=_(null),s=async()=>{o.value=await Fa()};return ne(async()=>{await s(),a=setInterval(()=>{s()},3e4)}),St(()=>{clearInterval(a)}),(l,c)=>{const y=Tt,L=ma,g=da,p=ue,i=ge,d=Ye,b=fa,h=pa,w=ve;return j(),M(w,null,{default:n(()=>[t(i,{span:8},{default:n(()=>[R("div",Na,[o.value?(j(),M(y,{key:0,style:{margin:"20px"},theme:o.value.theme},{default:n(()=>[S(E(o.value.content),1)]),_:1},8,["theme"])):se("",!0),R("div",Ba,[t(g,{class:"dida-swiper"},{default:n(()=>[t(L,null,{default:n(()=>c[0]||(c[0]=[R("img",{src:"https://cdn.codeoj.cn/image/banner.jpg",class:"swiper-img"},null,-1)])),_:1}),t(L,null,{default:n(()=>c[1]||(c[1]=[R("img",{src:"https://cdn.codeoj.cn/image/banner.jpg",class:"swiper-img"},null,-1)])),_:1})]),_:1})]),t(p,{title:"正在完善，欢迎提供意见建议",style:{width:"500px",margin:"0 auto"}},{default:n(()=>c[2]||(c[2]=[R("p",null,[R("a",{href:"https://codeoj.cn/",target:"_blank"},"CodeOJ"),S("的迁移计划")],-1),R("p",null,"正在开发中",-1)])),_:1})])]),_:1}),t(i,{span:4},{default:n(()=>[t(rt),t(p,{style:{margin:"10px"},bordered:!0},{header:n(()=>c[3]||(c[3]=[R("b",null,"友情链接",-1)])),default:n(()=>[t(h,null,{default:n(()=>[t(b,null,{default:n(()=>[t(d,{href:"https://boiltask.com",target:"_blank"},{default:n(()=>c[4]||(c[4]=[S("BoilTask Blog")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Wa=Q(Ja,[["__scopeId","data-v-9eb8a353"]]),Xa={class:"sh-main"},Ya=ae({__name:"View404",setup(e){let a=ce(),o=_(a.fullPath);return(s,l)=>{const c=G;return j(),W("div",Xa,[R("p",null,E(oe(o)),1),l[2]||(l[2]=R("p",null,"该页面无效或已被迁移，请重新选择访问目标",-1)),t(c,{theme:"primary",onClick:l[0]||(l[0]=()=>s.$router.push("/"))},{default:n(()=>l[1]||(l[1]=[S("返回首页")])),_:1})])}}}),Et=Q(Ya,[["__scopeId","data-v-d4218944"]]);let ut=null;async function Za(){ut=await en()}function Qa(e,a="zh"){if(ut==null)return[!1,e.toString()];const o=ut[e.toString()];if(!o)return[!1,e.toString()];let s=o[a];return s||(a="zh",s=o[a]),s?[!0,s]:[!1,e.toString()]}async function en(){return new Promise((e,a)=>{e({404:{zh:"接口未找到"},1e3:{zh:"系统错误"},1002:{zh:"未知错误"},10001:{zh:"权限异常，请重新登陆后再试"},10002:{zh:"参数不符合要求"},10003:{zh:"未找到目标数据"},100001:{zh:"用户名不存在或密码不匹配"}})})}function re(){const{appContext:e}=Qt();return{globalProperties:e.config.globalProperties}}function Se(){return 1e3}function Ft(e,a,o=3e3){e.$message.success({duration:o,content:a})}function me(e,a,o=3e3){e.$message.info({duration:o,content:a})}function fe(e,a,o=3e3){e.$message.error({duration:o,content:a})}function O(e,a,o=3e3){const[s,l]=Qa(a),c=s?l:`系统错误，错误提示[${l}]`;e.$message.error({duration:o,content:c})}const tn={class:"dida-login-footer"},an=ae({__name:"LoginView",setup(e){const{globalProperties:a}=re(),o=be(),s=_(!1),l=_({account:"",password:""}),c=()=>{me(a,"重置成功")},y=({validateResult:L,firstError:g})=>{s.value||(s.value=!0,Rt(l.value.account,l.value.password).then(p=>{if(p.code===0){o.loadResponse(p.data),me(a,"登录成功");let i=a.$route.query.redirect_uri;i||(i="/user/"+p.data.username),a.$router.push({path:i})}else O(a,p.code)}).catch(p=>{console.error("Login error",p),fe(a,"登录失败")}).finally(()=>{s.value=!1}))};return ne(()=>{if(o.isLogin()){a.$router.push({path:"/user"});return}}),(L,g)=>{const p=Ie,i=ze,d=G,b=je,h=Ye,w=ue;return j(),M(w,{class:"yj-login-card",title:"欢迎使用DidaOJ~"},{default:n(()=>[t(b,{ref:"form",data:l.value,colon:!0,onReset:c,onSubmit:y,class:"yj-login-form","label-width":0},{default:n(()=>[t(i,{name:"account"},{default:n(()=>[t(p,{modelValue:l.value.account,"onUpdate:modelValue":g[0]||(g[0]=m=>l.value.account=m),clearable:"",placeholder:"请输入账户名"},{"prefix-icon":n(()=>[t(oe(Ct))]),_:1},8,["modelValue"])]),_:1}),t(i,{name:"password"},{default:n(()=>[t(p,{modelValue:l.value.password,"onUpdate:modelValue":g[1]||(g[1]=m=>l.value.password=m),type:"password",clearable:"",placeholder:"请输入密码"},{"prefix-icon":n(()=>[t(oe(Je))]),_:1},8,["modelValue"])]),_:1}),t(i,null,{default:n(()=>[t(d,{theme:"primary",type:"submit",block:"",loading:s.value},{default:n(()=>g[4]||(g[4]=[S("登录")])),_:1},8,["loading"])]),_:1})]),_:1},8,["data"]),R("div",tn,[t(h,{onClick:g[2]||(g[2]=()=>{oe(a).$router.push({name:"login-forget"})})},{default:n(()=>g[5]||(g[5]=[S("忘记密码")])),_:1}),t(h,{onClick:g[3]||(g[3]=()=>{oe(a).$router.push({name:"register"})})},{default:n(()=>g[6]||(g[6]=[S("注册账户")])),_:1})])]),_:1})}}}),nn=Q(an,[["__scopeId","data-v-b154b79b"]]),on={};function ln(e,a){return" TODO "}const sn=Q(on,[["render",ln]]),rn={class:"dida-login-footer"},un=ae({__name:"RegisterView",setup(e){const{globalProperties:a}=re(),o=be(),s=_(!1),l=_({account:"",password:"",confirmPassword:"",email:""}),c=()=>{me(a,"重置成功")},y=({validateResult:L,firstError:g})=>{s.value||Rt(l.value.account,l.value.password).then(p=>{if(p.code===0){o.loadResponse(p.data),me(a,"登录成功");let i=a.$route.query.redirect_uri;i||(i="/user/"+p.data.username),a.$router.push({path:i})}else O(a,p.code)}).catch(p=>{console.error("Login error",p),fe(a,"登录失败")})};return ne(()=>{if(o.isLogin()){a.$router.push({path:"/user"});return}}),(L,g)=>{const p=Ie,i=ze,d=G,b=je,h=Ye,w=ue;return j(),M(w,{class:"yj-login-card",title:"欢迎使用DidaOJ~"},{default:n(()=>[t(b,{ref:"form",data:l.value,colon:!0,onReset:c,onSubmit:y,class:"yj-login-form","label-width":0},{default:n(()=>[t(i,{name:"account"},{default:n(()=>[t(p,{modelValue:l.value.account,"onUpdate:modelValue":g[0]||(g[0]=m=>l.value.account=m),clearable:"",placeholder:"请输入账户名"},{"prefix-icon":n(()=>[t(oe(Ct))]),_:1},8,["modelValue"])]),_:1}),t(i,{name:"password"},{default:n(()=>[t(p,{modelValue:l.value.password,"onUpdate:modelValue":g[1]||(g[1]=m=>l.value.password=m),type:"password",clearable:"",placeholder:"请输入密码"},{"prefix-icon":n(()=>[t(oe(Je))]),_:1},8,["modelValue"])]),_:1}),t(i,{name:"confirm-password"},{default:n(()=>[t(p,{modelValue:l.value.confirmPassword,"onUpdate:modelValue":g[2]||(g[2]=m=>l.value.confirmPassword=m),type:"password",clearable:"",placeholder:"请确认密码"},{"prefix-icon":n(()=>[t(oe(Je))]),_:1},8,["modelValue"])]),_:1}),t(i,{name:"email"},{default:n(()=>[t(p,{modelValue:l.value.email,"onUpdate:modelValue":g[3]||(g[3]=m=>l.value.email=m),type:"password",clearable:"",placeholder:"邮箱"},{"prefix-icon":n(()=>[t(oe(Je))]),_:1},8,["modelValue"])]),_:1}),t(i,null,{default:n(()=>[t(d,{theme:"primary",type:"submit",block:"",loading:s.value},{default:n(()=>g[5]||(g[5]=[S("注册")])),_:1},8,["loading"])]),_:1})]),_:1},8,["data"]),R("div",rn,[t(h,{onClick:g[4]||(g[4]=()=>{oe(a).$router.push({name:"login"})})},{default:n(()=>g[6]||(g[6]=[S("返回登陆")])),_:1})])]),_:1})}}}),cn=Q(un,[["__scopeId","data-v-ffdf2475"]]),dt=[{name:"home",path:"/",title:"首页",showSidebar:!1,disableGenerateTab:!0,component:Wa},{name:"problem",path:"/problem",title:"题目",icon:"calculation",showSidebar:!0,redirect:"problem-list"},{name:"judge",path:"/judge",title:"评测",icon:"code",showSidebar:!0,redirect:"judge-list"},{name:"contest",path:"/contest",title:"比赛",icon:"application",showSidebar:!0,redirect:"contest-list"},{name:"contest-detail-tab",title:"比赛",path:"/contest",showSidebar:!0,disableGenerateTab:!0,redirect:"contest-list"},{name:"discuss",title:"讨论",path:"/discuss",icon:"sonic",showSidebar:!0,redirect:"discuss-list"},{name:"rank",path:"/rank",title:"排名",icon:"chart-column",showSidebar:!0,redirect:"rank-ac-all"},{name:"tool",path:"/tool",title:"工具",icon:"tools",showSidebar:!0,redirect:"tool-paste"},{name:"system",path:"/system",title:"系统",icon:"dashboard",showSidebar:!0,redirect:"system-status"},{name:"manage",path:"/manage",title:"管理",icon:"command",showSidebar:!0,redirect:"manage-judge",auths:[Le.Manage]},{name:"login",path:"/login",title:"登陆",showSidebar:!1,disableGenerateTab:!0,component:nn},{name:"register",path:"/register",title:"注册",showSidebar:!1,disableGenerateTab:!0,component:cn},{name:"user",path:"/user/:username+",title:"用户",showSidebar:!1,needLogin:!0,disableGenerateTab:!0,component:sn},{name:"404",path:"/404",title:"404",showSidebar:!1,disableGenerateTab:!0,component:Et}],dn=e=>dt.find(a=>a.name==e),mn=e=>{const a=[];return dt.forEach(o=>{!o.disableGenerateTab&&e.hasAllAuths(o.auths)&&a.push(o)}),a},pn=e=>{dt.forEach(a=>{const o={name:a.name,path:a.path,meta:{title:a.title,tab:a.name,showSidebar:a.showSidebar,needLogin:a.needLogin,redirect:a.redirect,tabAuths:a.auths},component:a.component};e.push(o)})},fn=ae({__name:"HeaderContent",setup(e){const a=Ut(),o=be(),{globalProperties:s}=re(),l=_(a.isLoaded),c=_(!1),y=_(o.getUsername),L=_(o.getNickname),g=_(),p=()=>{g.value=mn(o)};a.$subscribe((b,h)=>{l.value=h.Loaded}),o.$subscribe((b,h)=>{y.value=h.username,L.value=h.nickname,c.value=h.token!="",p()});const i=()=>{s.$router.currentRoute.value.name!=="login"&&s.$router.push({name:"login",query:{redirect_uri:s.$router.currentRoute.value.fullPath}})},d=()=>{o.clear(),s.$message.success({duration:3e3,content:"注销成功"}),s.$router.push({path:"/login",query:{redirect_uri:s.$router.currentRoute.value.fullPath}})};return ne(()=>{p()}),(b,h)=>{const w=It("router-link"),m=xt,v=Lt,$=_a,K=ga;return j(),M(K,{modelValue:b.$route.meta.tab,"onUpdate:modelValue":h[0]||(h[0]=x=>b.$route.meta.tab=x),class:"sh-menu","expand-type":"popup"},{logo:n(()=>[t(w,{to:"/",class:"sh-logo"},{default:n(()=>h[1]||(h[1]=[S("DidaOJ")])),_:1})]),operations:n(()=>[l.value&&c.value?(j(),M($,{key:0,title:L.value},{icon:n(()=>[t(m,{name:"user"})]),default:n(()=>[t(v,{value:"user",to:{path:"/user/"+y.value}},{default:n(()=>h[2]||(h[2]=[S("个人空间")])),_:1},8,["to"]),t(v,{value:"user_logout",onClick:d},{default:n(()=>h[3]||(h[3]=[S(" 注销")])),_:1})]),_:1},8,["title"])):l.value?(j(),M(v,{key:2,value:"login",onClick:i},{icon:n(()=>[t(m,{name:"login"})]),default:n(()=>[h[5]||(h[5]=S(" 登录 "))]),_:1})):(j(),M(v,{key:1,value:"login"},{icon:n(()=>[t(m,{name:"login"})]),default:n(()=>[h[4]||(h[4]=S(" ... "))]),_:1}))]),default:n(()=>[(j(!0),W(ee,null,ie(g.value,x=>(j(),M(v,{key:x.name,value:x.name,to:{name:x.name}},{icon:n(()=>[x.icon?(j(),M(m,{key:0,name:x.icon},null,8,["name"])):se("",!0)]),default:n(()=>[S(" "+E(x.title),1)]),_:2},1032,["value","to"]))),128))]),_:1},8,["modelValue"])}}}),_n=Q(fn,[["__scopeId","data-v-c64d812f"]]);function Mt(e){return e.children!==void 0}function gn(e){return e.children!==void 0}const vn={id:"menu-container"},hn=ae({__name:"SidebarContent",setup(e){const a=Ze(),o=_(!1),s=_(null),l=_(a.menuActiveName),c=_(a.menuList),y=_([]),L=_(!1),g=()=>{l.value=a.menuActiveName;const i=JSON.stringify(c.value),d=JSON.stringify(a.menuList);i!==d&&(y.value.push([...a.menuList]),p())},p=async()=>{if(y.value.length>0&&!L.value){for(L.value=!0;y.value.length>1;)y.value.shift();const i=y.value.shift();o.value=i.length<=0,c.value=[],await ke(),s.value&&s.value.updateActiveName(),await new Promise(b=>setTimeout(b,300)),c.value=i,await ke(),s.value&&s.value.updateActiveName();const d=300;await new Promise(b=>setTimeout(b,d)),L.value=!1,await p()}};return a.$subscribe((i,d)=>{g()}),ne(()=>{g()}),(i,d)=>{const b=xt,h=Lt,w=ha,m=va,v=he;return j(),W(ee,null,[R("div",vn,[t(m,{modelValue:l.value,"onUpdate:modelValue":d[0]||(d[0]=$=>l.value=$),theme:"light",class:"sh-menu-container"},{default:n(()=>[t(ea,{name:"move-left"},{default:n(()=>[(j(!0),W(ee,null,ie(c.value,($,K)=>(j(),W(ee,{key:K},[oe(gn)($)?(j(),M(w,{key:0,title:$.title},{default:n(()=>[(j(!0),W(ee,null,ie($.children,(x,V)=>(j(),M(h,{key:x.name,value:x.name,to:x.to},lt({default:n(()=>[S(" "+E(x.title),1)]),_:2},[x.icon?{name:"icon",fn:n(()=>[t(b,{name:x.icon,class:st(x.iconClass)},null,8,["name","class"])]),key:"0"}:void 0]),1032,["value","to"]))),128))]),_:2},1032,["title"])):(j(),M(h,{key:$.name,value:$.name,to:$.to},lt({default:n(()=>[S(" "+E($.title),1)]),_:2},[$.icon?{name:"icon",fn:n(()=>[t(b,{name:$.icon,class:st($.iconClass)},null,8,["name","class"])]),key:"0"}:void 0]),1032,["value","to"]))],64))),128))]),_:1})]),_:1},8,["modelValue"])]),t(v,{size:"small",loading:o.value,"show-overlay":!0,attach:"#menu-container",class:"sh-sidebar-loading",style:{"align-items":"flex-start","padding-top":"100px"}},null,8,["loading"])],64)}}}),bn=Q(hn,[["__scopeId","data-v-96e2d89f"]]),yn={};function wn(e,a){return null}const kn=Q(yn,[["render",wn]]),Sn={class:"footer"},Cn={class:"footer-left"},In={class:"foot-time"},Pn={class:"footer-center"},Tn={href:"https://beiancx.miit.gov.cn/",target:"_blank"},Ln={class:"footer-right"},xn={class:"foot-text"},jn={href:"https://github.com/hpu-developer/DiDaOJ-web",target:"_blank"},zn={class:"foot-text"},Vn={href:"https://github.com/hpu-developer/DiDaOJ-go",target:"_blank"},$n=ae({__name:"FooterContent",setup(e){const a=_("");function o(){a.value=new Date().toLocaleString()}return ne(()=>{o(),setInterval(()=>{o()},1e3)}),(s,l)=>{const c=G;return j(),W("div",Sn,[R("div",Cn,[R("p",In,E(a.value),1)]),R("div",Pn,[R("a",Tn,[t(c,{theme:"default",variant:"outline",ghost:!0},{default:n(()=>l[0]||(l[0]=[S("豫ICP备15024677号-4")])),_:1})])]),R("div",Ln,[R("p",xn,[R("a",jn,[t(c,{theme:"default",variant:"outline",ghost:!0},{default:n(()=>l[1]||(l[1]=[S("@didaoj-web")])),_:1})])]),R("p",zn,[R("a",Vn,[t(c,{theme:"default",variant:"outline",ghost:!0},{default:n(()=>l[2]||(l[2]=[S("@didaoj-go")])),_:1})])])])])}}}),Dn=Q($n,[["__scopeId","data-v-979fed79"]]),Ke=20,tt=100,at=50,Rn=ae({__name:"ForceHiddenSidebarButton",setup(e){let a=Ze();const o=_({x:window.innerWidth-tt-Ke,y:window.innerHeight-at-Ke}),s=_(window.innerWidth),l=_(window.innerHeight);let c=!1,y={x:0,y:0};const L=$=>{c=!0;const K=$.clientX??$.touches[0].clientX,x=$.clientY??$.touches[0].clientY;y={x:K-o.value.x,y:x-o.value.y},document.addEventListener("mousemove",g),document.addEventListener("touchmove",g),document.addEventListener("mouseup",p),document.addEventListener("touchend",p)},g=$=>{if(!c)return;const K=$.clientX??$.touches[0].clientX,x=$.clientY??$.touches[0].clientY;let V=K-y.x,A=x-y.y;V=Math.max(0,Math.min(V,s.value-tt)),A=Math.max(0,Math.min(A,l.value-at)),o.value={x:V,y:A}},p=()=>{c=!1,document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g),document.removeEventListener("mouseup",p),document.removeEventListener("touchend",p)},i=()=>{s.value=window.innerWidth,l.value=window.innerHeight,o.value={x:Math.min(o.value.x,s.value-tt-Ke),y:Math.min(o.value.y,l.value-at-Ke)}};let d=_(a.forceHiddenSidebar),b=_(a.forceHiddenSidebar);const h=()=>{d.value=!d.value,a.setForceHiddenSidebar(d.value)},w=()=>{b.value||(b.value=!0,a.setForceHiddenSidebar(d.value))},m=()=>{b.value&&(b.value=!1,a.setForceHiddenSidebar(!1))},v=$=>{$>=800?m():w()};return v(s.value),xe(s,$=>{v($)}),ne(()=>{window.addEventListener("resize",i)}),Ce(()=>{window.removeEventListener("resize",i)}),($,K)=>{const x=G;return oe(b)?(j(),M(x,{key:0,class:"draggable-button",style:Pt({top:`${o.value.y}px`,left:`${o.value.x}px`}),onMousedown:L,onTouchstart:L,variant:"dashed",theme:"primary",onClick:h},{default:n(()=>[S(E(oe(d)?"显示":"隐藏"),1)]),_:1},8,["style"])):se("",!0)}}}),Un=Q(Rn,[["__scopeId","data-v-1aee5506"]]),An={class:"sh-main"},En=ae({__name:"View403",setup(e){let a=ce();const o=_("");return ne(()=>{a.query.target?o.value=a.query.target:o.value=a.fullPath}),(s,l)=>{const c=G;return j(),W("div",An,[R("p",null,E(o.value),1),l[2]||(l[2]=R("p",null,"该页面无访问权限，请更换访问目标或重新登陆后再试",-1)),t(c,{theme:"primary",onClick:l[0]||(l[0]=()=>s.$router.push("/"))},{default:n(()=>l[1]||(l[1]=[S("返回首页")])),_:1})])}}}),qt=Q(En,[["__scopeId","data-v-777362b3"]]),Ne="DidaOJ",Fn=ae({__name:"App",setup(e){const{globalProperties:a}=re(),o=Ut(),s=be(),l=Ve(),c=Ze();o.$patch({Loaded:!1});const y=s.getToken,L=_(!1),g=_(!1);l.title&&l.title.length>0?document.title=l.title+" - "+Ne:document.title=Ne,l.$subscribe((b,h)=>{h.title&&h.title.length>0?document.title=h.title+" - "+Ne:document.title=Ne}),c.$subscribe((b,h)=>{L.value=h.showSidebar,g.value=L.value&&!h.forceHiddenSidebar});const p=ce(),i=Te(()=>{const b=p.meta.auths;return b?!s.hasAllAuths(b):!1});function d(){a.$message.warning({duration:3e3,content:"登陆状态失效"}),o.$patch({Loaded:!0}),s.clear()}return ne(()=>{if(y==""){o.$patch({Loaded:!0});return}Ea().then(b=>{b.code==0?(s.loadResponse(b.data),o.$patch({Loaded:!0})):(O(a,b.code),o.$patch({Loaded:!0}),s.clear())}).catch(b=>{console.log(b),d()})}),(b,h)=>{const w=ba,m=wa,v=It("RouterView"),$=ka,K=ya,x=Sa;return j(),W(ee,null,[t(K,null,{default:n(()=>[t(w,{class:"sh-header"},{default:n(()=>[t(_n)]),_:1}),t(K,null,{default:n(()=>[t(ta,{name:"slide"},{default:n(()=>[g.value?(j(),M(m,{key:0,class:"sh-sidebar"},{default:n(()=>[t(bn)]),_:1})):se("",!0)]),_:1}),t(K,{class:st(["sh-main-layout",{expanded:!g.value}])},{default:n(()=>[t(kn),t($,{class:"sh-main-content"},{default:n(()=>[i.value?(j(),M(qt,{key:0})):(j(),M(v,{key:1}))]),_:1}),t(Dn)]),_:1},8,["class"])]),_:1})]),_:1}),L.value?(j(),M(Un,{key:0})):se("",!0),t(x,{container:"body",offset:["24px","80px"],size:"small"})],64)}}}),Mn=Q(Fn,[["__scopeId","data-v-9e122cb4"]]);var Gt=(e=>(e[e.Unknown=-1]="Unknown",e[e.C=0]="C",e[e.Cpp=1]="Cpp",e[e.Java=2]="Java",e[e.Python=3]="Python",e[e.Pascal=4]="Pascal",e[e.Golang=5]="Golang",e[e.Max=6]="Max",e))(Gt||{});function Ot(){const e=[-1,5,6];return Object.values(Gt).filter(a=>typeof a=="number"&&!e.includes(a)).map(a=>({value:a,label:Ht(a)}))}function qn(e){return e>-1&&e<6}function Ht(e){switch(e){case 0:return"C";case 1:return"C++";case 2:return"Java";case 3:return"Python";case 4:return"Pascal";case 5:return"Golang";default:return"Unknown"}}function mt(e){switch(e){case 0:return"c";case 1:return"cpp";case 2:return"java";case 3:return"python";case 4:return"pascal";case 5:return"golang";default:return"text"}}var _e=(e=>(e[e.Init=0]="Init",e[e.Rejudge=1]="Rejudge",e[e.Submitting=2]="Submitting",e[e.Queuing=3]="Queuing",e[e.Compiling=4]="Compiling",e[e.Running=5]="Running",e[e.Accept=6]="Accept",e[e.PE=7]="PE",e[e.WA=8]="WA",e[e.TLE=9]="TLE",e[e.MLE=10]="MLE",e[e.OLE=11]="OLE",e[e.RE=12]="RE",e[e.CE=13]="CE",e[e.CLE=14]="CLE",e[e.JudgeFail=15]="JudgeFail",e[e.SubmitFail=16]="SubmitFail",e[e.Unknown=17]="Unknown",e))(_e||{});const Gn=e=>{switch(e){case 0:return"普通评测";case 1:return"特殊评测";default:return"未知"}},We=e=>{switch(e){case 0:return"等待处理";case 1:return"重新评测";case 2:return"提交中";case 3:return"队列中";case 4:return"编译中";case 5:return"运行中";case 6:return"通过";case 7:return"格式错误";case 8:return"答案错误";case 9:return"超时";case 10:return"内存超限";case 11:return"输出超限";case 12:return"运行错误";case 13:return"编译错误";case 14:return"编译超限";case 15:return"评测失败";case 16:return"提交失败";case 17:return"未知";default:return e}},Kt=e=>{switch(e){case 0:case 1:case 2:case 3:case 4:case 5:return"default";case 6:return"success";case 7:return"warning";default:return"danger"}};function On(){const e=[17];return Object.values(_e).filter(a=>typeof a=="number"&&!e.includes(a)).map(a=>({value:a,label:We(a)}))}function $e(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:return!0;default:return!1}}function Nt(e){var o;const a={};if(a.id=e.id,a.problemId=e.problem_id,a.status=e.status,$e(e.status)?a.score="-":a.score=e.score.toString(),e.time?a.time=Math.ceil(e.time/1e6)+"ms":a.time="-",e.memory?a.memory=(e.memory/1024/1024).toFixed(2)+"MB":a.memory="-",a.language=Ht(e.language),a.codeLength=e.code_length,e.approve_time?a.approveTime=new Date(e.approve_time).toLocaleString():a.approveTime="-",a.author=e.author,a.authorUsername=e.author_username,a.authorNickname=e.author_nickname,a.code=e.code,a.compileMessage=e.compile_message,a.taskCurrent=e.task_current,a.taskTotal=e.task_total,a.task=[],e.task)for(let s=0;s<((o=e.task)==null?void 0:o.length);s++){const l=e.task[s],c={};c.taskId=l.task_id,c.status=l.status,l.time?c.time=Math.ceil(l.time/1e6)+"ms":c.time="-",l.memory?c.memory=(l.memory/1024/1024).toFixed(2)+"MB":c.memory="-",c.score=l.score,c.content=l.content,c.waHint=l.wa_hint,!c.content&&!c.waHint&&(c.content="无提示信息"),a.task.push(c)}return e.judger&&(a.judger=e.judger),e.judge_time&&(a.judgeTime=new Date(e.judge_time).toLocaleString()),a}function Hn(e,a,o,s,l){return Y({url:"/judge/approve",method:"post",data:{problem_id:e,contest_id:a,problem_index:o,language:s,code:l}})}function Kn(e){return Y({url:"/judge?id="+e,method:"get"})}function Nn(e){return Y({url:"/judge/code?id="+e,method:"get"})}function Bn(e,a,o,s,l,c){const y=new URLSearchParams({problem_id:e,username:a,language:String(o),status:String(s),page:String(l),page_size:String(c)});return Y({url:`/judge/list?${y.toString()}`,method:"get"})}function Jn(){return Y({url:"/judge/rejudge/recently",method:"post"})}function Wn(e){return Y({url:"/judge/rejudge/problem",method:"post",data:{id:e}})}function Xn(){return Y({url:"/judge/rejudge/all",method:"post",timeout:0})}function Yn(e){return Y({url:"/judge/rejudge",method:"post",data:{id:Number(e)}})}var it=(e=>(e[e.None=0]="None",e[e.Attempt=1]="Attempt",e[e.Accept=2]="Accept",e))(it||{});function Qe(e,a){const o={};if(o.id=e.id,o.author=e.author,o.title=e.title,o.tags=[],e.tags)for(const s of e.tags){const l=a[s];l&&o.tags.push(l)}return o.accept=e.accept,o.attempt=e.attempt,e.description!=null&&(o.description=e.description),e.time_limit!=null&&(o.timeLimit=e.time_limit.toString()+" ms"),e.memory_limit!=null&&(o.memoryLimit=(e.memory_limit/1024).toFixed(2)+" MB"),e.judge_type!=null&&(o.judgeType=Gn(e.judge_type)),e.insert_time!=null&&(o.insertTime=new Date(e.insert_time).toLocaleString()),e.update_time!=null&&(o.updateTime=new Date(e.update_time).toLocaleString()),e.creator_nickname!=null&&(o.creatorNickname=e.creator_nickname),e.source!=null&&(o.source=e.source),e.judge_md5!=null&&(o.judgeMd5=e.judge_md5),o}function Bt(e,a,o){const s={};return e?s.id=e:(s.contest_id=a,s.problem_index=o),Y({url:`/problem?${new URLSearchParams(s).toString()}`,method:"get"})}function Jt(e){return Y({url:"/problem/tag/list?max_count="+e,method:"get"})}function Zn(e){return Y({url:"/problem/judge?id="+e,method:"get"})}function Qn(e,a,o,s){const l={};return e&&(l.title=e),a&&(l.tag=a),o&&(l.page=o),s&&(l.page_size=s),Y({url:`/problem/list?${new URLSearchParams(l).toString()}`,method:"get"})}function eo(e,a,o,s,l,c,y){return Y({url:"/problem/edit",method:"post",data:{id:e,title:a,time_limit:o,memory_limit:s,source:l,tags:c,description:y}})}function to(e,a){return Y({url:"/problem/judge/data/download?id="+e+"&key="+a,method:"get"})}function ao(e,a){const o=new FormData;return o.append("id",e),o.append("zip",a),Y({url:"/problem/judge/data",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"},timeout:1e3*60*5})}const no={style:{margin:"10px"}};function oo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Re(e)}const lo=ae({__name:"ProblemList",setup(e){const a=ce(),o=Ue(),{globalProperties:s}=re();let l=null;const c=_(!1),y={};let L={};const g=_([{title:"ID",colKey:"id",cell:(C,I)=>{let z=$(I.row.id);return t(G,{variant:"dashed",theme:z,onClick:()=>v(I.row.id)},{default:()=>[I.row.id]})}},{title:"标题",colKey:"title",cell:(C,I)=>t(G,{variant:"text",onClick:()=>v(I.row.id)},{default:()=>[I.row.title]})},{title:"标签",colKey:"tags",cell:(C,I)=>{const z=I.row.tags;if(!z||z.length===0)return"";let k=[];for(let u=0;u<z.length;u++){const r=z[u];k.push(t(G,{key:u,theme:"default",variant:"outline",size:"small",onClick:()=>x(r)},{default:()=>[r.name]}))}return t(pe,null,oo(k)?k:{default:()=>[k]})}},{title:"正确",colKey:"accept"},{title:"提交",colKey:"attempt"}]),p=_(!1);let i=1,d=50;const b=_({current:i,pageSize:d,defaultCurrent:i,defaultPageSize:d,total:0,pageSizeOptions:[50,100]}),h=_(),w=_(),m=_({title:"",tag:""}),v=C=>{C&&o.push({path:"/problem/"+C})},$=C=>{if(!C||!L)return"default";const I=L[C];if(!I)return"default";switch(I){case it.Accept:return"success";case it.Attempt:return"warning";default:return"default"}},K=async()=>{await o.push({query:{...a.query,title:m.value.title,tag:m.value.tag,page:1,page_size:b.value.defaultPageSize}})},x=C=>{C&&o.push({query:{...a.query,title:"",tag:C.name,page:1,page_size:b.value.defaultPageSize}})},V=async(C,I)=>{p.value=!0;try{const{current:z,pageSize:k}=C,u=await Qn(m.value.title,m.value.tag,z,k);if(h.value=[],u.code===0){const r=u.data.list;if(!r||r.length<=0){b.value={...b.value,total:0},L=null,me(s,"未找到记录");return}r.forEach(f=>{var T;const P=Qe(f,y);(T=h.value)==null||T.push(P)}),b.value={...b.value,total:u.data.total_count},L=u.data.problem_attempt_status}else I&&O(s,u.code)}catch(z){console.error(z),O(s,Se())}finally{p.value=!1}},A=async C=>{await o.push({query:{...a.query,page:C.current,page_size:C.pageSize}})};return ne(async()=>{p.value=!0,w.value=[],Jt(-1).then(C=>{if(C.code===0){w.value=C.data.list,c.value=C.data.total_count>C.data.list.length;for(let I=0;I<C.data.list.length;I++){const z=C.data.list[I];y[z.id]=z}l=xe(()=>a.query,I=>{m.value.title=I.title||"",m.value.tag=I.tag||"";const z=parseInt(I.page)||b.value.defaultCurrent,k=parseInt(I.page_size)||b.value.defaultPageSize;i=z,d=k,b.value={...b.value,current:i,pageSize:d},V({current:i,pageSize:d},!0)},{immediate:!0})}else c.value=!0}).catch(C=>{console.error(C),c.value=!0})}),Ce(()=>{l&&l()}),(C,I)=>{const z=Pe,k=ue,u=ge,r=Ie,f=ze,P=G,T=je,D=ve;return j(),M(D,null,{default:n(()=>[t(u,{span:9},{default:n(()=>[t(k,{style:{margin:"10px"}},{default:n(()=>[t(z,{data:h.value,columns:g.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:b.value,loading:p.value,onPageChange:A},null,8,["data","columns","pagination","loading"])]),_:1})]),_:1}),t(u,{span:3},{default:n(()=>[R("div",no,[t(k,{class:"sh-card"},{default:n(()=>[t(T,{model:m.value,onSubmit:K},{default:n(()=>[t(f,{label:"标题"},{default:n(()=>[t(r,{modelValue:m.value.title,"onUpdate:modelValue":I[0]||(I[0]=U=>m.value.title=U),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),t(f,{label:"标签"},{default:n(()=>[t(r,{modelValue:m.value.tag,"onUpdate:modelValue":I[1]||(I[1]=U=>m.value.tag=U),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),t(f,null,{default:n(()=>[t(P,{theme:"primary",type:"submit"},{default:n(()=>I[3]||(I[3]=[S("搜索")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(k,{class:"sh-card sh-background-black"},{default:n(()=>[(j(!0),W(ee,null,ie(w.value,U=>(j(),M(P,{class:"sh-tag-button",theme:"default",variant:"outline",ghost:!0,onClick:()=>x(U)},{default:n(()=>[S(E(U.name),1)]),_:2},1032,["onClick"]))),256)),c.value?(j(),M(P,{key:0,class:"sh-tag-button",theme:"default",variant:"outline",ghost:!0,onClick:I[2]||(I[2]=()=>C.$router.push("/problem/tags"))},{default:n(()=>I[4]||(I[4]=[S(" ... ")])),_:1})):se("",!0)]),_:1})])]),_:1})]),_:1})}}}),so=Q(lo,[["__scopeId","data-v-76eb7f95"]]);function De(e){e.querySelectorAll("pre > code:not([data-copy-attached])").forEach(o=>{o.setAttribute("data-copy-attached","true");const s=o.parentElement,l=document.createElement("div");l.className="copy-wrapper";const c=document.createElement("button");c.className="copy-btn",c.innerText="复制",c.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(o.innerText),c.innerText="已复制",setTimeout(()=>c.innerText="复制",1500)}catch{c.innerText="失败"}}),s.replaceWith(l),l.appendChild(c),l.appendChild(s)})}function et(e){let a="";for(;e>0;)e--,a=String.fromCharCode(65+e%26)+a,e=Math.floor(e/26);return a}async function Wt(e){const a={};if(a.id=e.id,a.ownerId=e.owner_id,a.ownerUsername=e.owner_username,a.ownerNickname=e.owner_nickname,a.title=e.title,a.startTime=new Date(e.start_time).toLocaleString(),a.endTime=new Date(e.end_time).toLocaleString(),e.descriptions){a.descriptions=[];const o={math:{inlineDigit:!0,engine:"KaTeX"}};for(let s=0;s<e.descriptions.length;s++){const l=e.descriptions[s],c={};c.title=l.title,c.content=await le.md2html(l.content,o),c.sort=l.sort,a.descriptions.push(c)}}if(a.notification=e.notification,e.problems){a.problems=[],e.problems.sort((o,s)=>o.index-s.index);for(let o=0;o<e.problems.length;o++){const s=e.problems[o];s.accept||(s.accept=0),s.attempt||(s.attempt=0),s.id=et(s.index),a.problems.push(s)}}return a}function ro(e){return Y({url:"/contest?id="+e,method:"get"})}function uo(e,a){return Y({url:"/contest/list?page="+e+"&page_size="+a,method:"get"})}function io(e){return Y({url:"/contest/create",method:"post",data:e})}const co=["innerHTML"],mo={style:{margin:"12px"}},po={key:0,class:"dida-edit-container"},fo={class:"dida-operation-container"},_o={class:"dida-code-submit-div"},go=ae({__name:"ProblemDetail",setup(e){let a=ce();const{globalProperties:o}=re(),s=Ve(),l=be();let c=_(""),y="",L=0,g=0;const p=_(null),i=_(!1),d=_(null);let b=null;const h=_(null),w={},m=_(""),v=_([]);v.value=Ot();const $=Te(()=>l.hasAuth(Le.ManageProblem)),K=k=>{k&&B.push({name:"problem-list",query:{...a.query,title:"",tag:k.name}})},x=()=>{B.push({name:"manage-problem",params:{problemId:y}})},V=()=>{y?B.push({name:"judge-list",query:{problem_id:y}}):B.push({name:"contest-judge-list",params:{contestId:L,problemIndex:g}})},A=()=>{y?B.push({name:"discuss-list-problem",query:{problem_id:y}}):B.push({name:"contest-discuss",params:{contestId:L},query:{problem_id:et(g)}})},C=()=>{B.push({name:"problem-recommend",params:{problemId:y}})},I=async()=>{if(!y){fe(o,"问题ID无效");return}const k=parseInt(m.value);if(!qn(k)){fe(o,"请选择所编写的语言");return}const u=b==null?void 0:b.getValue();if(!u){fe(o,"请输入所需提交的代码");return}const r=await Hn(y,L,g,k,u);if(r.code!==0){O(o,r.code);return}me(o,"提交成功，正在跳转到详情页面");const f=r.data.id;await B.push({path:"/judge/"+f})},z=k=>{b&&vt.setModelLanguage(b.getModel(),mt(k))};return ne(async()=>{if(Array.isArray(a.params.problemId)?y=a.params.problemId[0]:y=a.params.problemId,!y){if(Array.isArray(a.params.contestId)?L=a.params.contestId[0]:L=a.params.contestId,!L){fe(o,"题目不存在"),await B.push({name:"problem"});return}if(Array.isArray(a.params.problemIndex)?g=parseInt(a.params.problemIndex[0]):g=parseInt(a.params.problemIndex),!g){fe(o,"题目不存在"),await B.push({name:"problem"});return}}i.value=!0;let k=await Bt(y,L,g);if(k.code!==0){i.value=!1,O(o,k.code),await B.push({name:"problem"});return}k.data.tags&&k.data.tags.forEach(f=>{w[f.id]=f}),d.value=Qe(k.data.problem,w),s.setTitle(d.value.title+" - "+s.getTitle);let u=d.value.description;const r={math:{inlineDigit:!0,engine:"KaTeX"}};c.value=await le.md2html(u,r),await ke(()=>{p.value&&(le.mathRender(p.value),le.highlightRender({lineNumber:!0,enable:!0},p.value),De(p.value),h.value&&(b=vt.create(h.value,{value:"",language:"cpp",minimap:{enabled:!0},colorDecorators:!0,readOnly:!1,theme:"vs-dark"}))),i.value=!1})}),(k,u)=>{const r=ue,f=ge,P=G,T=Ee,D=pe,U=Ae,X=zt,N=jt,H=ve,J=he;return j(),M(J,{loading:i.value},{default:n(()=>[t(H,{class:"dida-main-content"},{default:n(()=>[t(f,{span:8},{default:n(()=>[t(r,{style:{margin:"10px"}},{default:n(()=>[R("div",{innerHTML:oe(c),ref_key:"markdownRef",ref:p},null,8,co)]),_:1})]),_:1}),t(f,{span:4},{default:n(()=>[R("div",mo,[$.value?(j(),W("div",po,[t(P,{onClick:x},{default:n(()=>u[1]||(u[1]=[S("编辑")])),_:1})])):se("",!0),t(U,{layout:"vertical",bordered:!0},{default:n(()=>[t(T,{label:"标题"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.title),1)]}),_:1}),t(T,{label:"时间限制"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.timeLimit),1)]}),_:1}),t(T,{label:"内存限制"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.memoryLimit),1)]}),_:1}),t(T,{label:"判题方式"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.judgeType),1)]}),_:1}),t(T,{label:"正确提交"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.accept),1)]}),_:1}),t(T,{label:"提交总数"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.attempt),1)]}),_:1}),t(T,{label:"创建时间"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.insertTime),1)]}),_:1}),t(T,{label:"更新时间"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.updateTime),1)]}),_:1}),t(T,{label:"上传用户"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.creatorNickname),1)]}),_:1}),t(T,{label:"题目来源"},{default:n(()=>{var F;return[S(E((F=d.value)==null?void 0:F.source),1)]}),_:1}),oe(y)?(j(),M(T,{key:0,label:"标签"},{default:n(()=>[t(D,null,{default:n(()=>{var F;return[(j(!0),W(ee,null,ie((F=d.value)==null?void 0:F.tags,Z=>(j(),M(P,{key:Z.id,variant:"dashed",onClick:()=>K(Z)},{default:n(()=>[S(E(Z.name),1)]),_:2},1032,["onClick"]))),128))]}),_:1})]),_:1})):se("",!0)]),_:1}),R("div",fo,[t(D,null,{default:n(()=>[t(P,{onClick:V},{default:n(()=>u[2]||(u[2]=[S("提交记录")])),_:1}),t(P,{onClick:A},{default:n(()=>u[3]||(u[3]=[S("题目讨论")])),_:1}),oe(y)?(j(),M(P,{key:0,onClick:C},{default:n(()=>u[4]||(u[4]=[S("题目推荐")])),_:1})):se("",!0)]),_:1})]),R("div",_o,[t(D,null,{default:n(()=>[t(N,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=F=>m.value=F),label:"语言：",placeholder:"请选择提交语言","auto-width":"",clearable:"",onChange:z},{default:n(()=>[(j(!0),W(ee,null,ie(v.value,F=>(j(),M(X,{key:F.value,value:F.value,label:F.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),t(P,{onClick:I},{default:n(()=>u[5]||(u[5]=[S("提交")])),_:1})]),_:1}),R("div",{ref_key:"codeEditRef",ref:h,class:"dida-code-editor"},null,512)])])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),ht=Q(go,[["__scopeId","data-v-3faf9abf"]]),vo={};function ho(e,a){return" TODO "}const bo=Q(vo,[["render",ho]]),yo=["innerHTML"];function wo(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Re(e)}const ko=ae({__name:"JudgeJobList",setup(e){const a=ce(),o=Ue(),{globalProperties:s}=re();let l=!1,c=null;const y=_(!1),L=_(null),g=_(null),p=_(!1),i=_({problemId:"",username:"",language:void 0,status:void 0}),d=_([{title:"ID",colKey:"id",cell:(r,f)=>t(G,{variant:"text",onClick:()=>A(f.row.id)},{default:()=>[f.row.id]})},{title:"问题",colKey:"problemId",cell:(r,f)=>t(G,{variant:"text",onClick:()=>V(f.row.problemId)},{default:()=>[f.row.problemId]})},{title:"状态",colKey:"status",align:"center",cell:(r,f)=>{const P=f.row.status,T=We(P),D=Kt(P);let U=[];return $e(P)&&U.push(t(he,{text:f.row.state,size:"small",class:"dida-status-loading"},null)),U.push(t("span",null,[T])),t(G,{theme:D,variant:"outline",onClick:()=>A(f.row.id)},wo(U)?U:{default:()=>[U]})}},{title:"分数",colKey:"score"},{title:"时间",colKey:"time"},{title:"内存",colKey:"memory"},{title:"代码",colKey:"code",cell:(r,f)=>t(G,{theme:"default",onClick:()=>x(f.row)},{default:()=>[f.row.language+" / "+f.row.codeLength]})},{title:"作者",colKey:"author",width:200,cell:(r,f)=>t(G,{variant:"text",onClick:()=>C(f.row.authorUsername)},{default:()=>[f.row.authorNickname]})},{title:"提交时间",colKey:"approveTime",width:180}]),b=_(!1);let h=1,w=50;const m=_({current:h,pageSize:w,defaultCurrent:h,defaultPageSize:w,total:0,pageSizeOptions:[50,100]}),v=_(),$=_([]);$.value=Ot();const K=_([]);K.value=On();const x=async r=>{p.value=!0,y.value=!0;try{L.value=r;const f=await Nn(L.value.id);if(f.code===0){const P=f.data,D=`\`\`\`${mt(P.language)}
${P.code}
\`\`\``,U={};L.value.code=await le.md2html(D,U),await ke(()=>{g.value&&(le.highlightRender({lineNumber:!0,enable:!0},g.value),De(g.value))})}else O(s,f.code)}finally{p.value=!1}},V=r=>{r&&o.push({path:"/problem/"+r})},A=r=>{r&&o.push({name:"judge-detail",params:{judgeId:r}})},C=r=>{r&&o.push({path:"/user/"+r})},I=async()=>{await o.push({query:{...a.query,page:1,page_size:w,problem_id:i.value.problemId,username:i.value.username,language:i.value.language,status:i.value.status}})},z=async()=>{i.value.problemId="",i.value.username="",i.value.language=void 0,i.value.status=void 0,await o.push({query:{...a.query,page:1,page_size:w,problem_id:"",username:"",language:void 0,status:void 0}})},k=async(r,f)=>{f&&(b.value=!0);let P=!1;try{const{current:T,pageSize:D}=r,U=await Bn(i.value.problemId,i.value.username,i.value.language,i.value.status,T,D);v.value=[],U.code===0?U.data.list&&U.data.list.length>0?(U.data.list.forEach(N=>{var J;const H=Nt(N);(J=v.value)==null||J.push(H),$e(N.status)&&(P=!0)}),m.value={...m.value,total:U.data.total_count}):(me(s,"未找到记录"),m.value={...m.value,total:0}):f&&O(s,U.code)}catch(T){console.error(T),f&&O(s,Se())}finally{f&&(b.value=!1),P&&l&&setTimeout(()=>{k({current:h,pageSize:w},!1)},5e3)}},u=async r=>{await o.push({query:{...a.query,page:r.current,page_size:r.pageSize}})};return ne(async()=>{l=!0,c=xe(()=>a.query,r=>{i.value.problemId=r.problem_id||"",i.value.username=r.username||"",r.language!=null?i.value.language=Number(r.language):i.value.language=void 0,r.status!=null?i.value.status=Number(r.status):i.value.status=void 0;const f=parseInt(r.page)||m.value.defaultCurrent,P=parseInt(r.page_size)||m.value.defaultPageSize;h=f,w=P,m.value.pageSizeOptions.includes(w)||(w=m.value.defaultPageSize),m.value={...m.value,current:h,pageSize:w},k({current:h,pageSize:w},!0)},{immediate:!0})}),Ce(()=>{l=!1,c&&c()}),(r,f)=>{const P=Ie,T=ze,D=zt,U=jt,X=G,N=pe,H=je,J=Pe,F=ue,Z=Ye,te=he,de=ct;return j(),W(ee,null,[t(F,{style:{margin:"10px"}},{default:n(()=>[t(H,{layout:"inline",onSubmit:I,onReset:z},{default:n(()=>[t(T,{label:"题号"},{default:n(()=>[t(P,{modelValue:i.value.problemId,"onUpdate:modelValue":f[0]||(f[0]=q=>i.value.problemId=q),placeholder:"请输入完整题号"},null,8,["modelValue"])]),_:1}),t(T,{label:"用户"},{default:n(()=>[t(P,{modelValue:i.value.username,"onUpdate:modelValue":f[1]||(f[1]=q=>i.value.username=q),placeholder:"仅支持输入完整用户名"},null,8,["modelValue"])]),_:1}),t(T,{label:"语言"},{default:n(()=>[t(U,{modelValue:i.value.language,"onUpdate:modelValue":f[2]||(f[2]=q=>i.value.language=q),placeholder:"请选择提交语言","auto-width":"",clearable:""},{default:n(()=>[(j(!0),W(ee,null,ie($.value,q=>(j(),M(D,{key:q.value,value:q.value,label:q.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(T,{label:"状态"},{default:n(()=>[t(U,{modelValue:i.value.status,"onUpdate:modelValue":f[3]||(f[3]=q=>i.value.status=q),placeholder:"请选择评测状态","auto-width":"",clearable:""},{default:n(()=>[(j(!0),W(ee,null,ie(K.value,q=>(j(),M(D,{key:q.value,value:q.value,label:q.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(T,null,{default:n(()=>[t(N,null,{default:n(()=>[t(X,{theme:"primary",type:"submit"},{default:n(()=>f[7]||(f[7]=[S("搜索")])),_:1}),t(X,{theme:"default",variant:"base",type:"reset"},{default:n(()=>f[8]||(f[8]=[S("重置")])),_:1})]),_:1})]),_:1})]),_:1}),t(J,{data:v.value,columns:d.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:m.value,loading:b.value,onPageChange:u,"table-layout":"auto"},null,8,["data","columns","pagination","loading"])]),_:1}),t(de,{visible:y.value,"onUpdate:visible":f[5]||(f[5]=q=>y.value=q),width:"800px","cancel-btn":null,"close-btn":!1,onConfirm:f[6]||(f[6]=q=>y.value=!1)},{header:n(()=>[t(Z,{onClick:f[4]||(f[4]=()=>{var q;A((q=L.value)==null?void 0:q.id)})},{default:n(()=>{var q,ye;return[S(E(((q=L.value)==null?void 0:q.id)+" - "+((ye=L.value)==null?void 0:ye.language)),1)]}),_:1})]),default:n(()=>[t(te,{loading:p.value},{default:n(()=>{var q;return[R("div",{innerHTML:(q=L.value)==null?void 0:q.code,ref_key:"markdownCodeRef",ref:g,style:{"min-height":"100px"}},null,8,yo)]}),_:1},8,["loading"])]),_:1},8,["visible"])],64)}}}),So=Q(ko,[["__scopeId","data-v-c8e34db0"]]),Co={class:"dida-code-container"},Io=["innerHTML"],Po={key:2,class:"dida-edit-container"};function bt(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Re(e)}const To=ae({__name:"JudgeJobDetail",setup(e){const a=ce(),o=Ue(),s=be(),{globalProperties:l}=re();let c=!1,y=-1;const L=_(""),g=_(null),p=_(""),i=_(null),d=_(0),b=_(null),h=_({from:"#5a96ff",to:"#00A870"});let w=!1;const m=_([{title:"ID",colKey:"id"},{title:"问题",colKey:"problemId",cell:(u,r)=>t(G,{variant:"text",onClick:()=>A(r.row.problemId)},{default:()=>[r.row.problemId]})},{title:"状态",colKey:"status",align:"center",cell:(u,r)=>{const f=r.row.status,P=We(f),T=Kt(f);let D=[];return $e(f)&&D.push(t(he,{text:r.row.state,size:"small",class:"dida-status-loading"},null)),D.push(t("span",null,[P])),t(G,{theme:T,variant:"outline"},bt(D)?D:{default:()=>[D]})}},{title:"分数",colKey:"score"},{title:"时间",colKey:"time"},{title:"内存",colKey:"memory"},{title:"代码",colKey:"language",cell:(u,r)=>t("span",null,[r.row.language+" / "+r.row.codeLength])},{title:"作者",colKey:"author",width:200,cell:(u,r)=>t(G,{variant:"text",onClick:()=>C(r.row.authorUsername)},{default:()=>[r.row.authorNickname]})},{title:"提交时间",colKey:"approveTime",width:180}]),v=_(!1),$=_(!1),K=_(),x=Te(()=>s.hasAuth(Le.ManageJudge)),V=async()=>{if(!$.value){$.value=!0;try{const u=await Yn(y);u.code===0?await z(!0):O(l,u.code)}catch(u){console.error(u),O(l,Se())}finally{$.value=!1}}},A=u=>{u&&o.push({path:"/problem/"+u})},C=u=>{u&&o.push({path:"/user/"+u})},I=u=>{const r=u.status,f=We(r);let P;switch(r){case _e.Init:case _e.Rejudge:case _e.Compiling:case _e.Running:P="default";break;case _e.Accept:P="success";break;case _e.PE:P="warning";break;default:P="danger";break}return t(pe,null,{default:()=>[t(G,{theme:"default",variant:"outline"},{default:()=>[u.taskId]}),t(G,{theme:P,variant:"outline"},bt(f)?f:{default:()=>[f]}),t("span",null,[S("分数："),u.score]),t("span",null,[S("用时："),u.time]),t("span",null,[S("内存："),u.memory])]})},z=async u=>{var f;u&&(v.value=!0);let r=!1;try{const P=await Kn(y);if(K.value=[],P.code===0){const T=P.data,D=Nt(T);if((f=K.value)==null||f.push(D),T.judger){const X=await At(T.judger);L.value=X.name}else L.value="";h.value.to="#00A870",$e(T.status)?(b.value="active",D.taskTotal>0?(d.value=D.taskCurrent/D.taskTotal*100,D.taskCurrent>=D.taskTotal&&(d.value=99)):d.value=0):(d.value=100,T.status===_e.Accept?b.value="success":T.status===_e.PE?(h.value.to="#F57C20",b.value="warning"):(h.value.to="#F56C6C",b.value="error"));const U={};if(T.code){const N=`\`\`\`${mt(T.language)}
${T.code}
\`\`\``;p.value=await le.md2html(N,U),await ke(()=>{i.value&&(w||(w=!0,le.highlightRender({lineNumber:!0,enable:!0},i.value)),De(i.value))})}g.value=D,$e(T.status)&&(r=!0)}else u&&O(l,P.code)}catch(P){console.error(P),u&&O(l,Se())}finally{u&&(v.value=!1),r&&c&&setTimeout(()=>{z(!1)},5e3)}};function k(){i.value&&i.value.parentElement&&(i.value.style.maxWidth=i.value.parentElement.clientWidth+"px")}return ne(async()=>{if(c=!0,Array.isArray(a.params.judgeId)?y=a.params.judgeId[0]:y=a.params.judgeId,!y){await o.push({name:"judge"});return}await z(!0),k(),window.addEventListener("resize",k)}),Ce(()=>{c=!1,window.removeEventListener("resize",k)}),(u,r)=>{var Z,te;const f=Ca,P=Pe,T=ue,D=ge,U=Ee,X=Ae,N=ve,H=Vt,J=$t,F=G;return j(),W(ee,null,[t(f,{color:h.value,status:b.value,class:"dida-job-progress",percentage:d.value},null,8,["color","status","percentage"]),t(T,{style:{margin:"10px"}},{default:n(()=>[t(P,{data:K.value,columns:m.value,"row-key":"id","vertical-align":"top",hover:!0,loading:v.value},null,8,["data","columns","loading"])]),_:1}),t(N,null,{default:n(()=>[t(D,{span:8},{default:n(()=>[R("div",Co,[R("div",{innerHTML:p.value,ref_key:"markdownCodeRef",ref:i,class:"dida-code-div"},null,8,Io)])]),_:1}),t(D,{span:4},{default:n(()=>[t(X,{layout:"vertical",bordered:!0,style:{margin:"10px"}},{default:n(()=>[t(U,{label:"判题机"},{default:n(()=>[S(E(L.value),1)]),_:1}),t(U,{label:"判题时间"},{default:n(()=>{var de;return[S(E((de=g.value)==null?void 0:de.judgeTime),1)]}),_:1})]),_:1})]),_:1})]),_:1}),(Z=g.value)!=null&&Z.compileMessage?(j(),M(T,{key:0,class:"compile-message"},{default:n(()=>{var de;return[S(E((de=g.value)==null?void 0:de.compileMessage),1)]}),_:1})):se("",!0),((te=g.value)==null?void 0:te.task.length)>0?(j(),M(J,{key:1,class:"task-panel"},{default:n(()=>{var de;return[(j(!0),W(ee,null,ie((de=g.value)==null?void 0:de.task,(q,ye)=>(j(),M(H,{key:q.taskId,header:()=>I(q)},{default:n(()=>[S(E(q.content)+" "+E(q.waHint),1)]),_:2},1032,["header"]))),128))]}),_:1})):se("",!0),x.value?(j(),W("div",Po,[t(F,{onClick:V,loading:$.value},{default:n(()=>r[0]||(r[0]=[S("重新评测")])),_:1},8,["loading"])])):se("",!0)],64)}}}),Lo=Q(To,[["__scopeId","data-v-0a5d3889"]]),xo={style:{margin:"10px"}},jo=ae({__name:"ContestList",setup(e){const a=ce(),o=Ue(),{globalProperties:s}=re();let l=null;const c=_(!1),y=_(!1),L=_([{title:"ID",colKey:"id",width:"100",cell:(A,C)=>t(G,{variant:"text",onClick:()=>m(C.row.id)},{default:()=>[C.row.id]})},{title:"标题",colKey:"title",cell:(A,C)=>t(G,{variant:"text",onClick:()=>m(C.row.id)},{default:()=>[C.row.title]})},{title:"负责人",colKey:"ownerNickname",width:"200"},{title:"开始时间",colKey:"startTime",width:"180"},{title:"结束时间",colKey:"endTime",width:"180"}]),g=_(!1);let p=1,i=50;const d=_({current:p,pageSize:i,defaultCurrent:p,defaultPageSize:i,total:0,pageSizeOptions:[50,100]}),b=_(),h=_({title:"",username:""}),w=_({title:"",description:"",open_time:[]}),m=A=>{A&&o.push({path:"/contest/"+A})},v=async()=>{await o.push({query:{...a.query,title:h.value.title,username:h.value.username,page:1,page_size:d.value.defaultPageSize}})},$=async(A,C)=>{var I;g.value=!0;try{const{current:z,pageSize:k}=A,u=await uo(z,k);if(b.value=[],u.code===0){const r=u.data.list;for(let f=0;f<r.length;f++){const P=r[f],T=await Wt(P);(I=b.value)==null||I.push(T)}d.value={...d.value,total:u.data.total_count}}else C&&O(s,u.code)}catch(z){console.error(z),O(s,Se())}finally{g.value=!1}},K=async A=>{await o.push({query:{...a.query,page:A.current,page_size:A.pageSize}})},x=()=>{c.value=!0},V=async()=>{y.value=!0,console.log("contestCreateForm",w.value),io(w.value).then(A=>{A.code===0?(me(s,"创建比赛成功"),c.value=!1,o.push({path:"/contest/"+A.data.id})):O(s,A.code)}).finally(()=>{y.value=!1})};return ne(async()=>{l=xe(()=>a.query,A=>{h.value.title=A.title||"",h.value.username=A.username||"";const C=parseInt(A.page)||d.value.defaultCurrent,I=parseInt(A.page_size)||d.value.defaultPageSize;p=C,i=I,d.value={...d.value,current:p,pageSize:i},$({current:p,pageSize:i},!0)},{immediate:!0})}),Ce(()=>{l&&l()}),(A,C)=>{const I=Pe,z=ue,k=ge,u=Ie,r=ze,f=G,P=je,T=pe,D=ve,U=Dt,X=ct;return j(),W(ee,null,[t(D,null,{default:n(()=>[t(k,{span:9},{default:n(()=>[t(z,{style:{margin:"10px"}},{default:n(()=>[t(I,{data:b.value,columns:L.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:d.value,loading:g.value,onPageChange:K},null,8,["data","columns","pagination","loading"])]),_:1})]),_:1}),t(k,{span:3},{default:n(()=>[R("div",xo,[t(z,{class:"sh-card"},{default:n(()=>[t(P,{model:h.value},{default:n(()=>[t(r,{label:"标题"},{default:n(()=>[t(u,{modelValue:h.value.title,"onUpdate:modelValue":C[0]||(C[0]=N=>h.value.title=N),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),t(r,{label:"负责人"},{default:n(()=>[t(u,{modelValue:h.value.username,"onUpdate:modelValue":C[1]||(C[1]=N=>h.value.username=N),placeholder:"仅支持输入完整用户名"},null,8,["modelValue"])]),_:1}),t(r,null,{default:n(()=>[t(f,{theme:"primary",onClick:v},{default:n(()=>C[6]||(C[6]=[S("提交")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(z,{class:"sh-card"},{default:n(()=>[t(T,null,{default:n(()=>[t(f,{onClick:x},{default:n(()=>C[7]||(C[7]=[S("创建")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(X,{visible:c.value,"onUpdate:visible":C[5]||(C[5]=N=>c.value=N),header:"创建比赛",onConfirm:V,"confirm-loading":y.value},{default:n(()=>[t(P,{"label-width":80,model:w.value,onSubmit:C[4]||(C[4]=qe(()=>{},["prevent"]))},{default:n(()=>[t(r,{label:"标题"},{default:n(()=>[t(u,{modelValue:w.value.title,"onUpdate:modelValue":C[2]||(C[2]=N=>w.value.title=N),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),t(r,{label:"开启时间"},{default:n(()=>[t(U,{"enable-time-picker":"","allow-input":"",clearable:"",modelValue:w.value.open_time,"onUpdate:modelValue":C[3]||(C[3]=N=>w.value.open_time=N)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"])],64)}}}),Fe=Q(jo,[["__scopeId","data-v-3e6ea683"]]),zo={style:{margin:"20px"}},Vo=["innerHTML"],$o={style:{margin:"12px"}},Do=ae({__name:"ContestDetail",setup(e){let a=ce();const{globalProperties:o}=re(),s=Ve();let l=0;const c=_(!1),y=_(null),L=_([{title:"问题ID",colKey:"id",cell:(i,d)=>t(G,{variant:"text",onClick:()=>p(l,d.row.index)},{default:()=>[d.row.id]})},{title:"标题",colKey:"title",cell:(i,d)=>t(G,{variant:"text",onClick:()=>p(l,d.row.index)},{default:()=>[d.row.title]})},{title:"正确",colKey:"accept"},{title:"提交",colKey:"attempt"}]),g=_([]),p=(i,d)=>{B.push({name:"contest-problem-detail",params:{contestId:i,problemIndex:d}})};return ne(async()=>{if(Array.isArray(a.params.contestId)?l=a.params.contestId[0]:l=a.params.contestId,!l){await B.push({name:"contest"});return}c.value=!0;const i=await ro(l);if(i.code!==0){c.value=!1,O(o,i.code),await B.push({name:"contest"});return}y.value=await Wt(i.data),g.value=y.value.problems,s.setTitle(y.value.title+" - "+s.getTitle),await ke(()=>{const d=document.querySelectorAll(".dida-content-description");d&&d.length>0&&d.forEach(b=>{le.mathRender(b),le.highlightRender({lineNumber:!0,enable:!0},b),De(b)}),c.value=!1})}),(i,d)=>{const b=Tt,h=G,w=pe,m=Vt,v=$t,$=Pe,K=ue,x=ge,V=Ee,A=Ae,C=ve,I=he;return j(),M(I,{loading:c.value},{default:n(()=>[t(C,{class:"dida-main-content"},{default:n(()=>[t(x,{span:8},{default:n(()=>{var z,k,u;return[R("div",zo,[R("h1",null,E((z=y.value)==null?void 0:z.title),1),(k=y.value)!=null&&k.notification?(j(),M(b,{key:0,theme:"info",message:(u=y.value)==null?void 0:u.notification},null,8,["message"])):se("",!0)]),t(v,{"default-value":[0],"expand-icon":!1,borderless:!0},{default:n(()=>{var r;return[(j(!0),W(ee,null,ie((r=y.value)==null?void 0:r.descriptions,(f,P)=>(j(),M(m,{key:P,header:f.title},lt({default:n(()=>[R("div",{innerHTML:f.content,class:"dida-content-description"},null,8,Vo)]),_:2},[P===0?{name:"headerRightContent",fn:n(()=>[t(w,{size:"small"},{default:n(()=>[t(h,{size:"small"},{default:n(()=>d[0]||(d[0]=[S("收起全部")])),_:1}),t(h,{size:"small"},{default:n(()=>d[1]||(d[1]=[S("展开全部")])),_:1})]),_:1})]),key:"0"}:void 0]),1032,["header"]))),128))]}),_:1}),t(K,{style:{margin:"10px"}},{default:n(()=>[t($,{data:g.value,columns:L.value,"row-key":"id","vertical-align":"top",hover:!0},null,8,["data","columns"])]),_:1})]}),_:1}),t(x,{span:4},{default:n(()=>[R("div",$o,[t(A,{layout:"vertical",bordered:!0},{default:n(()=>[t(V,{label:"开始时间"},{default:n(()=>{var z;return[S(E((z=y.value)==null?void 0:z.startTime),1)]}),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),Ro=Q(Do,[["__scopeId","data-v-6fc9361e"]]);function Xt(e){const a={};return a.id=e.id,a.authorId=e.author_id,a.authorUsername=e.author_username,a.authorNickname=e.author_nickname,a.title=e.title,a.content=e.content,e.insert_time&&(a.insertTime=new Date(e.insert_time).toLocaleString()),e.modify_time&&(a.modifyTime=new Date(e.modify_time).toLocaleString()),e.update_time&&(a.updateTime=new Date(e.update_time).toLocaleString()),a.problemId=e.problem_id,a.problemTitle=e.problem_title,a.contestId=e.contest_id,a.contestTitle=e.contest_title,a.contestProblemIndex=e.contest_problem_index,a}async function Uo(e){const a={};if(a.id=e.id,a.authorId=e.author_id,a.authorUsername=e.author_username,a.authorNickname=e.author_nickname,a.content="",e.content){const o={math:{inlineDigit:!0,engine:"KaTeX"}};a.content=await le.md2html(e.content,o)}return e.insert_time&&(a.insertTime=new Date(e.insert_time).toLocaleString()),e.modify_time&&(a.modifyTime=new Date(e.modify_time).toLocaleString()),e.update_time&&(a.updateTime=new Date(e.update_time).toLocaleString()),a}function Ao(e){return Y({url:"/discuss?id="+e,method:"get"})}function Eo(e,a,o,s,l,c){const y={};return e&&(y.contest_id=e),a&&(y.problem_id=a),o&&(y.title=o),s&&(y.username=s),l&&(y.page=l),c&&(y.page_size=c),Y({url:`/discuss/list?${new URLSearchParams(y).toString()}`,method:"get"})}function Fo(e,a,o){return Y({url:"/discuss/comment/list?id="+e+"&page="+a+"&page_size="+o,method:"get"})}function Mo(e){return Y({url:"/discuss/create",method:"post",data:e})}const qo={style:{margin:"10px"}};function Go(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Re(e)}const Oo=ae({__name:"DiscussList",setup(e){const a=ce(),o=Ue(),{globalProperties:s}=re();let l=null;const c=_(!1),y=_(!1);let L=0;const g=_([]),p=[],i=[{title:"标题",colKey:"title",cell:(u,r)=>t(G,{variant:"text",onClick:()=>V(r.row.id)},{default:()=>[r.row.title]})},{title:"创建人",colKey:"authorNickname",width:"200"},{title:"创建时间",colKey:"insertTime",width:"180"},{title:"更新时间",colKey:"updateTime",width:"180"}],d=_(!1);let b=1,h=50;const w=_({current:b,pageSize:h,defaultCurrent:b,defaultPageSize:h,total:0,pageSizeOptions:[50,100]}),m=_(),v=_({problemId:"",title:"",username:""}),$=_({title:"",description:"",open_time:[]}),K=u=>{u&&o.push({name:"problem-detail",params:{problemId:u}})},x=(u,r)=>{o.push({name:"contest-problem-detail",params:{contestId:u,problemIndex:r}})},V=u=>{if(u){if(L){o.push({name:"contest-discuss-detail",params:{contestId:L,discussId:u}});return}o.push({name:"discuss-detail",params:{discussId:u}})}},A=async()=>{await o.push({query:{...a.query,problem_id:v.value.problemId,title:v.value.title,username:v.value.username,page:1,page_size:w.value.defaultPageSize}})},C=async(u,r)=>{var f;d.value=!0;try{const{current:P,pageSize:T}=u,D=await Eo(L,v.value.problemId,v.value.title,v.value.username,P,T);if(m.value=[],D.code===0){if(D.data.list){const U=D.data.list;for(let X=0;X<U.length;X++){const N=U[X],H=await Xt(N);(f=m.value)==null||f.push(H)}}w.value={...w.value,total:D.data.total_count}}else r&&O(s,D.code)}catch(P){console.error(P),O(s,Se())}finally{d.value=!1}},I=async u=>{await o.push({query:{...a.query,page:u.current,page_size:u.pageSize}})},z=()=>{c.value=!0},k=async()=>{y.value=!0,console.log("discussCreateForm",$.value),Mo($.value).then(u=>{u.code===0?(me(s,"创建比赛成功"),c.value=!1,o.push({path:"/discuss/"+u.data.id})):O(s,u.code)}).finally(()=>{y.value=!1})};return ne(async()=>{l=xe(()=>a.query,u=>{Array.isArray(a.params.contestId)?L=a.params.contestId[0]:L=a.params.contestId,g.value=p,L?g.value=g.value.concat([{title:"问题ID",colKey:"contestProblemIndex",width:"100",cell:(P,T)=>{let D;return T.row.contestProblemIndex?t(G,{variant:"text",onClick:()=>x(L,T.row.contestProblemIndex)},Go(D=et(T.row.contestProblemIndex))?D:{default:()=>[D]}):""}}]):g.value=g.value.concat([{title:"问题ID",colKey:"problemId",width:"100",cell:(P,T)=>T.row.problemId?t(G,{variant:"text",onClick:()=>K(T.row.problemId)},{default:()=>[T.row.problemId]}):""}]),g.value=g.value.concat(i),v.value.problemId=u.problem_id||"",v.value.title=u.title||"",v.value.username=u.username||"";const r=parseInt(u.page)||w.value.defaultCurrent,f=parseInt(u.page_size)||w.value.defaultPageSize;b=r,h=f,w.value={...w.value,current:b,pageSize:h},C({current:b,pageSize:h},!0)},{immediate:!0})}),Ce(()=>{l&&l()}),(u,r)=>{const f=Pe,P=ue,T=ge,D=Ie,U=ze,X=G,N=je,H=pe,J=ve,F=Dt,Z=ct;return j(),W(ee,null,[t(J,null,{default:n(()=>[t(T,{span:9},{default:n(()=>[t(P,{style:{margin:"10px"}},{default:n(()=>[t(f,{data:m.value,columns:g.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:w.value,loading:d.value,"table-layout":"auto",onPageChange:I},null,8,["data","columns","pagination","loading"])]),_:1})]),_:1}),t(T,{span:3},{default:n(()=>[R("div",qo,[t(P,{class:"sh-card"},{default:n(()=>[t(N,{model:v.value},{default:n(()=>[t(U,{label:"问题ID"},{default:n(()=>[t(D,{modelValue:v.value.problemId,"onUpdate:modelValue":r[0]||(r[0]=te=>v.value.problemId=te),placeholder:"请输入完整问题ID"},null,8,["modelValue"])]),_:1}),t(U,{label:"标题"},{default:n(()=>[t(D,{modelValue:v.value.title,"onUpdate:modelValue":r[1]||(r[1]=te=>v.value.title=te),placeholder:"暂不支持模糊查询"},null,8,["modelValue"])]),_:1}),t(U,{label:"创建人"},{default:n(()=>[t(D,{modelValue:v.value.username,"onUpdate:modelValue":r[2]||(r[2]=te=>v.value.username=te),placeholder:"仅支持输入完整用户名"},null,8,["modelValue"])]),_:1}),t(U,null,{default:n(()=>[t(X,{theme:"primary",onClick:A},{default:n(()=>r[7]||(r[7]=[S("提交")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(P,{class:"sh-card"},{default:n(()=>[t(H,null,{default:n(()=>[t(X,{onClick:z},{default:n(()=>r[8]||(r[8]=[S("创建")])),_:1})]),_:1})]),_:1})])]),_:1})]),_:1}),t(Z,{visible:c.value,"onUpdate:visible":r[6]||(r[6]=te=>c.value=te),header:"创建比赛",onConfirm:k,"confirm-loading":y.value},{default:n(()=>[t(N,{"label-width":80,model:$.value,onSubmit:r[5]||(r[5]=qe(()=>{},["prevent"]))},{default:n(()=>[t(U,{label:"标题"},{default:n(()=>[t(D,{modelValue:$.value.title,"onUpdate:modelValue":r[3]||(r[3]=te=>$.value.title=te),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),t(U,{label:"开启时间"},{default:n(()=>[t(F,{"enable-time-picker":"","allow-input":"",clearable:"",modelValue:$.value.open_time,"onUpdate:modelValue":r[4]||(r[4]=te=>$.value.open_time=te)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","confirm-loading"])],64)}}}),Be=Q(Oo,[["__scopeId","data-v-ead0d59d"]]),Ho={key:0,style:{margin:"20px"}},Ko=["innerHTML"],No=["innerHTML"],Bo={style:{margin:"10px"}},Jo={style:{margin:"10px"}},Wo={style:{margin:"10px","text-align":"right"}},Xo={style:{margin:"12px"}},Yo={key:0,class:"dida-edit-container"},Zo=ae({__name:"DiscussDetail",props:{discussId:{}},setup(e){const a=e;let o=ce();const{globalProperties:s}=re();let l=null;const c=Ve(),y=be();let L=_("");const g=_(""),p=_(null),i=_(!1),d=_(null),b=_(!1);let h=1,w=20;const m=_({current:1,total:0,defaultPageSize:w,defaultCurrent:h,pageSizeOptions:[20,50]}),v=_([]),$={},K=Te(()=>y.hasAuth(Le.ManageDiscuss)),x=k=>{k&&B.push({name:"discuss-list",query:{...o.query,title:"",tag:k.name}})},V=()=>{B.push({name:"manage-discuss",params:{discussId:g.value}})},A=()=>t("div",{class:"t-pagination__total"},[`共 ${m.value.total} 条回复`]),C=()=>{},I=async(k,u)=>{var r;b.value=!0;try{const{current:f,pageSize:P}=k,T=await Fo(g.value,f,P);if(v.value=[],T.code===0){const D=T.data.list;if(D)for(let U=0;U<D.length;U++){const X=D[U],N=await Uo(X);(r=v.value)==null||r.push(N),await ke(()=>{const H=document.querySelectorAll(".dida-discuss-content");H&&H.length>0&&H.forEach(J=>{le.mathRender(J),le.highlightRender({lineNumber:!0,enable:!0},J),De(J)})})}m.value={...m.value,total:T.data.total_count}}else u&&O(s,T.code)}catch(f){console.error(f),O(s,Se())}finally{b.value=!1}},z=async k=>{await B.push({query:{...o.query,page:k.current,page_size:k.pageSize}})};return ne(async()=>{if(g.value=a.discussId,g.value||(Array.isArray(o.params.discussId)?g.value=o.params.discussId[0]:g.value=o.params.discussId),!g.value){fe(s,"讨论不存在"),await B.push({name:"discuss"});return}i.value=!0;const k=await Ao(g.value);if(k.code!==0){i.value=!1,O(s,k.code),await B.push({name:"discuss"});return}k.data.tags&&k.data.tags.forEach(P=>{$[P.id]=P}),d.value=Xt(k.data.discuss),c.setTitle(d.value.title+" - "+c.getTitle);let u=d.value.content;const r={math:{inlineDigit:!0,engine:"KaTeX"}};L.value=await le.md2html(u,r),await ke(()=>{p.value&&(le.mathRender(p.value),le.highlightRender({lineNumber:!0,enable:!0},p.value),De(p.value)),i.value=!1}),l=xe(()=>o.query,P=>{const T=parseInt(P.page)||m.value.defaultCurrent,D=parseInt(P.page_size)||m.value.defaultPageSize;h=T,w=D,m.value={...m.value,current:h,pageSize:w},I({current:h,pageSize:w},!0)},{immediate:!0});const f={after:()=>{}};new le("commentEditRef",f)}),Ce(()=>{l&&l()}),(k,u)=>{const r=Pa,f=Ia,P=ue,T=pe,D=Ta,U=G,X=ge,N=Ee,H=Ae,J=ve,F=he;return j(),M(F,{loading:i.value},{default:n(()=>[t(J,{class:"dida-main-content"},{default:n(()=>[t(X,{span:8},{default:n(()=>{var Z,te,de;return[(Z=d.value)!=null&&Z.problemTitle||(te=d.value)!=null&&te.contestTitle?(j(),W("div",Ho,[t(f,{"max-item-width":"300"},{default:n(()=>{var q,ye,pt,ft,_t;return[(q=d.value)!=null&&q.contestTitle?(j(),W(ee,{key:0},[t(r,{to:{name:"contest-detail",params:{contestId:(ye=d.value)==null?void 0:ye.contestId}}},{default:n(()=>{var we;return[S(E((we=d.value)==null?void 0:we.contestTitle),1)]}),_:1},8,["to"]),(pt=d.value)!=null&&pt.contestProblemIndex?(j(),M(r,{key:0,to:{name:"contest-problem-detail",params:{problemIndex:(ft=d.value)==null?void 0:ft.contestProblemIndex}}},{default:n(()=>{var we,gt;return[S(E(oe(et)((we=d.value)==null?void 0:we.contestProblemIndex))+" - "+E((gt=d.value)==null?void 0:gt.problemTitle),1)]}),_:1},8,["to"])):se("",!0)],64)):(j(),W(ee,{key:1},[t(r,{to:{name:"discuss-list-problem"}},{default:n(()=>u[2]||(u[2]=[S(" 问题讨论")])),_:1}),t(r,{to:{name:"problem-detail",params:{problemId:(_t=d.value)==null?void 0:_t.problemId}}},{default:n(()=>{var we;return[S(E((we=d.value)==null?void 0:we.problemTitle),1)]}),_:1},8,["to"])],64))]}),_:1})])):se("",!0),t(P,{style:{margin:"10px"},header:(de=d.value)==null?void 0:de.title,"header-bordered":!0},{default:n(()=>[R("div",{innerHTML:oe(L),class:"dida-discuss-content"},null,8,Ko)]),_:1},8,["header"]),(j(!0),W(ee,null,ie(v.value,(q,ye)=>(j(),M(P,{key:ye,style:{margin:"10px"},"header-bordered":""},{header:n(()=>[t(T,null,{default:n(()=>[R("span",null,E(q.authorNickname),1),R("span",null,E(q.insertTime),1)]),_:2},1024)]),default:n(()=>[R("div",{innerHTML:q.content,class:"dida-discuss-content"},null,8,No)]),_:2},1024))),128)),R("div",Bo,[t(D,{modelValue:m.value.current,"onUpdate:modelValue":u[0]||(u[0]=q=>m.value.current=q),"page-size":m.value.pageSize,"onUpdate:pageSize":u[1]||(u[1]=q=>m.value.pageSize=q),total:m.value.total,"page-size-options":m.value.pageSizeOptions,"show-page-size":!1,"total-content":A,onChange:z},null,8,["modelValue","page-size","total","page-size-options"])]),R("div",Jo,[u[4]||(u[4]=R("div",{id:"commentEditRef",class:"dida-comment-editor"},null,-1)),R("div",Wo,[t(T,null,{default:n(()=>[t(U,{theme:"primary",onClick:C},{default:n(()=>u[3]||(u[3]=[S("提交")])),_:1})]),_:1})])])]}),_:1}),t(X,{span:4},{default:n(()=>[R("div",Xo,[K.value?(j(),W("div",Yo,[t(U,{onClick:V},{default:n(()=>u[5]||(u[5]=[S("编辑")])),_:1})])):se("",!0),t(H,{layout:"vertical",bordered:!0},{default:n(()=>[t(N,{label:"创建时间"},{default:n(()=>{var Z;return[S(E((Z=d.value)==null?void 0:Z.insertTime),1)]}),_:1}),t(N,{label:"编辑时间"},{default:n(()=>{var Z;return[S(E((Z=d.value)==null?void 0:Z.modifyTime),1)]}),_:1}),t(N,{label:"更新时间"},{default:n(()=>{var Z;return[S(E((Z=d.value)==null?void 0:Z.updateTime),1)]}),_:1}),t(N,{label:"创建用户"},{default:n(()=>{var Z;return[S(E((Z=d.value)==null?void 0:Z.authorNickname),1)]}),_:1}),t(N,{label:"标签"},{default:n(()=>[t(T,null,{default:n(()=>{var Z;return[(j(!0),W(ee,null,ie((Z=d.value)==null?void 0:Z.tags,te=>(j(),M(U,{key:te.id,variant:"dashed",onClick:()=>x(te)},{default:n(()=>[S(E(te.name),1)]),_:2},1032,["onClick"]))),128))]}),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),nt=Q(Zo,[["__scopeId","data-v-8b88dec8"]]);function Qo(e,a){return Y({url:"/rank/ac/all?page="+e+"&page_size="+a,method:"get"})}function el(e,a){return Y({url:"/rank/ac/problem?page="+e+"&page_size="+a,method:"get"})}function tl(e,a){return Y({url:"/rank/ac/problem/today?page="+e+"&page_size="+a,method:"get"})}function al(e,a){return Y({url:"/rank/ac/problem/day7?page="+e+"&page_size="+a,method:"get"})}function nl(e,a){return Y({url:"/rank/ac/problem/year?page="+e+"&page_size="+a,method:"get"})}const ol={style:{margin:"10px"}};function ot(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Re(e)}const ll=ae({__name:"RankUser",props:{type:{}},setup(e){const a=ce(),o=Ue(),{globalProperties:s}=re();let l=null;const c=e,y=_(""),L=_(""),g={all:{header:"统计所有用户在本站的提交记录",content:"优先以AC记录数量排序，如果相同则提交所用次数较少的优先，如果仍相同，注册较早的用户靠前"},problem:{header:"统计所有用户在本站的提交记录",content:"以题目记录数量排序，如果相同，注册较早的用户靠前"},"problem-today":{header:"统计所有用户今日在本站的提交记录",content:"以今日题目记录数量排序，如果相同，注册较早的用户靠前"},"problem-day7":{header:"统计所有用户最近7日在本站的提交记录",content:"以7日题目记录数量排序（从7日前的0点开始计算），如果相同，注册较早的用户靠前"},"problem-year":{header:"统计所有用户最近1年在本站的提交记录",content:"以最近1年题目记录数量排序（从365日前的0点开始计算），如果相同，注册较早的用户靠前"}},p=_([]),i=[{title:"序号",colKey:"index"},{title:"用户名",colKey:"username",cell:(I,z)=>t(G,{variant:"dashed",onClick:()=>K(z.row.username)},{default:()=>[z.row.username]})},{title:"昵称",colKey:"nickname"},{title:"Slogan",colKey:"slogan"}],d=[{title:"题目数量",colKey:"problem_count",cell:(I,z)=>{let k=0;return z.row.problem_count&&(k=z.row.problem_count),t(G,{variant:"dashed",onClick:()=>x(z.row.username)},ot(k)?k:{default:()=>[k]})}}],b=[{title:"正确",colKey:"accept",cell:(I,z)=>{let k=0;return z.row.accept&&(k=z.row.accept),t(G,{variant:"dashed",onClick:()=>x(z.row.username)},ot(k)?k:{default:()=>[k]})}},{title:"提交",colKey:"attempt",cell:(I,z)=>{let k=0;return z.row.attempt&&(k=z.row.attempt),t(G,{variant:"dashed",onClick:()=>V(z.row.username)},ot(k)?k:{default:()=>[k]})}}],h=_(!1);let w=1,m=50;const v=_({current:w,pageSize:m,defaultCurrent:w,defaultPageSize:m,total:0,pageSizeOptions:[50]}),$=_(),K=I=>{o.push({name:"user",params:{username:I}})},x=I=>{o.push({name:"judge-list",query:{username:I,status:_e.Accept}})},V=I=>{o.push({name:"judge-list",query:{username:I}})},A=async(I,z)=>{h.value=!0;try{$.value=[];const{current:k,pageSize:u}=I;let r=null;switch(c.type){case"problem":r=await el(k,u);break;case"problem-today":r=await tl(k,u);break;case"problem-day7":r=await al(k,u);break;case"problem-year":r=await nl(k,u);break;default:r=await Qo(k,u);break}if(r.code===0){const f=r.data.list;if(!f||f.length<=0){v.value={...v.value,total:0},me(s,"未找到记录");return}$.value=[];const P=v.value.pageSize*(v.value.current-1);let T=1;f.forEach(D=>{var X;const U=D;U.index=P+T++,(X=$.value)==null||X.push(U)}),v.value={...v.value,total:r.data.total_count}}else z&&O(s,r.code)}catch(k){console.error(k),O(s,Se())}finally{h.value=!1}},C=async I=>{await o.push({query:{...a.query,page:I.current,page_size:I.pageSize}})};return ne(async()=>{h.value=!0,l=xe(()=>a.query,I=>{switch(c.type&&g[c.type]?(y.value=g[c.type].header,L.value=g[c.type].content):(y.value=g.all.header,L.value=g.all.content),c.type){case"all":p.value=i.concat(b);break;default:p.value=i.concat(d);break}const z=parseInt(I.page)||v.value.defaultCurrent,k=parseInt(I.page_size)||v.value.defaultPageSize;w=z,m=k,v.value={...v.value,current:w,pageSize:m},A({current:w,pageSize:m},!0)},{immediate:!0})}),Ce(()=>{l&&l()}),(I,z)=>{const k=Pe,u=ue,r=ge,f=ve;return j(),M(f,null,{default:n(()=>[t(r,{span:9},{default:n(()=>[t(u,{style:{margin:"10px"}},{default:n(()=>[t(k,{data:$.value,columns:p.value,"row-key":"id","vertical-align":"top",hover:!0,pagination:v.value,loading:h.value,"table-layout":"auto",onPageChange:C},null,8,["data","columns","pagination","loading"])]),_:1})]),_:1}),t(r,{span:3},{default:n(()=>[R("div",ol,[t(u,{class:"sh-card",header:y.value,"header-bordered":!0},{default:n(()=>[S(E(L.value),1)]),_:1},8,["header"])])]),_:1})]),_:1})}}}),Me=Q(ll,[["__scopeId","data-v-ad6297d7"]]),sl=ae({__name:"ManageJudge",setup(e){const{globalProperties:a}=re(),o=_(""),s=_(!1),l=_(!1),c=_(!1),y=async()=>{s.value=!0;try{const p=await Jn();if(p.code!==0){O(a,p.code);return}me(a,"重判成功"),await B.push({name:"judge-list"})}catch(p){console.error(p),O(a,"重判失败")}finally{s.value=!1}},L=async()=>{if(o.value===""){O(a,"请输入问题Id");return}l.value=!0;try{const p=await Wn(o.value);if(p.code!==0){O(a,p.code);return}me(a,"重判成功"),await B.push({name:"judge-list",query:{problem_id:o.value}})}catch(p){console.error(p),O(a,"重判失败")}finally{l.value=!1}},g=async()=>{c.value=!0;try{const p=await Xn();if(p.code!==0){O(a,p.code);return}me(a,"重判成功"),await B.push({name:"judge-list"})}catch(p){console.error(p),O(a,"重判失败")}finally{c.value=!1}};return(p,i)=>{const d=G,b=ue,h=Ie,w=pe;return j(),W(ee,null,[t(b,{class:"yj-manage-card",title:"重判最近提交"},{default:n(()=>[t(d,{onClick:y,loading:s.value},{default:n(()=>i[1]||(i[1]=[S("重判")])),_:1},8,["loading"])]),_:1}),t(b,{class:"yj-manage-card",title:"重判问题"},{default:n(()=>[t(w,null,{default:n(()=>[t(h,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=m=>o.value=m),placeholder:"输入问题Id"},null,8,["modelValue"]),t(d,{onClick:L,loading:l.value},{default:n(()=>i[2]||(i[2]=[S("重判")])),_:1},8,["loading"])]),_:1})]),_:1}),t(b,{class:"yj-manage-card",title:"重判所有"},{default:n(()=>[t(d,{onClick:g,theme:"danger",loading:c.value},{default:n(()=>i[3]||(i[3]=[S("重判")])),_:1},8,["loading"])]),_:1})],64)}}}),rl=Q(sl,[["__scopeId","data-v-14c853f1"]]),ul={style:{margin:"10px"}},il={key:1},cl={style:{margin:"12px"}},dl={class:"dida-edit-container"},ml=ae({__name:"ProblemEdit",setup(e){let a=ce();const{globalProperties:o}=re(),s=Ve(),l=_(""),c=_(!1);let y=null;const L=_(!1),g=_(null),p=_({title:"",timeLimit:0,memoryLimit:0,source:"",tags:[]}),i=_([]),d=_([]),b=Te(()=>{const x=[],V=i.value;for(let A=0,C=V.length;A<C;A++)V[A].value&&x.push(V[A].value);return x}),h=(x,V)=>{const{trigger:A,index:C,item:I}=V;if(A==="clear"&&(i.value=[]),["tag-remove","backspace"].includes(A)&&i.value.splice(C,1),A==="enter"){for(let k=0;k<d.value.length;k++){const u=d.value[k];if(u.label===I){for(let r=0;r<i.value.length;r++)if(i.value[r].label===u.label)return;i.value.push(u);return}}const z={label:I,value:I};i.value.push(z),d.value=d.value.concat(z)}},w=(x,{current:V,type:A})=>{if(!V){i.value=A==="check"?d.value.slice(1):[];return}if(A==="check"){const C=d.value.find(I=>I.value===V);if(!C)return;i.value.push(C)}else i.value=i.value.filter(C=>C.value!==V)},m=()=>{B.push({name:"problem-detail",params:{problemId:l.value}})},v=()=>{B.push({name:"manage-problem-judge",params:{problemId:l.value}})},$=async()=>{if(y){L.value=!0,p.value.tags=[];for(let x=0;x<i.value.length;x++){const V=i.value[x];V&&V.label&&p.value.tags.push(V.label)}try{const x=await eo(l.value,p.value.title,p.value.timeLimit,p.value.memoryLimit,p.value.source,p.value.tags,y.getValue());if(L.value=!0,x.code!==0){O(o,x.code);return}x.data!=null&&(g.value.updateTime=new Date(x.data).toLocaleString()),Ft(o,"保存成功")}finally{L.value=!1}}},K=async()=>{const x=await Bt(l.value);if(x.code!==0){O(o,x.code),console.error("problem get failed",x.code),await B.push({name:"problem"});return}const V=x.data.problem;if(g.value=Qe(V,{}),p.value.title=V.title,p.value.timeLimit=V.time_limit,p.value.memoryLimit=V.memory_limit,p.value.source=V.source,p.value.tags=[],i.value=[],x.data.tags)for(let I=0;I<x.data.tags.length;I++){const z=x.data.tags[I];z&&z.name&&(p.value.tags.push(z.name),i.value.push({label:z.name,value:z.id}))}s.setTitle(V.title+" - "+s.getTitle);let A=V.description;const C={after:()=>{y==null||y.setValue(A)}};y=new le("codeEditRef",C),c.value=!1};return ne(async()=>{if(Array.isArray(a.params.problemId)?l.value=a.params.problemId[0]:l.value=a.params.problemId,!l.value){fe(o,"题目不存在"),await B.push({name:"problem"});return}c.value=!0,Jt(-1).then(async x=>{x.code===0?(x.data.list&&x.data.list.forEach(V=>{d.value.push({label:V.name,value:V.id})}),await K()):(O(o,x.code),console.error("problem tag get failed",x.code),await B.push({name:"problem"}))}).catch(async x=>{console.error(x),O(o,"获取数据异常"),await B.push({name:"problem"})})}),(x,V)=>{const A=Ie,C=ze,I=La,z=ja,k=xa,u=je,r=ue,f=ge,P=G,T=pe,D=Ee,U=Ae,X=ve,N=he;return j(),M(N,{loading:c.value},{default:n(()=>[t(X,null,{default:n(()=>[t(f,{span:8},{default:n(()=>[R("div",ul,[t(r,{class:"sh-card"},{default:n(()=>[t(u,{model:p.value},{default:n(()=>[t(C,{label:"标题"},{default:n(()=>[t(A,{modelValue:p.value.title,"onUpdate:modelValue":V[0]||(V[0]=H=>p.value.title=H),placeholder:"问题标题"},null,8,["modelValue"])]),_:1}),t(C,{label:"时间限制"},{default:n(()=>[t(I,{modelValue:p.value.timeLimit,"onUpdate:modelValue":V[1]||(V[1]=H=>p.value.timeLimit=H),theme:"normal",min:0},{suffix:n(()=>V[4]||(V[4]=[R("span",null,"ms",-1)])),_:1},8,["modelValue"])]),_:1}),t(C,{label:"内存限制"},{default:n(()=>[t(I,{modelValue:p.value.memoryLimit,"onUpdate:modelValue":V[2]||(V[2]=H=>p.value.memoryLimit=H),theme:"normal",min:0},{suffix:n(()=>V[5]||(V[5]=[R("span",null,"KB",-1)])),_:1},8,["modelValue"])]),_:1}),t(C,{label:"来源"},{default:n(()=>[t(A,{modelValue:p.value.source,"onUpdate:modelValue":V[3]||(V[3]=H=>p.value.source=H),placeholder:"请输入题目来源"},null,8,["modelValue"])]),_:1}),t(C,{label:"标签"},{default:n(()=>[t(k,{value:i.value,"allow-input":!0,placeholder:"请选择或输入","tag-input-props":{excessTagsDisplayType:"break-line"},"popup-props":{overlayInnerClassName:["narrow-scrollbar"],overlayInnerStyle:{maxHeight:"280px",overflowY:"auto",overscrollBehavior:"contain",padding:"6px"}},clearable:"",multiple:"",onTagChange:h},{panel:n(()=>[d.value.length?(j(),M(z,{key:0,value:b.value,options:d.value,onChange:w},null,8,["value","options"])):(j(),W("div",il,"暂无数据"))]),suffixIcon:n(()=>[t(oe(aa))]),_:1},8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})])]),_:1}),t(f,{span:4},{default:n(()=>[R("div",cl,[R("div",dl,[t(T,null,{default:n(()=>[t(P,{onClick:$,theme:"danger",loading:L.value},{default:n(()=>V[6]||(V[6]=[S("保存")])),_:1},8,["loading"]),t(P,{onClick:v,theme:"warning"},{default:n(()=>V[7]||(V[7]=[S("判题数据")])),_:1}),t(P,{onClick:m},{default:n(()=>V[8]||(V[8]=[S("查看")])),_:1})]),_:1})]),t(U,{layout:"vertical",bordered:!0},{default:n(()=>[t(D,{label:"创建时间"},{default:n(()=>{var H;return[S(E((H=g.value)==null?void 0:H.insertTime),1)]}),_:1}),t(D,{label:"更新时间"},{default:n(()=>{var H;return[S(E((H=g.value)==null?void 0:H.updateTime),1)]}),_:1}),t(D,{label:"判题方式"},{default:n(()=>{var H;return[S(E((H=g.value)==null?void 0:H.judgeType),1)]}),_:1}),t(D,{label:"上传用户"},{default:n(()=>{var H;return[S(E((H=g.value)==null?void 0:H.creatorNickname),1)]}),_:1})]),_:1})])]),_:1})]),_:1}),V[9]||(V[9]=R("div",{id:"codeEditRef",class:"dida-description-editor"},null,-1))]),_:1},8,["loading"])}}}),pl=Q(ml,[["__scopeId","data-v-e994311e"]]),fl={style:{margin:"10px"}},_l={style:{margin:"12px"}},gl={class:"dida-edit-container"},vl=ae({__name:"ProblemJudge",setup(e){let a=ce();const{globalProperties:o}=re(),s=Ve(),l=_(""),c=_(!1),y=_(null);let L=null;const g=_(null),p=_(""),i=_(!1),d=_(!1),b=_([{title:"文件",colKey:"file"},{title:"大小",colKey:"size",width:150,cell:(u,r)=>r.row.size.toFixed(0)+" B"},{title:"最后修改时间",colKey:"lastModified",width:180,cell:(u,r)=>new Date(r.row.lastModified).toLocaleString()},{title:"操作",colKey:"action",width:100,cell:(u,r)=>t(G,{onClick:()=>K(r.row.file)},{default:()=>[S("下载")]})}]),h=_([]),w=Te(()=>({border:"2px dashed #ccc",borderRadius:"6px",padding:"20px",textAlign:"center",cursor:"pointer",backgroundColor:i.value?"#f0f9ff":"#fff",transition:"background-color 0.2s ease"})),m=Te(()=>p.value?`已选择：${p.value}`:i.value?"松开文件以上传":"拖拽文件到这里，或点击选择文件"),v=()=>{B.push({name:"problem-detail",params:{problemId:l.value}})},$=()=>{B.push({name:"manage-problem",params:{problemId:l.value}})},K=async u=>{const r=await to(l.value,u);if(r.code!==0){O(o,r.code);return}const f=document.createElement("a");f.href=r.data,f.target="_blank",f.click(),URL.revokeObjectURL(f.href)},x=async()=>{if(!L){fe(o,"请选择压缩包");return}d.value=!0,ao(l.value,L).then(async u=>{u.code==0?(g.value.value=null,L=null,p.value="",c.value=!0,Ft(o,"上传成功"),await k()):O(o,u.code)}).catch(u=>{console.log(u),o.$message.error({duration:3e3,content:"申请失败"})}).finally(()=>{d.value=!1})},V=()=>{var u;(u=g.value)==null||u.click()},A=u=>{const r=u.target.files[0];r&&(p.value=r.name,L=r)},C=u=>{i.value=!0},I=()=>{i.value=!1},z=u=>{u.preventDefault(),u.stopPropagation(),i.value=!1;const r=u.dataTransfer.files[0];if(r){p.value=r.name;const f=new DataTransfer;f.items.add(r),g.value.files=f.files,L=r}},k=async()=>{const u=await Zn(l.value);if(u.code!==0){O(o,u.code),await B.push({name:"problem"});return}const r=u.data.problem;y.value=Qe(r,{}),s.setTitle(r.title+" - "+s.getTitle),h.value=[],u.data.judges?u.data.judges.forEach(f=>{h.value.push({file:f.key,size:f.size,lastModified:f.last_modified})}):fe(o,"评测数据不存在"),c.value=!1};return ne(async()=>{if(Array.isArray(a.params.problemId)?l.value=a.params.problemId[0]:l.value=a.params.problemId,!l.value){fe(o,"题目不存在"),await B.push({name:"problem"});return}c.value=!0,await k()}),(u,r)=>{const f=Pe,P=ge,T=G,D=pe,U=Ee,X=Ae,N=ve,H=he;return j(),M(H,{loading:c.value},{default:n(()=>[t(N,null,{default:n(()=>[t(P,{span:7},{default:n(()=>[R("div",fl,[R("div",{id:"drop-zone",style:Pt(w.value),onClick:V,onDragenter:qe(C,["prevent"]),onDragover:r[0]||(r[0]=qe(()=>{},["prevent"])),onDragleave:qe(I,["prevent"]),onDrop:z},[R("input",{ref_key:"fileInput",ref:g,type:"file",style:{display:"none"},onChange:A},null,544),S(" "+E(m.value),1)],36)]),t(f,{data:h.value,columns:b.value,"row-key":"id","vertical-align":"top",hover:!0},null,8,["data","columns"])]),_:1}),t(P,{span:5},{default:n(()=>[R("div",_l,[R("div",gl,[t(D,null,{default:n(()=>[t(T,{onClick:x,theme:"danger",loading:d.value},{default:n(()=>r[1]||(r[1]=[S("上传")])),_:1},8,["loading"]),t(T,{onClick:$,theme:"warning"},{default:n(()=>r[2]||(r[2]=[S("编辑")])),_:1}),t(T,{onClick:v},{default:n(()=>r[3]||(r[3]=[S("查看")])),_:1})]),_:1})]),t(X,{layout:"vertical",bordered:!0},{default:n(()=>[t(U,{label:"标题"},{default:n(()=>{var J;return[S(E((J=y.value)==null?void 0:J.title),1)]}),_:1}),t(U,{label:"创建时间"},{default:n(()=>{var J;return[S(E((J=y.value)==null?void 0:J.insertTime),1)]}),_:1}),t(U,{label:"更新时间"},{default:n(()=>{var J;return[S(E((J=y.value)==null?void 0:J.updateTime),1)]}),_:1}),t(U,{label:"判题方式"},{default:n(()=>{var J;return[S(E((J=y.value)==null?void 0:J.judgeType),1)]}),_:1}),t(U,{label:"评测数据"},{default:n(()=>{var J;return[S(E((J=y.value)==null?void 0:J.judgeMd5),1)]}),_:1}),t(U,{label:"上传用户"},{default:n(()=>{var J;return[S(E((J=y.value)==null?void 0:J.creatorNickname),1)]}),_:1})]),_:1})])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),hl=Q(vl,[["__scopeId","data-v-3be5c9c9"]]),Yt=[{name:"problem-list",tab:"problem",sidebar:"problem-list",path:"",title:"问题列表",icon:"list",component:so},{name:"problem-detail",tab:"problem",sidebar:"problem-list",path:":problemId+",title:"问题详情",icon:"list",component:ht},{name:"problem-recommend",tab:"problem",sidebar:"problem-recommend",path:"recommend/:problemId*",title:"问题推荐",icon:"cpu",component:bo},{name:"judge-list",tab:"judge",sidebar:"judge-list",path:"",title:"评测列表",icon:"list",component:So},{name:"judge-detail",tab:"judge",sidebar:"judge-list",path:":judgeId+",title:"评测详情",icon:"cpu",component:Lo},{name:"contest-list",tab:"contest",sidebar:"contest-list",path:"",title:"比赛列表",icon:"list",component:Fe},{name:"contest-recent",tab:"contest",sidebar:"contest-recent",path:"recent",title:"近期比赛",icon:"list",component:Fe},{name:"contest-detail",tab:"contest-detail-tab",sidebar:"contest-detail",path:":contestId+",title:"比赛详情",icon:"cpu",component:Ro},{name:"contest-problem-detail",tab:"contest-detail-tab",sidebar:"contest-problem-detail",path:":contestId+/problem/:problemIndex+",title:"问题详情",icon:"cpu",component:ht},{name:"contest-judge",tab:"contest-detail-tab",sidebar:"contest-judge",path:":contestId+/judge",title:"评测列表",icon:"list",component:Fe},{name:"contest-rank",tab:"contest-detail-tab",sidebar:"contest-rank",path:":contestId+/rank",title:"比赛排名",icon:"list",component:Fe},{name:"contest-statistics",tab:"contest-detail-tab",sidebar:"contest-statistics",path:":contestId+/statistics",title:"结果统计",icon:"list",component:Fe},{name:"contest-discuss",tab:"contest-detail-tab",sidebar:"contest-discuss",path:":contestId+/discuss",title:"比赛讨论",icon:"list",component:Be},{name:"contest-discuss-detail",tab:"contest-detail-tab",sidebar:"contest-discuss",path:":contestId+/discuss/:discussId+",title:"讨论详情",icon:"list",component:nt},{name:"discuss-list",tab:"discuss",sidebar:"discuss-list",path:"",title:"讨论列表",icon:"list",component:Be},{name:"discuss-list-problem",tab:"discuss",sidebar:"discuss-list-problem",path:"problem",title:"问题讨论",icon:"list",component:Be},{name:"discuss-list-judge",tab:"discuss",sidebar:"discuss-list-judge",path:"judge",title:"评测讨论",icon:"list",component:Be},{name:"discuss-detail",tab:"discuss",sidebar:"discuss-list",path:":discussId+",title:"讨论详情",icon:"list",component:nt},{name:"rank-ac-all",tab:"rank",sidebar:"rank-ac-all",path:"ac",title:"AC排名",icon:"base-station",props:{type:"all"},component:Me},{name:"rank-ac-problem",tab:"rank",sidebar:"rank-ac-problem",path:"ac/problem",title:"题量排名",icon:"base-station",props:{type:"problem"},component:Me},{name:"rank-ac-problem-today",tab:"rank",sidebar:"rank-ac-problem-today",path:"ac/problem/today",title:"今日题量",icon:"base-station",props:{type:"problem-today"},component:Me},{name:"rank-ac-problem-day7",tab:"rank",sidebar:"rank-ac-problem-day7",path:"ac/problem/day7",title:"7日题量",icon:"base-station",props:{type:"problem-day7"},component:Me},{name:"rank-ac-problem-year",tab:"rank",sidebar:"rank-ac-problem-year",path:"ac/problem/year",title:"1年题量",icon:"base-station",props:{type:"problem-year"},component:Me},{name:"tool-paste",tab:"tool",sidebar:"tool-paste",path:"paste",title:"码池",icon:"base-station",component:rt},{name:"system-status",tab:"system",sidebar:"system-status",path:"",title:"运行状态",icon:"base-station",component:rt},{name:"system-about",tab:"system",sidebar:"system-about",path:"about",title:"关于",icon:"base-station",props:{discussId:"52"},component:nt},{name:"manage-problem",tab:"manage",sidebar:"manage-problem",disableSidebar:!0,path:"problem/:problemId+",title:"问题编辑",icon:"list",component:pl,auths:[Le.ManageProblem]},{name:"manage-problem-judge",tab:"manage",sidebar:"manage-problem-judge",disableSidebar:!0,path:"problem/:problemId+/judge",title:"评测数据",icon:"list",component:hl,auths:[Le.ManageProblem]},{name:"manage-judge",tab:"manage",path:"judge",sidebar:"manage-judge",title:"评测管理",icon:"list",auths:["i-manage-judge"],component:rl}],yt=(e,a,o,s)=>{s.tab==o&&(s.disableSidebar&&a!=s.sidebar||s.sidebar==null||s.sidebar!=s.name||e.push({name:s.name,title:s.title,icon:s.icon,to:{name:s.name}}))},bl=(e,a)=>{const o=[];return Yt.forEach(s=>{if(Mt(s)){const l=[];s.children.forEach(c=>{yt(l,e,a,c)}),l.length>0&&o.push({title:s.title,children:l})}else yt(o,e,a,s)}),o},wt=(e,a)=>{const o=dn(a.tab),s={name:a.name,path:"/"+a.path,meta:{title:a.title+" - "+o.title,tab:a.tab,sidebar:a.sidebar,showSidebar:o.showSidebar,needLogin:o.needLogin||a.needLogin,tabAuths:o.auths,auths:a.auths},props:a.props,component:a.component};o.disablePath||(s.path=o.path+s.path),e.push(s)},yl=e=>{Yt.forEach(a=>{Mt(a)?a.children.forEach(o=>{wt(e,o)}):wt(e,a)})},Oe=[];pn(Oe);yl(Oe);Oe.push({path:"/403",name:"403",component:qt});Oe.push({path:"/:pathMatch(.*)*",name:"404",component:Et});const B=na({history:oa("/"),routes:Oe});B.beforeEach((e,a,o)=>{if(e.name==null||!B.hasRoute(e.name)){o({name:"home"});return}const s=e.matched[e.matched.length-1].meta;if(s.redirect){o({name:s.redirect});return}if(s.needLogin){const c=be();if(c.getToken==null||c.getToken==""){o({name:"login",query:{redirect_uri:e.fullPath}});return}}const l=s.tabAuths;if(l&&!be().hasAllAuths(l)){o({name:"403",query:{target:e.fullPath}});return}o()});B.afterEach((e,a)=>{if(e.name===a.name)return;const o=Ze(),s=Ve();let l=null;if(e.matched.length>0&&(l=e.matched[e.matched.length-1].meta),l!=null&&l.title&&s.setTitle(l==null?void 0:l.title),l!=null&&l.showSidebar){o.setSidebarShow(!0);const c=bl(l==null?void 0:l.sidebar,l==null?void 0:l.tab);o.setMenuList(c),o.setMenuActiveName(l==null?void 0:l.sidebar)}else o.setSidebarShow(!1)});Va.registerLanguage("verilog",$a);const Zt=la();Zt.use(sa);const He=ra(Mn);He.use(Zt);He.use(B);He.use(za);He.use(ua);He.mount("#app");Za().then(()=>{console.log("Text cache reinitialized")}).catch(e=>{console.error("Text cache reinitialization failed",e)});
